(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{193:function(e,t,a){e.exports=a.p+"static/media/2023-2024-calinder-3.4403e7fd.png"},218:function(e,t,a){e.exports=a.p+"static/media/2023-physics-summer-s.eecc1270.png"},318:function(e,t,a){e.exports=a.p+"static/media/class2021summer2.c4490f5d.png"},387:function(e,t,a){e.exports=a.p+"static/media/22-23-calinder.4e169a86.png"},388:function(e,t,a){e.exports=a.p+"static/media/class-3-2021-summer.bb96ef79.png"},499:function(e,t,a){},503:function(e,t,a){e.exports=a.p+"static/media/logo192.a201a234.png"},506:function(e,t,a){e.exports=a.p+"static/media/me-8-4-3.1895dd08.png"},507:function(e,t,a){e.exports=a.p+"static/media/1ppd.93f45811.png"},508:function(e,t,a){e.exports=a.p+"static/media/amc-mathcount.3035be6e.png"},546:function(e,t,a){e.exports=a(886)},553:function(e,t,a){},554:function(e,t,a){},579:function(e,t,a){},580:function(e,t,a){},581:function(e,t,a){e.exports=a.p+"static/media/2022-S-ME-class-all.06d90314.png"},582:function(e,t,a){e.exports=a.p+"static/media/2022-S-ME-class.9ee4879e.png"},583:function(e,t,a){},585:function(e,t,a){},640:function(e,t){},886:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),l=a.n(c),o=a(18),i=a(226),s=a(502),u=a(501),m=a(9),d=Object(i.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_REQUEST":return{loading:!0};case"USER_LOGIN_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_LOGIN_FAIL":return{loading:!1,error:t.payload};case"USER_LOGOUT":return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:t.payload};case"USER_LOGOUT":return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DETAILS_REQUEST":return Object(m.a)({loading:!0},e);case"USER_DETAILS_SUCCESS":return{loading:!1,user:t.payload};case"USER_DETAILS_FAIL":return{loading:!1,error:t.payload};case"USER_DETAILS_RESET":return{user:{}};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_PROFILE_REQUEST":return{loading:!0};case"USER_UPDATE_PROFILE_SUCCESS":return{loading:!1,success:!0,userInfo:t.payload};case"USER_UPDATE_PROFILE_FAIL":return{loading:!1,error:t.payload};case"USER_UPDATE_PROFILE_RESET":return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LIST_REQUEST":return{loading:!0};case"USER_LIST_SUCCESS":return{loading:!1,users:t.payload};case"USER_LIST_FAIL":return{loading:!1,error:t.payload};case"USER_LIST_RESET":return{users:[]};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DELETE_REQUEST":return{loading:!0};case"USER_DELETE_SUCCESS":return{loading:!1,success:!0};case"USER_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_REQUEST":return{loading:!0};case"USER_UPDATE_SUCCESS":return{loading:!1,success:!0};case"USER_UPDATE_FAIL":return{loading:!1,error:t.payload};case"USER_UPDATE_RESET":return{user:{}};default:return e}},productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_REQUEST":return{loading:!0,products:[]};case"PRODUCT_LIST_SUCCESS":return{loading:!1,products:t.payload.products,pages:t.payload.pages,page:t.payload.page};case"PRODUCT_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DETAILS_REQUEST":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case"PRODUCT_DETAILS_SUCCESS":return{loading:!1,product:t.payload};case"PRODUCT_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DELETE_REQUEST":return{loading:!0};case"PRODUCT_DELETE_SUCCESS":return{loading:!1,success:!0};case"PRODUCT_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},productCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_CREATE_REQUEST":return{loading:!0};case"PRODUCT_CREATE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"PRODUCT_CREATE_FAIL":return{loading:!1,error:t.payload};case"PRODUCT_CREATE_RESET":return{};default:return e}},productUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_UPDATE_REQUEST":return{loading:!0};case"PRODUCT_UPDATE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"PRODUCT_UPDATE_FAIL":return{loading:!1,error:t.payload};case"PRODUCT_UPDATE_RESET":return{product:{}};default:return e}},productReviewCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_CREATE_REVIEW_REQUEST":return{loading:!0};case"PRODUCT_CREATE_REVIEW_SUCCESS":return{loading:!1,success:!0};case"PRODUCT_CREATE_REVIEW_FAIL":return{loading:!1,error:t.payload};case"PRODUCT_CREATE_REVIEW_RESET":return{};default:return e}},productTopRated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_TOP_REQUEST":return{loading:!0,products:[]};case"PRODUCT_TOP_SUCCESS":return{loading:!1,products:t.payload};case"PRODUCT_TOP_FAIL":return{loading:!1,error:t.payload};default:return e}},classCreateByT:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLASS_CREATE_REQUEST":return{loading:!0};case"CLASS_CREATE_SUCCESS":return{loading:!1,success:!0,tclass:t.payload};case"CLASS_CREATE_FAIL":return{loading:!1,error:t.payload};case"CLASS_CREATE_RESET":return{};default:return e}},classListForT:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{classes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLASS_LIST_FOR_TEACHER_REQUEST":return{loading:!0};case"CLASS_LIST_FOR_TEACHER_SUCCESS":return{loading:!1,classes:t.payload};case"CLASS_LIST_FOR_TEACHER_FAIL":return{loading:!1,error:t.payload};case"CLASS_LIST_FOR_TEACHER_RESET":return{classes:[]};default:return e}},classDeleteByT:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLASS_DELETE_REQUEST":return{loading:!0};case"CLASS_DELETE_SUCCESS":return{loading:!1,success:!0};case"CLASS_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},classUpdateByT:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tClass:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLASS_UPDATE_REQUEST":return{loading:!0};case"CLASS_UPDATE_SUCCESS":return{loading:!1,success:!0,tClass:t.payload};case"CLASS_UPDATE_FAIL":return{loading:!1,error:t.payload};case"CLASS_UPDATE_RESET":return{tClass:{}};default:return e}},classDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLASS_DETAILS_REQUEST":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case"CLASS_DETAILS_SUCCESS":return{loading:!1,tClass:t.payload};case"CLASS_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},findUserByEmail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIND_USER_EMAIL_REQUEST":return{loading:!0};case"FIND_USER_EMAIL_SUCCESS":return{loading:!1,studentInfo:t.payload};case"FIND_USER_EMAIL_FAIL":return{loading:!1,error:t.payload};case"FIND_USER_EMAIL_RESET":return{user:{}};default:return e}},registerCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_CREATE_REQUEST":return{loading:!0};case"REGISTER_CREATE_SUCCESS":return{loading:!1,success:!0,register:t.payload};case"REGISTER_CREATE_FAIL":return{loading:!1,error:t.payload};case"REGISTER_CREATE_RESET":return{};default:return e}},studentListInClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STUDENT_LIST_IN_CLASS_REQUEST":return{loading:!0};case"STUDENT_LIST_IN_CLASS_SUCCESS":return{loading:!1,success:!0,students:t.payload};case"STUDENT_LIST_IN_CLASS_FAIL":return{loading:!1,error:t.payload};case"STUDENT_LIST_IN_CLASS_RESET":return{};default:return e}},removeStudentFromClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_STUDENT_FROM_CLASS_REQUEST":return{loading:!0};case"REMOVE_STUDENT_FROM_CLASS_SUCCESS":return{loading:!1,success:!0};case"REMOVE_STUDENT_FROM_CLASS_FAIL":return{loading:!1,error:t.payload};case"REMOVE_STUDENT_FROM_CLASS_RESET":return{};default:return e}},myClassList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{myClasses:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MY_CLASS_LIST_REQUEST":return{loading:!0};case"MY_CLASS_LIST_SUCCESS":return{loading:!1,myClasses:t.payload};case"MY_CLASS_LIST_FAIL":return{loading:!1,error:t.payload};case"MY_CLASS_LIST_RESET":return{myClasses:[]};default:return e}},questionCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTION_CREATE_REQUEST":return{loading:!0};case"QUESTION_CREATE_SUCCESS":return{loading:!1,success:!0,question:t.payload};case"QUESTION_CREATE_FAIL":return{loading:!1,error:t.payload};case"QUESTION_CREATE_RESET":return{};default:return e}},questionListForTeacher:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{questions:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTION_LIST_FOR_TEACHER_REQUEST":return{loading:!0};case"QUESTION_LIST_FOR_TEACHER_SUCCESS":return{loading:!1,questions:t.payload};case"QUESTION_LIST_FOR_TEACHER_FAIL":return{loading:!1,error:t.payload};case"QUESTION_LIST_FOR_TEACHER_RESET":return{questions:[]};default:return e}},questionDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTION_DELETE_REQUEST":return{loading:!0};case"QUESTION_DELETE_SUCCESS":return{loading:!1,success:!0};case"QUESTION_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},questionUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{question:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTION_UPDATE_REQUEST":return{loading:!0};case"QUESTION_UPDATE_SUCCESS":return{loading:!1,success:!0,question:t.payload};case"QUESTION_UPDATE_FAIL":return{loading:!1,error:t.payload};case"QUESTION_UPDATE_RESET":return{question:{}};default:return e}},questionDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTION_DETAILS_REQUEST":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case"QUESTION_DETAILS_SUCCESS":return{loading:!1,question:t.payload};case"QUESTION_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},hwCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HW_CREATE_REQUEST":return{loading:!0};case"HW_CREATE_SUCCESS":return{loading:!1,success:!0,hw:t.payload};case"HW_CREATE_FAIL":return{loading:!1,error:t.payload};case"HW_CREATE_RESET":return{};default:return e}},hwListForTeacher:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hws:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HW_LIST_FOR_TEACHER_REQUEST":return{loading:!0};case"HW_LIST_FOR_TEACHER_SUCCESS":return{loading:!1,hws:t.payload};case"HW_LIST_FOR_TEACHER_FAIL":return{loading:!1,error:t.payload};case"HW_LIST_FOR_TEACHER_RESET":return{hws:[]};default:return e}},hwDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HW_DELETE_REQUEST":return{loading:!0};case"HW_DELETE_SUCCESS":return{loading:!1,success:!0};case"HW_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},hwUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hw:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HW_UPDATE_REQUEST":return{loading:!0};case"HW_UPDATE_SUCCESS":return{loading:!1,success:!0,hw:t.payload};case"HW_UPDATE_FAIL":return{loading:!1,error:t.payload};case"HW_UPDATE_RESET":return{hw:{}};default:return e}},hwDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HW_DETAILS_REQUEST":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case"HW_DETAILS_SUCCESS":return{loading:!1,hw:t.payload};case"HW_DETAILS_FAIL":return{loading:!1,error:t.payload};case"HW_DETAILS_RESET":return{};default:return e}},hwAddQ:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_QUESTION_TO_HW_REQUEST":return{loading:!0};case"ADD_QUESTION_TO_HW_SUCCESS":return{loading:!1,success:!0};case"ADD_QUESTION_TO_HW_FAIL":return{loading:!1,error:t.payload};case"ADD_QUESTION_TO_HW_RESET":return{};default:return e}},hwDeleteQ:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_QUESTION_TO_HW_REQUEST":return{loading:!0};case"DELETE_QUESTION_TO_HW_SUCCESS":return{loading:!1,success:!0};case"DELETE_QUESTION_TO_HW_FAIL":return{loading:!1,error:t.payload};case"DELETE_QUESTION_TO_HW_RESET":return{};default:return e}},hwDetailsAddClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HW_DETAILS_ADD_CLASS_REQUEST":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case"HW_DETAILS_ADD_CLASS_SUCCESS":return{loading:!1,hw:t.payload};case"HW_DETAILS_ADD_CLASS_FAIL":return{loading:!1,error:t.payload};case"HW_DETAILS_ADD_CLASS_RESET":return{};default:return e}},classAddHW:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_HW_TO_CLASS_REQUEST":return{loading:!0};case"ADD_HW_TO_CLASS_SUCCESS":return{loading:!1,success:!0};case"ADD_HW_TO_CLASS_FAIL":return{loading:!1,error:t.payload};case"ADD_HW_TO_CLASS_RESET":return{};default:return e}},classDeleteHW:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_HW_FROM_CLASS_REQUEST":return{loading:!0};case"DELETE_HW_FROM_CLASS_SUCCESS":return{loading:!1,success:!0};case"DELETE_HW_FROM_CLASS_FAIL":return{loading:!1,error:t.payload};case"DELETE_HW_FROM_CLASS_RESET":return{};default:return e}},myHWListInClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hws:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MY_HW_IN_CLASS_REQUEST":return{loading:!0};case"MY_HW_IN_CLASS_SUCCESS":return{loading:!1,success:!0,classContent:t.payload};case"MY_HW_IN_CLASS_FAIL":return{loading:!1,error:t.payload};case"MY_HW_IN_CLASS_RESET":return{hw:{}};default:return e}}}),h={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},E=[s.a],f=Object(i.createStore)(d,h,Object(u.composeWithDevTools)(i.applyMiddleware.apply(void 0,E))),p=(a(553),a(54)),v=a(40),b=a(943),g=a(62);a(554);var y=a(961),S=a(969),C=a(954),w=a(504),O=a(503),_=a.n(O),j=a(27),L=a(28),I=a(80),k=a.n(I),N=k.a.create({baseURL:"/api/",headers:{"Content-Type":"application/json"}}),x=["/user/verifyEmail"];N.interceptors.request.use((function(e){e.url.startsWith("/user")&&!x.includes(e.url)&&window.localStorage.getItem("isVerify")&&(document.location.href="/verify");var t=localStorage.getItem("userInfo");if(t){var a=JSON.parse(t).token;e.headers.Authorization="Bearer ".concat(a)}return e}),(function(e){return Promise.reject(e)})),N.interceptors.response.use((function(e){var t=e.data.code;return 200!==t?(401===t&&(localStorage.removeItem("userInfo"),document.location.href="/login"),402===t&&(document.location.href="/verify",localStorage.setItem("isVerify","1")),Promise.reject(e.data)):e.data}),(function(e){return 401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));var T=N;function A(){A=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var D=function(){return function(e){localStorage.removeItem("userInfo"),e({type:"USER_LOGOUT"}),document.location.href="/login"}},R=function(e){return function(){var t=Object(L.a)(A().mark((function t(a,n){var r,c;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_LIST_REQUEST"}),t.next=4,T.get("/admin/getUsers",{params:{keyword:e}});case 4:r=t.sent,c=r.result,a({type:"USER_LIST_SUCCESS",payload:c.list}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"USER_LIST_FAIL",payload:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()},U=function(){var e=Object(o.b)(),t=window.localStorage.getItem("lang")||"en",a=Object(o.c)((function(e){return e.userLogin})).userInfo;return r.a.createElement("header",null,r.a.createElement(y.a,{className:"no-border ",bg:"light",expand:"lg"},r.a.createElement(b.a,null,r.a.createElement(j.LinkContainer,{to:"/"},r.a.createElement(y.a.Brand,{className:"navbar-brand "},r.a.createElement("img",{alt:"DeepEqm",src:_.a,className:"logo"}))),r.a.createElement(y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(y.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(S.a,{className:"mr-auto nav-font-size-2"},r.a.createElement(S.a.Link,{href:"/"},"Home"),r.a.createElement(C.a,{title:"Courses",id:"basic-nav-dropdown"},r.a.createElement(C.a.Item,{href:"/#Physics",className:"nav-font-size-2"},"Physics Courses"),r.a.createElement(C.a.Item,{href:"/#Math",className:"nav-font-size-2"},"Math Courses"))),a?r.a.createElement(S.a,{className:"ml-auto nav-font-size"},r.a.createElement(C.a,{title:a.name,id:"username",className:"nav-font-size-2"},r.a.createElement(j.LinkContainer,{className:"nav-font-size-2",to:"/profile"},r.a.createElement(C.a.Item,null,"Profile")),"Student"===a.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.LinkContainer,{className:"nav-font-size-2",to:"/myclasses"},r.a.createElement(C.a.Item,null,"My Classes")),a.sRegister&&r.a.createElement(j.LinkContainer,{className:"nav-font-size-2",to:"/student/resources"},r.a.createElement(C.a.Item,null,"Resources"))),"Parent"===a.role&&r.a.createElement(j.LinkContainer,{className:"nav-font-size-2",to:"/parent/studentlist"},r.a.createElement(C.a.Item,null,"My Children Class")),r.a.createElement(C.a.Item,{className:"nav-font-size-2",onClick:function(){e(D())}},"Logout"))):r.a.createElement(S.a,{className:"ml-auto nav-font-size"},r.a.createElement(j.LinkContainer,{to:"/login"},r.a.createElement(S.a.Link,{className:"nav-font-size-2"},r.a.createElement("i",{className:"fas fa-user "}),"Sign in")),r.a.createElement(j.LinkContainer,{to:"/register"},r.a.createElement(S.a.Link,{className:"nav-font-size-2"},r.a.createElement("i",{className:"fas fa-user "}),"Register"))),a&&a.isAdmin&&r.a.createElement(C.a,{title:"Admin",id:"adminmenu",className:"nav-font-size-2"},r.a.createElement(j.LinkContainer,{to:"/admin/userlist"},r.a.createElement(C.a.Item,{className:"nav-font-size-2"},"Users")),r.a.createElement(j.LinkContainer,{to:"/admin/auditClass"},r.a.createElement(C.a.Item,{className:"nav-font-size-2"},"Audit Class")),r.a.createElement(j.LinkContainer,{to:"/admin/library"},r.a.createElement(C.a.Item,{className:"nav-font-size-2"},"Library")),r.a.createElement(j.LinkContainer,{to:"/admin/libraryQuestion"},r.a.createElement(C.a.Item,{className:"nav-font-size-2"},"My Library")),r.a.createElement(j.LinkContainer,{to:"/admin/emailList"},r.a.createElement(C.a.Item,{className:"nav-font-size-2"},"Email"))),a&&"Teacher"===a.role&&r.a.createElement(C.a,{title:"Teacher",id:"adminmenu",className:"nav-font-size-2"},r.a.createElement(j.LinkContainer,{to:"/teach/classlist"},r.a.createElement(C.a.Item,null,"My Classes")),r.a.createElement(j.LinkContainer,{to:"/teach/hwlist"},r.a.createElement(C.a.Item,null,"My Homeworks")),r.a.createElement(j.LinkContainer,{to:"/teach/questionlist"},r.a.createElement(C.a.Item,null,"My Questions")),r.a.createElement(j.LinkContainer,{to:"/teacher/library"},r.a.createElement(C.a.Item,null,"My Library"))),r.a.createElement(w.a,{className:"header-language",variant:"outline-dark",onClick:function(){window.localStorage.setItem("lang","en"===t?"zh":"en"),window.location.reload()}},"en"===t?"\u4e2d":"En")))))},q=a(944),P=a(505),H=function(){return r.a.createElement("footer",null,r.a.createElement(b.a,null,r.a.createElement(q.a,null,r.a.createElement(P.a,{className:"text-center py-3"},"Copyright \xa9 DeepEqm"))))},G=a(1),F=a(970),M=function(e){var t=e.product;return r.a.createElement(F.a,{className:"my-3 p-3 rounded"},r.a.createElement(v.Link,{to:"/class/".concat(t._id)},r.a.createElement(F.a.Header,{as:"h3"},r.a.createElement("strong",null,t.name))),r.a.createElement(F.a.Body,null,r.a.createElement(F.a.Text,{as:"div",className:"rich-text",dangerouslySetInnerHTML:{__html:t.introduction}}),r.a.createElement(v.Link,{to:"/class/".concat(t._id)},r.a.createElement(w.a,{variant:"info",className:"my-3 p-3 rounded"},"Learn More"))))},B=(a(138),a(579),a(506),a(507),a(508),a(580),a(581),a(387),a(218),a(193),function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(G.a)(l,2),i=o[0],s=o[1];return Object(n.useEffect)((function(){T.get("/public/getHomeClasses",{params:{language:window.localStorage.getItem("lang")||"en"}}).then((function(e){c(e.result.list)})),T.get("/public/getHomeDetail").then((function(e){s(e.result.introduction)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"rich-text",dangerouslySetInnerHTML:{__html:i}}),a.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h2",{className:"my-5 class-col",id:e.category},e.category),r.a.createElement(q.a,null,e.classes.map((function(e){return r.a.createElement(P.a,{sm:12,md:12,lg:12,key:e._id},r.a.createElement(M,{product:e}))}))))})))}),Q=a(945),z=(a(318),a(582),a(388),a(583),a(198)),W=a(11),Y=(a(584),a(948)),V=a(957),J=function(e){var t=e.value,a=e.text,n=e.color;return r.a.createElement("div",{className:"rating"},r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,a&&a))};J.defaultProps={color:"#f8e825"};var X=J,$=a(946),K=function(e){var t=e.variant,a=e.children;return r.a.createElement($.a,{variant:t},a)};K.defaultProps={variant:"info"};var Z=K,ee=a(947),te=function(){return r.a.createElement(ee.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"}},r.a.createElement("span",{className:"sr-only"},"Loading..."))},ae=a(509),ne=function(e){var t=e.title,a=e.description,n=e.keywords;return r.a.createElement(ae.a,null,r.a.createElement("title",null,t),r.a.createElement("meta",{name:"description",content:a}),r.a.createElement("meta",{name:"keyword",content:n}))};ne.defaultProps={title:"Welcome To ProShop",description:"We sell the best products for cheap",keywords:"electronics, buy electronics, cheap electroincs"};var re=ne;function ce(){ce=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var le=function(e){return function(){var t=Object(L.a)(ce().mark((function t(a){var n,r;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"PRODUCT_DETAILS_REQUEST"}),t.next=4,k.a.get("/api/products/".concat(e));case 4:n=t.sent,r=n.data,a({type:"PRODUCT_DETAILS_SUCCESS",payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"PRODUCT_DETAILS_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},oe=function(e){var t=e.history,a=e.match,c=Object(n.useState)(1),l=Object(G.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(0),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(""),f=Object(G.a)(E,2),p=f[0],g=f[1],y=Object(o.b)(),S=Object(o.c)((function(e){return e.productDetails})),C=S.loading,O=S.error,_=S.product,j=Object(o.c)((function(e){return e.userLogin})).userInfo,I=Object(o.c)((function(e){return e.productReviewCreate})),N=I.success,x=I.loading,T=I.error;Object(n.useEffect)((function(){N&&(h(0),g("")),_._id&&_._id===a.params.id||(y(le(a.params.id)),y({type:"PRODUCT_CREATE_REVIEW_RESET"}))}),[y,a,N]);var A=_.image;return A&&(A="/uploads/"+A.split("/").pop()),r.a.createElement(b.a,null,r.a.createElement(v.Link,{className:"btn btn-light my-3",to:"/admin/productlist"},"Go Back"),C?r.a.createElement(te,null):O?r.a.createElement(Z,{variant:"danger"},O):r.a.createElement(b.a,null,r.a.createElement(re,{title:_.name}),r.a.createElement(q.a,null,r.a.createElement(P.a,{md:6},r.a.createElement(Y.a,{src:A,alt:_.name,fluid:!0})),r.a.createElement(P.a,{md:3},r.a.createElement(z.a,{variant:"flush"},r.a.createElement(z.a.Item,null,r.a.createElement("h3",null,_.name)),r.a.createElement(z.a.Item,null,r.a.createElement(X,{value:_.rating,text:"".concat(_.numReviews," reviews")})),r.a.createElement(z.a.Item,null,"Price: $",_.price),r.a.createElement(z.a.Item,null,"Description: ",_.description))),r.a.createElement(P.a,{md:3},r.a.createElement(F.a,null,r.a.createElement(z.a,{variant:"flush"},r.a.createElement(z.a.Item,null,r.a.createElement(q.a,null,r.a.createElement(P.a,null,"Price:"),r.a.createElement(P.a,null,r.a.createElement("strong",null,"$",_.price)))),r.a.createElement(z.a.Item,null,r.a.createElement(q.a,null,r.a.createElement(P.a,null,"Status:"),r.a.createElement(P.a,null,_.countInStock>0?"In Stock":"Out Of Stock"))),_.countInStock>0&&r.a.createElement(z.a.Item,null,r.a.createElement(q.a,null,r.a.createElement(P.a,null,"Qty"),r.a.createElement(P.a,null,r.a.createElement(V.a.Control,{as:"select",value:i,onChange:function(e){return s(e.target.value)}},Object(W.a)(Array(_.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)})))))),r.a.createElement(z.a.Item,null,r.a.createElement(w.a,{onClick:function(){t.push("/cart/".concat(a.params.id,"?qty=").concat(i))},className:"btn-block",type:"button",disabled:0===_.countInStock},"Add To Cart")))))),r.a.createElement(q.a,null,r.a.createElement(P.a,{md:6},r.a.createElement("h2",null,"Reviews"),0===_.reviews.length&&r.a.createElement(Z,null,"No Reviews"),r.a.createElement(z.a,{variant:"flush"},_.reviews.map((function(e){return r.a.createElement(z.a.Item,{key:e._id},r.a.createElement("strong",null,e.name),r.a.createElement(X,{value:e.rating}),r.a.createElement("p",null,e.createdAt.substring(0,10)),r.a.createElement("p",null,e.comment))})),r.a.createElement(z.a.Item,null,r.a.createElement("h2",null,"Write a Customer Review"),N&&r.a.createElement(Z,{variant:"success"},"Review submitted successfully"),x&&r.a.createElement(te,null),T&&r.a.createElement(Z,{variant:"danger"},T),j?r.a.createElement(V.a,{onSubmit:function(e){var t,n;e.preventDefault(),y((t=a.params.id,n={rating:d,comment:p},function(){var e=Object(L.a)(ce().mark((function e(a,r){var c,l,o,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_CREATE_REVIEW_REQUEST"}),c=r(),l=c.userLogin.userInfo,o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=6,k.a.post("/api/products/".concat(t,"/reviews"),n,o);case 6:a({type:"PRODUCT_CREATE_REVIEW_SUCCESS"}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),"Not authorized, token failed"===(i=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&a(D()),a({type:"PRODUCT_CREATE_REVIEW_FAIL",payload:i});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement(V.a.Group,{controlId:"rating"},r.a.createElement(V.a.Label,null,"Rating"),r.a.createElement(V.a.Control,{as:"select",value:d,onChange:function(e){return h(e.target.value)}},r.a.createElement("option",{value:""},"Select..."),r.a.createElement("option",{value:"1"},"1 - Poor"),r.a.createElement("option",{value:"2"},"2 - Fair"),r.a.createElement("option",{value:"3"},"3 - Good"),r.a.createElement("option",{value:"4"},"4 - Very Good"),r.a.createElement("option",{value:"5"},"5 - Excellent"))),r.a.createElement(V.a.Group,{controlId:"comment"},r.a.createElement(V.a.Label,null,"Comment"),r.a.createElement(V.a.Control,{as:"textarea",row:"3",value:p,onChange:function(e){return g(e.target.value)}})),r.a.createElement(w.a,{disabled:x,type:"submit",variant:"primary"},"Submit")):r.a.createElement(Z,null,"Please"," ",r.a.createElement(v.Link,{to:"/login"},"sign in")," ","to write a review"," ")))))))},ie=(a(585),a(586),function(e){var t=e.children;return r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"justify-content-md-center"},r.a.createElement(P.a,{xs:12,md:6},t)))}),se=function(e){var t=e.location,a=e.history,c=Object(n.useState)(""),l=Object(G.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(""),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(""),f=Object(G.a)(E,2),p=f[0],b=f[1],g=Object(o.c)((function(e){return e.userLogin})).userInfo,y=t.search?t.search.split("=")[1]:"/myclasses";Object(n.useEffect)((function(){g&&a.push(y)}),[a,g,y]);return r.a.createElement(ie,null,r.a.createElement("h1",null,"Sign In"),p&&r.a.createElement(Z,{variant:"danger"},p),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),b(""),T.post("/login/authUser",{email:i,password:d}).then((function(e){localStorage.setItem("userInfo",JSON.stringify(e.result)),document.location.href="/profile"})).catch((function(e){b(e.msg)}))}},r.a.createElement(V.a.Group,{controlId:"email"},r.a.createElement(V.a.Label,null,"Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter email",value:i,onChange:function(e){return s(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"password"},r.a.createElement(V.a.Label,null,"Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter password",value:d,onChange:function(e){return h(e.target.value)}})),r.a.createElement(w.a,{type:"submit",variant:"primary"},"Sign In")),r.a.createElement(q.a,{className:"py-3"},r.a.createElement(P.a,null,r.a.createElement(v.Link,{to:y?"/register?redirect=".concat(y):"/register"},"Register"),"\xa0/\xa0",r.a.createElement(v.Link,{to:"/resetPassword"},"Forget Password"))))},ue=function(e){e.location;var t=e.history,a=Object(n.useState)(""),c=Object(G.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(""),u=Object(G.a)(s,2),m=u[0],d=u[1],h=Object(n.useState)(""),E=Object(G.a)(h,2),f=E[0],p=E[1],v=Object(n.useState)(["Student","Parent"]),b=Object(G.a)(v,1)[0],g=Object(n.useState)(""),y=Object(G.a)(g,2),S=y[0],C=y[1],O=Object(n.useState)(""),_=Object(G.a)(O,2),j=_[0],I=_[1],k=Object(n.useState)(""),N=Object(G.a)(k,2),x=N[0],D=N[1],R=Object(n.useState)(null),U=Object(G.a)(R,2),H=U[0],F=U[1],M=Object(n.useState)(""),B=Object(G.a)(M,2),Q=B[0],z=B[1],W=Object(n.useState)(""),Y=Object(G.a)(W,2),J=Y[0],X=Y[1],$=Object(n.useState)(""),K=Object(G.a)($,2),ee=K[0],ae=K[1],ne=Object(n.useState)(""),re=Object(G.a)(ne,2),ce=re[0],le=re[1],oe=Object(n.useState)(""),ie=Object(G.a)(oe,2),se=ie[0],ue=ie[1],me=Object(n.useState)(""),de=Object(G.a)(me,2),he=de[0],Ee=de[1],fe=Object(n.useState)(""),pe=Object(G.a)(fe,2),ve=pe[0],be=pe[1],ge=Object(n.useState)(""),ye=Object(G.a)(ge,2),Se=ye[0],Ce=ye[1],we=Object(n.useState)(""),Oe=Object(G.a)(we,2),_e=Oe[0],je=Oe[1],Le=Object(n.useState)(["1","2","3","4","5","6","7","8","9","10","11","12"]),Ie=Object(G.a)(Le,1)[0],ke=Object(o.b)(),Ne=Object(o.c)((function(e){return e.userDetails})),xe=Ne.loading,Te=Ne.error,Ae=Ne.user,De=Object(o.c)((function(e){return e.userLogin})).userInfo,Re=Object(o.c)((function(e){return e.userUpdateProfile})),Ue=Re.success,qe=Re.error,Pe=Object(n.useState)(""),He=Object(G.a)(Pe,2),Ge=He[0],Fe=He[1],Me=Object(n.useState)(60),Be=Object(G.a)(Me,2),Qe=Be[0],ze=Be[1],We=Object(n.useState)(!1),Ye=Object(G.a)(We,2),Ve=Ye[0],Je=Ye[1],Xe=Object(n.useState)(""),$e=Object(G.a)(Xe,2),Ke=$e[0],Ze=$e[1];Object(n.useEffect)((function(){if(De)if(Ae&&Ae.name&&!Ue)if(i(Ae.name),d(Ae.email),p(Ae.role),C(Ae.dependent),z(Ae.phone),X(Ae.address),ae(Ae.city),le(Ae.state),ue(Ae.country),Ee(Ae.zip),be(Ae.school),Ce(Ae.gradeInSchoolYear),Ae.gradeInSchoolYearAt){var e=new Date,a=e.getFullYear(),n=new Date(Ae.gradeInSchoolYearAt),r=n.getFullYear(),c=a-r;e>=new Date(a,8,1)&&n<new Date(r,8,1)&&(c+=1),je("".concat(Number(Ae.gradeInSchoolYear)+c))}else je("");else ke({type:"USER_UPDATE_PROFILE_RESET"}),ke(function(){var e=Object(L.a)(A().mark((function e(t,a){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"USER_DETAILS_REQUEST"}),e.next=4,T.get("/user/getUserProfile");case 4:n=e.sent,r=n.result,t({type:"USER_DETAILS_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"USER_DETAILS_FAIL",payload:e.t0.msg});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}());else t.push("/login")}),[ke,t,De,Ae,Ue]);return Object(n.useEffect)((function(){var e=null;return Ve&&Qe>0?e=setInterval((function(){ze((function(e){return e-1}))}),1e3):0===Qe&&Je(!1),function(){return clearInterval(e)}}),[Ve,Qe]),r.a.createElement(q.a,null,r.a.createElement(P.a,{md:6},r.a.createElement("h2",null,"User Profile"),H&&r.a.createElement(Z,{variant:"danger"},H),Ue&&r.a.createElement(Z,{variant:"success"},"Profile Updated"),qe&&r.a.createElement(Z,{variant:"danger"},qe),xe?r.a.createElement(te,null):Te?r.a.createElement(Z,{variant:"danger"},Te):r.a.createElement(V.a,{onSubmit:function(e){if(e.preventDefault(),j!==x)F("Passwords do not match");else{if("Parent"===f){if(S)if(!S.split(";").every((function(e){return/\S+@\S+\.\S+/.test(e)})))return void F("Dependent email format error");if(!Q)return void F("Phone is required")}if("Student"===f){if(!ve)return void F("School is required");if(!Se)return void F("Grade is required")}if(j&&!Ke)return void F("Current password is required");if(!Ge)return void F("Code is required");ke(function(e){return function(){var t=Object(L.a)(A().mark((function t(a,n){var r,c;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_UPDATE_PROFILE_REQUEST"}),t.next=4,T.post("/user/updateUserProfile",e);case 4:r=t.sent,c=r.result,localStorage.setItem("userInfo",JSON.stringify(c)),document.location.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"USER_UPDATE_PROFILE_FAIL",payload:t.t0.msg});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}({id:Ae._id,name:l,email:m,password:j,role:f,dependent:S.trim(),currentPassword:Ke,code:Number(Ge),phone:Q,address:J,city:ee,state:ce,country:se,zip:he,school:ve,gradeInSchoolYear:Se}))}}},r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter name",value:l,onChange:function(e){return i(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"email"},r.a.createElement(V.a.Label,null,"Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter email",value:m,disabled:"Parent"===De.role||"Student"===De.role,onChange:function(e){return d(e.target.value.toLocaleLowerCase())},style:{width:"calc(100% - 82px)",display:"inline-block"}}),r.a.createElement(w.a,{variant:"primary",onClick:function(){Je(!0),ze(60),T.post("/login/sendEmail",{email:m}).catch((function(e){F(e.msg)}))},disabled:Ve,style:{height:"45px",width:"82px"}},Ve?"".concat(Qe,"s"):"Send")),r.a.createElement(V.a.Group,{controlId:"code"},r.a.createElement(V.a.Label,null,"Enter Verification Code from Your Email"),r.a.createElement(V.a.Control,{placeholder:"Enter verification code",value:Ge,onChange:function(e){return Fe(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"Role"},r.a.createElement(V.a.Label,null,"Role is(Please contact admin to change your role): ".concat(f)),r.a.createElement("div",null,b.map((function(e){return r.a.createElement(V.a.Check,{type:"radio",id:"role-".concat(e),label:e,checked:e===f,onChange:function(){return p(e)},disabled:!0})})))),r.a.createElement(V.a.Group,{controlId:"dependent"},r.a.createElement(V.a.Label,null,"Student"===f?"Parent":"Student"," email:"),r.a.createElement(V.a.Control,{type:"name",placeholder:"When multiple dependents, use semicolons to seperate",value:S,onChange:function(e){return C(e.target.value)}})),"Parent"===f&&r.a.createElement(V.a.Group,{controlId:"phone"},r.a.createElement(V.a.Label,null,"Phone Number"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter phone number, e.g. 617-111-1111",value:Q,maxLength:12,onChange:function(e){return function(e){var t=e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3");z(t)}(e.target.value)}})),"Parent"===f&&r.a.createElement("div",null,r.a.createElement(V.a.Group,{controlId:"address"},r.a.createElement(V.a.Label,null,"Street Address"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter address",value:J,onChange:function(e){return X(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"city"},r.a.createElement(V.a.Label,null,"City"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter city",value:ee,onChange:function(e){return ae(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"state"},r.a.createElement(V.a.Label,null,"State / Province"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter state / province",value:ce,onChange:function(e){return le(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"country"},r.a.createElement(V.a.Label,null,"Country"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter country",value:se,onChange:function(e){return ue(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"zip"},r.a.createElement(V.a.Label,null,"Zip"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter zip",value:he,onChange:function(e){return Ee(e.target.value)}}))),"Student"===f&&r.a.createElement("div",null,r.a.createElement(V.a.Group,{controlId:"school"},r.a.createElement(V.a.Label,null,"School Name"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter school",value:ve,onChange:function(e){return be(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"gradeInSchoolYear"},r.a.createElement(V.a.Label,null,"Grade in school year"),r.a.createElement(V.a.Control,{as:"select",defaultValue:_e,onChange:function(e){return t=e.target.value,Ce(t),void je(t);var t},custom:!0},Ie.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))),r.a.createElement(V.a.Group,{controlId:"currentPassword"},r.a.createElement(V.a.Label,null,"Current Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter current password",value:Ke,onChange:function(e){return Ze(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"password"},r.a.createElement(V.a.Label,null,"Create Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter password",value:j,onChange:function(e){return I(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"confirmPassword"},r.a.createElement(V.a.Label,null,"Confirm Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Confirm password",value:x,onChange:function(e){return D(e.target.value)}})),r.a.createElement(w.a,{type:"submit",variant:"primary"},"Update Profile"))))},me=a(949),de=a(955),he=function(e){var t=e.history,a=Object(o.b)(),c=Object(o.c)((function(e){return e.userList})),l=c.loading,i=c.error,s=c.users,u=Object(o.c)((function(e){return e.userLogin})).userInfo,m=Object(o.c)((function(e){return e.userDelete})).success,d=Object(n.useState)(""),h=Object(G.a)(d,2),E=h[0],f=h[1],p=Object(n.useState)(!1),v=Object(G.a)(p,2),g=v[0],y=v[1],S=Object(n.useState)(""),C=Object(G.a)(S,2),O=C[0],_=C[1],I=Object(n.useState)(""),k=Object(G.a)(I,2),N=k[0],x=k[1],D=Object(n.useState)(""),U=Object(G.a)(D,2),H=U[0],F=U[1],M=Object(n.useState)(""),B=Object(G.a)(M,2),Q=B[0],z=B[1],W=Object(n.useState)("Student"),Y=Object(G.a)(W,2),J=Y[0],X=Y[1],$=Object(n.useState)(""),K=Object(G.a)($,2),ee=K[0],ae=K[1];Object(n.useEffect)((function(){u&&u.isAdmin?a(R()):t.push("/login")}),[a,t,m,u]);var ne=function(e){window.confirm("Are you sure")&&a(function(e){return function(){var t=Object(L.a)(A().mark((function t(a,n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_DELETE_REQUEST"}),t.next=4,T.post("/admin/deleteUser",{id:e});case 4:a({type:"USER_DELETE_SUCCESS"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"USER_DELETE_FAIL",payload:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))},re=function(){a(R(E))},ce=function(){y(!1),_(""),x(""),F(""),z(""),X("Student"),ae("")};return r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Users")),r.a.createElement(P.a,{className:"text-right"},r.a.createElement(w.a,{className:"my-3",onClick:function(){y(!0)}},r.a.createElement("i",{className:"fas fa-plus"})," Create User"))),l?r.a.createElement(te,null):i?r.a.createElement(Z,{variant:"danger"},i):r.a.createElement("div",null,r.a.createElement(V.a,{inline:!0,style:{marginBottom:"10px"}},r.a.createElement(V.a.Group,{controlId:"search"},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"name",value:E,onChange:function(e){return f(e.target.value)},placeholder:"Search By NAME/EMAIL"}),r.a.createElement(w.a,{onClick:re,variant:"outline-success"},"Search"))),r.a.createElement(w.a,{onClick:re},"Search"),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"EMAIL"),r.a.createElement("th",null,"Role"),r.a.createElement("th",{width:"300"},"Dependent"),r.a.createElement("th",null))),r.a.createElement("tbody",null,s.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("a",{href:"mailto:".concat(e.email)},e.email)),r.a.createElement("td",null,e.role),r.a.createElement("td",null,e.dependent),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/admin/user/".concat(e._id,"/edit")},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},r.a.createElement("i",{className:"fas fa-edit"},"Edit"))),r.a.createElement(w.a,{variant:"danger",className:"btn-sm",onClick:function(){return ne(e._id)}},r.a.createElement("i",{className:"fas fa-trash"},"Delete"))))}))))),r.a.createElement(de.a,{show:g,onHide:ce},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Create User")),r.a.createElement(de.a.Body,null,ee&&r.a.createElement(Z,{variant:"danger"},ee),r.a.createElement(V.a,null,r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter name",value:O,onChange:function(e){return _(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"email"},r.a.createElement(V.a.Label,null,"Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter email",value:N,onChange:function(e){return x(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"Role"},r.a.createElement(V.a.Label,null,"Role is: ".concat(J)),r.a.createElement(V.a.Control,{as:"select",defaultValue:J,onChange:function(e){return X(e.target.value)},custom:!0},r.a.createElement("option",null,J),r.a.createElement("option",{value:"Student"},"Student"),r.a.createElement("option",{value:"Parent"},"Parent"),r.a.createElement("option",{value:"Teacher"},"Teacher"))),r.a.createElement(V.a.Group,{controlId:"password"},r.a.createElement(V.a.Label,null,"Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter password",value:H,onChange:function(e){return F(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"confirmPassword"},r.a.createElement(V.a.Label,null,"Confirm Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Confirm password",value:Q,onChange:function(e){return z(e.target.value)}})))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:ce},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){if(N)if(/\S+@\S+\.\S+/.test(N))if(H===Q){var e={name:O,email:N,password:H,role:J};T.post("/admin/createUser",e).then((function(e){a(R()),ce()})).catch((function(e){ae(e.msg)}))}else ae("Passwords do not match");else ae("Email address is invalid");else ae("Email is required")}},"Create"))))},Ee=function(e){var t=e.match,a=e.history,c=t.params.id,l=Object(n.useState)(""),o=Object(G.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(""),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(!1),f=Object(G.a)(E,2),p=f[0],g=f[1],y=Object(n.useState)(""),S=Object(G.a)(y,2),C=S[0],O=S[1],_=Object(n.useState)(""),j=Object(G.a)(_,2),L=j[0],I=j[1],k=Object(n.useState)(""),N=Object(G.a)(k,2),x=N[0],A=N[1],D=Object(n.useState)(""),R=Object(G.a)(D,2),U=R[0],q=R[1],P=Object(n.useState)(!1),H=Object(G.a)(P,2),F=H[0],M=H[1],B=Object(n.useState)(""),Q=Object(G.a)(B,2),z=Q[0],W=Q[1];return Object(n.useEffect)((function(){T.get("/admin/getUserById",{params:{id:c}}).then((function(e){var t=e.result;s(t.name),h(t.email),g(t.isAdmin),O(t.role),I(t.dependent)}))}),[]),r.a.createElement(b.a,null,r.a.createElement(v.Link,{to:"/admin/userlist",className:"btn btn-light my-3"},"Go Back"),r.a.createElement(ie,null,r.a.createElement("h1",null,"Edit User"),z&&r.a.createElement(Z,{variant:"danger"},z),r.a.createElement(V.a,{onSubmit:function(e){if((e.preventDefault(),"Parent"===C&&L)&&!L.split(";").every((function(e){return/\S+@\S+\.\S+/.test(e)})))return console.log("Dependent email format error"),void W("Dependent email format error");x&&x!==U?W("Passwords do not match"):(W(""),M(!0),T.post("/admin/updateUser",{_id:c,name:i,email:d,isAdmin:p,password:x,role:C,dependent:L.trim()}).then((function(e){a.push("/admin/userlist"),M(!1)})).catch((function(e){W(e.msg),M(!1)})))}},r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter name",value:i,onChange:function(e){return s(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"email"},r.a.createElement(V.a.Label,null,"Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter email",value:d,onChange:function(e){return h(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"isadmin"},r.a.createElement(V.a.Check,{type:"checkbox",label:"Is Admin",checked:p,onChange:function(e){return g(e.target.checked)}})),r.a.createElement(V.a.Group,{controlId:"Role"},r.a.createElement(V.a.Label,null,"Role is: ".concat(C)),r.a.createElement(V.a.Control,{as:"select",defaultValue:C,onChange:function(e){return O(e.target.value)},custom:!0},r.a.createElement("option",null,C),r.a.createElement("option",{value:"Student"},"Student"),r.a.createElement("option",{value:"Parent"},"Parent"),r.a.createElement("option",{value:"Teacher"},"Teacher"))),r.a.createElement(V.a.Group,{controlId:"dependent"},r.a.createElement(V.a.Label,null,"Dependent (Parent or Student) email:"),r.a.createElement(V.a.Control,{type:"name",placeholder:"When multiple dependents, use semicolons to seperate",value:L,onChange:function(e){return I(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"password"},r.a.createElement(V.a.Label,null,"Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter password",value:x,onChange:function(e){return A(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"confirmPassword"},r.a.createElement(V.a.Label,null,"Confirm Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Confirm password",value:U,onChange:function(e){return q(e.target.value)}})),r.a.createElement(w.a,{type:"submit",variant:"primary"},F?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Update"))))};function fe(){fe=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var pe=function(e){e.location;var t=e.history,a=Object(o.b)(),c=Object(o.c)((function(e){return e.userLogin})).userInfo,l=Object(o.c)((function(e){return e.myClassList})),i=l.loading,s=l.error,u=l.myClasses;return Object(n.useEffect)((function(){c?a(function(){var e=Object(L.a)(fe().mark((function e(t,a){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"MY_CLASS_LIST_REQUEST"}),e.next=4,T.get("/user/getMyClasses");case 4:n=e.sent,r=n.result,t({type:"MY_CLASS_LIST_SUCCESS",payload:r.list}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"MY_CLASS_LIST_FAIL",payload:e.t0.msg});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()):t.push("/login")}),[a,t,c]),r.a.createElement(q.a,null,r.a.createElement("h2",null,"My Classes"),i?r.a.createElement(te,null):s?r.a.createElement(Z,{variant:"danger"},s):r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"Expired Time"),r.a.createElement("th",null))),r.a.createElement("tbody",null,u.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.classInfo.name),r.a.createElement("td",null,function(e){var t=e.classInfo,a=e.expirationDate,n=t.classID,r=n.includeLibrary,c=n.endDate;return r?new Date(a).toLocaleString():new Date(Math.max(new Date(c),new Date(a))).toLocaleString()}(e)),r.a.createElement("td",null,r.a.createElement(w.a,{variant:"info",className:"btn-sm",onClick:function(){return a=e.classInfo.classID._id,void t.push("/myHomework/".concat(a));var a}},"start learning")))})))))};function ve(){ve=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var be=function(e){var t=e.match,a=e.history,c=t.params.id,l=Object(n.useState)(""),i=Object(G.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(0),d=Object(G.a)(m,2),h=d[0],E=d[1],f=Object(n.useState)(""),p=Object(G.a)(f,2),g=p[0],y=p[1],S=Object(n.useState)(""),C=Object(G.a)(S,2),O=C[0],_=C[1],j=Object(n.useState)(""),I=Object(G.a)(j,2),N=I[0],x=I[1],T=Object(n.useState)(0),A=Object(G.a)(T,2),R=A[0],U=A[1],q=Object(n.useState)(""),P=Object(G.a)(q,2),H=P[0],F=P[1],M=Object(n.useState)(!1),B=Object(G.a)(M,2),Q=B[0],z=B[1],W=Object(o.b)(),Y=Object(o.c)((function(e){return e.productDetails})),J=Y.loading,X=Y.error,$=Y.product,K=Object(o.c)((function(e){return e.productUpdate})),ee=K.loading,ae=K.error,ne=K.success;Object(n.useEffect)((function(){ne?(W({type:"PRODUCT_UPDATE_RESET"}),a.push("/admin/productlist")):$.name&&$._id===c?(u($.name),E($.price),y($.image),_($.brand),x($.category),U($.countInStock),F($.description)):W(le(c))}),[W,a,c,$,ne]);var re=function(){var e=Object(L.a)(ve().mark((function e(t){var a,n,r,c,l;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(n=new FormData).append("image",a),z(!0),e.prev=4,r={headers:{"Content-Type":"multipart/form-data"}},e.next=8,k.a.post("/api/upload",n,r);case 8:c=e.sent,l=c.data,y(l),z(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0),z(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(b.a,null,r.a.createElement(v.Link,{to:"/admin/productlist",className:"btn btn-light my-3"},"Go Back"),r.a.createElement(ie,null,r.a.createElement("h1",null,"Edit Product"),ee&&r.a.createElement(te,null),ae&&r.a.createElement(Z,{variant:"danger"},ae),J?r.a.createElement(te,null):X?r.a.createElement(Z,{variant:"danger"},X):r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),W(function(e){return function(){var t=Object(L.a)(ce().mark((function t(a,n){var r,c,l,o,i,s;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"PRODUCT_UPDATE_REQUEST"}),r=n(),c=r.userLogin.userInfo,l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,k.a.put("/api/products/".concat(e._id),e,l);case 6:o=t.sent,i=o.data,a({type:"PRODUCT_UPDATE_SUCCESS",payload:i}),a({type:"PRODUCT_DETAILS_SUCCESS",payload:i}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),"Not authorized, token failed"===(s=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(D()),a({type:"PRODUCT_UPDATE_FAIL",payload:s});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()}({_id:c,name:s,price:h,image:g,brand:O,category:N,description:H,countInStock:R}))}},r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter name",value:s,onChange:function(e){return u(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"price"},r.a.createElement(V.a.Label,null,"Price"),r.a.createElement(V.a.Control,{type:"number",placeholder:"Enter price",value:h,onChange:function(e){return E(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"image"},r.a.createElement(V.a.Label,null,"Image"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter image url",value:g,onChange:function(e){return y(e.target.value)}}),r.a.createElement(V.a.File,{id:"image-file",label:"Choose File",custom:!0,onChange:re}),Q&&r.a.createElement(te,null)),r.a.createElement(V.a.Group,{controlId:"brand"},r.a.createElement(V.a.Label,null,"Brand"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter brand",value:O,onChange:function(e){return _(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"countInStock"},r.a.createElement(V.a.Label,null,"Count In Stock"),r.a.createElement(V.a.Control,{type:"number",placeholder:"Enter countInStock",value:R,onChange:function(e){return U(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"category"},r.a.createElement(V.a.Label,null,"Category"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter category",value:N,onChange:function(e){return x(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"description"},r.a.createElement(V.a.Label,null,"Description"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter description",value:H,onChange:function(e){return F(e.target.value)}})),r.a.createElement(w.a,{type:"submit",variant:"primary"},"Update"))))};function ge(){ge=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var ye=function(e){return function(){var t=Object(L.a)(ge().mark((function t(a,n){var r,c;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLASS_LIST_FOR_TEACHER_REQUEST"}),t.next=4,T.get("/teacher/getClassesByTeacher",{params:{name:e,language:window.localStorage.getItem("lang")||"en"}});case 4:r=t.sent,c=r.result,a({type:"CLASS_LIST_FOR_TEACHER_SUCCESS",payload:c.list}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"CLASS_LIST_FOR_TEACHER_FAIL",payload:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()},Se=function(e){return function(){var t=Object(L.a)(ge().mark((function t(a){var n,r;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLASS_DETAILS_REQUEST"}),t.next=4,T.get("/public/getClassById?id=".concat(e));case 4:n=t.sent,r=n.result,a({type:"CLASS_DETAILS_SUCCESS",payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"CLASS_DETAILS_FAIL",payload:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Ce={0:"gray",1:"#FFE7A0",2:"red"},we=function(e){var t=e.history,a=(e.match,Object(o.b)()),c=Object(o.c)((function(e){return e.userLogin})).userInfo,l="Teacher"===c.role,i=Object(o.c)((function(e){return e.classListForT})),s=i.loading,u=i.error,m=i.classes,d=Object(o.c)((function(e){return e.classCreateByT})),h=d.loading,E=d.error,f=d.success,p=d.tclass,v=Object(o.c)((function(e){return e.classDeleteByT})),g=v.loading,y=v.error,S=v.success,C=Object(n.useState)(""),O=Object(G.a)(C,2),_=O[0],I=O[1];Object(n.useEffect)((function(){a({type:"CLASS_CREATE_RESET"}),c&&l||t.push("/login"),f?t.push("/teach/class/".concat(p._id,"/edit")):a(ye())}),[a,t,c,f,S,p,l]);var k=function(e){window.confirm("Are you sure")&&a(function(e){return function(){var t=Object(L.a)(ge().mark((function t(a,n){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLASS_DELETE_REQUEST"}),t.next=4,T.post("/teacher/deleteClassByTeacher",{id:e});case 4:a({type:"CLASS_DELETE_SUCCESS"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"CLASS_DELETE_FAIL",payload:t.t0.msg});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"My Classes ")),r.a.createElement(P.a,{className:"text-right"},r.a.createElement(w.a,{className:"my-3",onClick:function(){a(function(){var e=Object(L.a)(ge().mark((function e(t,a){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"CLASS_CREATE_REQUEST"}),e.next=4,T.post("/teacher/createClassByTeacher",{language:window.localStorage.getItem("lang")||"en"});case 4:n=e.sent,r=n.result,t({type:"CLASS_CREATE_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"CLASS_CREATE_FAIL",payload:e.t0.msg});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}())}},r.a.createElement("i",{className:"fas fa-plus"})," Create New Class"))),g&&r.a.createElement(te,null),y&&r.a.createElement(Z,{variant:"danger"},y),h&&r.a.createElement(te,null),E&&r.a.createElement(Z,{variant:"danger"},E),s?r.a.createElement(te,null):u?r.a.createElement(Z,{variant:"danger"},u):r.a.createElement(b.a,null,r.a.createElement(V.a,{inline:!0,style:{marginBottom:"10px"}},r.a.createElement(V.a.Group,{controlId:"search"},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"name",value:_,onChange:function(e){return I(e.target.value)},placeholder:"Search By NAME"}),r.a.createElement(w.a,{onClick:function(){a(ye(_))},variant:"outline-success"},"Search"))),m.length>0?r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"PRICE"),r.a.createElement("th",null,"CATEGORY"),r.a.createElement("th",null,"Start "),r.a.createElement("th",null,"End "),r.a.createElement("th",null,"Add"),r.a.createElement("th",null))),r.a.createElement("tbody",null,m.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,"$",e.price),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.startDate.split("T")[0]),r.a.createElement("td",null,e.endDate.split("T")[0]),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/teach/class/".concat(e._id,"/addStudent")},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},"Students")),r.a.createElement(j.LinkContainer,{to:"/teach/class/".concat(e._id,"/addContent")},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},"Content"))),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/teach/class/".concat(e._id,"/edit")},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement(w.a,{variant:"light",className:"btn-sm",onClick:function(){return t=e._id,n=e.isPublish,void T.post("/teacher/setPublishClass",{id:t,publish:0===n?1:0}).then((function(e){a(ye())}));var t,n}},r.a.createElement("i",{className:"fas fa-fire",style:{color:Ce[e.isPublish]}})),r.a.createElement(w.a,{variant:"light",className:"btn-sm",onClick:function(){return t=e._id,void T.post("/teacher/copyClass",{id:t}).then((function(e){a(ye())}));var t}},r.a.createElement("i",{className:"fas fa-copy"})),r.a.createElement(w.a,{variant:"danger",className:"btn-sm",onClick:function(){return k(e._id)}},r.a.createElement("i",{className:"fas fa-trash"}))))})))):r.a.createElement(Z,{variant:"info"},"No class found, change language or search again")))},Oe=a(958),_e=a(962),je=a(34),Le=a(135),Ie=a(47),ke=a(48),Ne=function(){function e(){Object(Ie.a)(this,e),this.title="Upload File",this.iconSvg='<svg t="1684136047021" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2626" width="200" height="200"><path d="M896.28125 138.21875h-217.5c-11.53125 0-22.03125 7.5-26.71875 19.125l-28.875 44.15625c-3.84375 9.375-12.28125 15.46875-21.65625 15.46875H127.71875c-19.59375 0-35.71875 17.8125-35.71875 39.5625v589.78125c0 21.75 16.03125 39.5625 35.71875 39.5625H896.375c19.59375 0 35.71875-17.8125 35.71875-39.5625V177.78125c-0.09375-21.75-16.125-39.5625-35.8125-39.5625zM628.53125 551.9375c-12.84375 14.15625-33.75 14.15625-46.59375 0l-37.03125-40.96875v217.5h-65.8125v-217.5l-37.03125 40.96875c-12.84375 14.15625-33.75 14.15625-46.59375 0s-12.84375-37.40625 0-51.65625L512 362.1875l116.53125 138.09375c12.84375 14.15625 12.84375 37.40625 0 51.65625z" p-id="2627"></path></svg>',this.tag="button",this.showDropPanel=!0,this.editor=null;var t=document.createElement("input");t.type="file",t.name="file",t.id="file",this.elm=t,this.elm.addEventListener("change",this.uploadFile.bind(this))}return Object(ke.a)(e,[{key:"isActive",value:function(e){return!1}},{key:"getValue",value:function(e){return""}},{key:"isDisabled",value:function(e){return!1}},{key:"exec",value:function(e,t){}},{key:"getPanelContentElem",value:function(e){return this.editor=e,this.elm}},{key:"uploadFile",value:function(e){var t=this,a=e.target.files[0],n=new FormData;n.append("file",a),T.post("/file/upload",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var n=e.result.path;t.editor.dangerouslyInsertHtml('<p><a href="'.concat(window.location.origin,"/uploads/").concat(n,'" target="_blank">').concat(a.name,"</a></p>"))})).finally((function(){t.elm.value=""}))}}]),e}(),xe={key:"upload-file-menu",factory:function(){return new Ne}},Te=function(){function e(t){Object(Ie.a)(this,e),this.editor=t,this.isDrawing=!1,this.isErasing=!1,this.undoStack=[],this.redoStack=[],this.brushSize=3,this.brushColor="black",this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.initialX=0,this.initialY=0,this.isMobile?(this.width=window.innerWidth-100,this.height=window.innerHeight-126):(this.width=800,this.height=800),this.startDrawing=this.startDrawing.bind(this),this.draw=this.draw.bind(this),this.stopDrawing=this.stopDrawing.bind(this),this.keydown=this.keydown.bind(this),this.changeBrushSize=this.changeBrushSize.bind(this),this.changeBrushColor=this.changeBrushColor.bind(this),this.destroy=this.destroy.bind(this),this.undo=this.undo.bind(this),this.redo=this.redo.bind(this),this.downloadImage=this.downloadImage.bind(this),this.uploadImage=this.uploadImage.bind(this),this.convertCanvasToFile=this.convertCanvasToFile.bind(this),this.setEraserStatus=this.setEraserStatus.bind(this),this.modalMoveStart=this.modalMoveStart.bind(this),this.modalMoveEnd=this.modalMoveEnd.bind(this),this.modalMove=this.modalMove.bind(this),this.init()}return Object(ke.a)(e,[{key:"init",value:function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#fff",this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.root=document.createElement("div"),this.modal=document.createElement("div"),this.modal.classList.add("editor-board-modal");var e=document.createElement("div");e.classList.add("editor-board-modal-mask"),this.container=document.createElement("div"),this.container.classList.add("editor-board-container"),this.isMobile?this.container.style.top="0":this.container.style.top="20px",this.container.style.width="".concat(this.canvas.width,"px"),this.container.style.left="".concat((window.innerWidth-this.canvas.width)/2,"px"),this.header=document.createElement("div"),this.header.classList.add("editor-board-header"),this.header.innerText="Drawing Board",this.cancelBtn=document.createElement("div"),this.cancelBtn.classList.add("editor-board-cancel");var t=document.createElement("div");t.classList.add("editor-board-footer");var a=document.createElement("div");a.classList.add("editor-board-setting"),this.brushSizeInput=document.createElement("input"),this.brushSizeInput.classList.add("editor-board-brush-size"),this.brushSizeInput.type="range",this.brushSizeInput.min=1,this.brushSizeInput.max=10,this.brushSizeInput.value=this.brushSize,this.brushColorInput=document.createElement("input"),this.brushColorInput.classList.add("editor-board-brush-color"),this.brushColorInput.type="color",this.brushColorInput.value=this.brushColor,this.eraserBtn=document.createElement("i"),this.eraserBtn.classList.add("fas","fa-eraser","editor-board-eraser");var n=document.createElement("div");n.classList.add("editor-board-btns"),this.undoBtn=document.createElement("div"),this.undoBtn.classList.add("editor-board-undo"),this.redoBtn=document.createElement("div"),this.redoBtn.classList.add("editor-board-redo"),this.downloadBtn=document.createElement("div"),this.downloadBtn.classList.add("editor-board-download","btn","btn-info","btn-sm"),this.downloadBtn.innerText="Download",this.uploadBtn=document.createElement("div"),this.uploadBtn.classList.add("editor-board-upload","btn","btn-primary","btn-sm"),this.uploadBtn.innerText="Upload",this.unloadInput=document.createElement("input"),this.unloadInput.classList.add("editor-board-upload-input"),this.unloadInput.type="file",this.unloadInput.accept="image/*",this.uploadBtn.appendChild(this.unloadInput),this.submitBtn=document.createElement("div"),this.submitBtn.classList.add("editor-board-submit","btn","btn-primary","btn-sm"),this.submitBtn.innerText="Submit",this.root.appendChild(e),this.root.appendChild(this.modal),this.modal.appendChild(this.container),this.container.appendChild(this.header),this.container.appendChild(this.canvas),this.container.appendChild(t),this.header.appendChild(this.cancelBtn),a.appendChild(this.brushSizeInput),a.appendChild(this.brushColorInput),a.appendChild(this.eraserBtn),n.appendChild(this.undoBtn),n.appendChild(this.redoBtn),n.appendChild(this.uploadBtn),n.appendChild(this.downloadBtn),n.appendChild(this.submitBtn),t.appendChild(a),t.appendChild(n),document.body.appendChild(this.root),this.undoStack.push(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)),this.bind()}},{key:"startDrawing",value:function(e){var t,a;this.isDrawing=!0,this.ctx.beginPath();var n=this.container.offsetLeft,r=this.container.offsetTop+60;e.touches?(t=e.touches[0].clientX-n,a=e.touches[0].clientY+this.modal.scrollTop-r):(t=e.clientX-n,a=e.clientY+this.modal.scrollTop-r),this.ctx.moveTo(t,a)}},{key:"draw",value:function(e){if(e.preventDefault(),this.isDrawing){var t,a,n=this.container.offsetLeft,r=this.container.offsetTop+60;e.touches?(t=e.touches[0].clientX-n,a=e.touches[0].clientY+this.modal.scrollTop-r):(t=e.clientX-n,a=e.clientY+this.modal.scrollTop-r),this.isErasing?(this.ctx.beginPath(),this.ctx.fillStyle="#ffffff",this.ctx.arc(t,a,2*this.brushSize,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()):(this.ctx.lineTo(t,a),this.ctx.lineWidth=this.brushSize,this.ctx.strokeStyle=this.brushColor,this.ctx.stroke())}}},{key:"stopDrawing",value:function(){this.isDrawing&&(this.isDrawing=!1,this.undoStack.push(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)),this.redoStack=[])}},{key:"undo",value:function(){this.undoStack.length>1&&(this.redoStack.push(this.undoStack.pop()),this.ctx.putImageData(this.undoStack[this.undoStack.length-1],0,0))}},{key:"redo",value:function(){this.redoStack.length>0&&(this.undoStack.push(this.redoStack.pop()),this.ctx.putImageData(this.undoStack[this.undoStack.length-1],0,0))}},{key:"keydown",value:function(e){(e.ctrlKey||e.metaKey)&&(90===e.keyCode&&this.undo(),89===e.keyCode&&this.redo())}},{key:"changeBrushSize",value:function(e){this.brushSize=e.target.value}},{key:"changeBrushColor",value:function(e){this.brushColor=e.target.value}},{key:"downloadImage",value:function(){var e=this.canvas.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="board.png",t.click()}},{key:"uploadFile",value:function(e){var t=this,a=new FormData;a.append("file",e),T.post("/file/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var a=e.result.path,n={type:"paragraph",children:[{type:"image",src:"".concat(window.location.origin,"/uploads/").concat(a),children:[{text:""}]}]};t.editor.insertNode(n),t.destroy()}))}},{key:"convertCanvasToFile",value:function(){var e=this;this.canvas.toBlob((function(t){var a=new File([t],"board.png",{type:"image/png"});e.uploadFile(a)}))}},{key:"setEraserStatus",value:function(){this.isErasing?(this.isErasing=!1,this.eraserBtn.classList.remove("active"),this.canvas.style.cursor="crosshair"):(this.isErasing=!0,this.eraserBtn.classList.add("active"),this.canvas.style.cursor="url(/eraser.png) 10 20, auto")}},{key:"uploadImage",value:function(e){var t=this,a=e.target.files[0],n=new Image;n.onload=function(){var e=t.canvas.width/n.width,a=n.height*e;t.isMobile?(t.ctx.drawImage(n,0,0,t.canvas.width,t.canvas.height),t.undoStack.push(t.ctx.getImageData(0,0,t.canvas.width,t.canvas.height))):(t.canvas.height=a,t.ctx.drawImage(n,0,0,t.canvas.width,a),t.undoStack.push(t.ctx.getImageData(0,0,t.canvas.width,a)))};var r=new FileReader;r.onload=function(e){n.src=e.target.result},r.readAsDataURL(a),this.unloadInput.value=""}},{key:"modalMoveStart",value:function(e){this.isMoving=!0,this.initialX=e.clientX,this.initialY=e.clientY,document.addEventListener("mousemove",this.modalMove),document.addEventListener("mouseup",this.modalMoveEnd)}},{key:"modalMove",value:function(e){var t=this;if(this.isMoving){var a=e.clientX,n=e.clientY,r=a-this.initialX,c=n-this.initialY;requestAnimationFrame((function(){t.container.style.left=t.container.offsetLeft+r+"px",t.container.style.top=t.container.offsetTop+c+"px"})),this.initialX=a,this.initialY=n}}},{key:"modalMoveEnd",value:function(){this.isMoving=!1,document.removeEventListener("mousemove",this.modalMove),document.removeEventListener("mouseup",this.modalMoveEnd)}},{key:"bind",value:function(){this.canvas.addEventListener("mousedown",this.startDrawing),this.canvas.addEventListener("mousemove",this.draw),this.canvas.addEventListener("mouseup",this.stopDrawing),this.canvas.addEventListener("touchstart",this.startDrawing),this.canvas.addEventListener("touchmove",this.draw),this.canvas.addEventListener("touchend",this.stopDrawing),document.addEventListener("keydown",this.keydown),this.brushSizeInput.addEventListener("change",this.changeBrushSize),this.brushColorInput.addEventListener("change",this.changeBrushColor),this.cancelBtn.addEventListener("click",this.destroy),this.undoBtn.addEventListener("click",this.undo),this.redoBtn.addEventListener("click",this.redo),this.downloadBtn.addEventListener("click",this.downloadImage),this.unloadInput.addEventListener("change",this.uploadImage),this.submitBtn.addEventListener("click",this.convertCanvasToFile),this.eraserBtn.addEventListener("click",this.setEraserStatus),this.header.addEventListener("mousedown",this.modalMoveStart),document.body.style.overflow="hidden"}},{key:"destroy",value:function(){this.canvas.removeEventListener("mousedown",this.startDrawing),this.canvas.removeEventListener("mousemove",this.draw),this.canvas.removeEventListener("mouseup",this.stopDrawing),this.canvas.removeEventListener("touchstart",this.startDrawing),this.canvas.removeEventListener("touchmove",this.draw),this.canvas.removeEventListener("touchend",this.stopDrawing),document.removeEventListener("keydown",this.keydown),this.brushSizeInput.removeEventListener("change",this.changeBrushSize),this.brushColorInput.removeEventListener("change",this.changeBrushColor),this.cancelBtn.removeEventListener("click",this.destroy),this.undoBtn.removeEventListener("click",this.undo),this.redoBtn.removeEventListener("click",this.redo),this.downloadBtn.removeEventListener("click",this.downloadImage),this.unloadInput.removeEventListener("change",this.uploadImage),this.submitBtn.removeEventListener("click",this.convertCanvasToFile),this.eraserBtn.removeEventListener("click",this.setEraserStatus),this.header.removeEventListener("mousedown",this.modalMoveStart),this.root.remove(),document.body.style.overflow="auto"}}]),e}(),Ae=function(){function e(){Object(Ie.a)(this,e),this.title="Drawing Board",this.iconSvg='<svg t="1685769777516" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2686" width="200" height="200"><path d="M278.4 651.52c-46.464 80.512-8.96 352 1.024 334.848 80.512-139.52 204.16-34.816 290.432-166.528 46.464-80.512 18.944-183.424-61.568-229.76-80.512-46.592-183.424-19.072-229.888 61.44z" fill="#333333" p-id="2687"></path><path d="M528 555.648c-46.08-26.624-99.456-28.8-145.408-10.88L723.2 69.376c15.744-21.12 45.952-26.624 70.016-12.672 22.912 13.184 33.536 40.064 25.216 63.744L608 665.088c-9.856-44.416-37.504-84.864-80-109.44z" fill="#333333" p-id="2688"></path></svg>',this.tag="button",this.editor=null}return Object(ke.a)(e,[{key:"isActive",value:function(e){return!1}},{key:"getValue",value:function(e){return""}},{key:"isDisabled",value:function(e){return!1}},{key:"exec",value:function(e,t){this.editor=e,this.drawingBoard=new Te(e)}}]),e}(),De={key:"drawing-board-menu",factory:function(){return new Ae}};Object(Le.d)("en"),Le.a.registerMenu(xe),Le.a.registerMenu(De);var Re=function(){var e="",t=localStorage.getItem("userInfo");return t&&(e="Bearer ".concat(JSON.parse(t).token)),{placeholder:"please enter content",MENU_CONF:{uploadImage:{server:"".concat("/api/","file/upload"),fieldName:"file",headers:{Authorization:e},allowedFileTypes:["image/*"],customInsert:function(e,t){var a=e.result.path;t("".concat(window.location.origin,"/uploads/").concat(a))}},uploadVideo:{server:"".concat("/api/","file/upload"),fieldName:"file",headers:{Authorization:e},allowedFileTypes:["video/*"],meta:{type:3},customInsert:function(e,t){var a=e.result.path;t("".concat(window.location.origin,"/uploads/").concat(a))}}}}},Ue={insertKeys:{index:22,keys:["upload-file-menu","drawing-board-menu"]}},qe=a(176),Pe=a.n(qe),He=(a(319),function(e){e.history;var t=e.match.params.id,a=Object(n.useState)(""),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(0),s=Object(G.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),h=Object(G.a)(d,2),E=h[0],f=h[1],p=Object(n.useState)(""),g=Object(G.a)(p,2),y=g[0],S=g[1],C=Object(n.useState)(""),O=Object(G.a)(C,2),_=O[0],j=O[1],L=Object(n.useState)(""),I=Object(G.a)(L,2),k=I[0],N=I[1],x=Object(n.useState)(""),A=Object(G.a)(x,2),D=A[0],R=A[1],U=Object(n.useState)("en"),H=Object(G.a)(U,2),F=H[0],M=H[1],B=Object(n.useState)(null),Q=Object(G.a)(B,2),z=Q[0],Y=Q[1],J=Object(n.useState)(""),X=Object(G.a)(J,2),$=X[0],K=X[1],te=Object(n.useState)(null),ae=Object(G.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(""),le=Object(G.a)(ce,2),oe=le[0],ie=le[1],se=Object(n.useState)(""),ue=Object(G.a)(se,2),he=ue[0],Ee=ue[1],fe=Object(n.useState)(null),pe=Object(G.a)(fe,2),ve=pe[0],be=pe[1],ge=Object(n.useState)(!1),ye=Object(G.a)(ge,2),Se=ye[0],Ce=ye[1],we=Object(n.useState)(""),Le=Object(G.a)(we,2),Ie=Le[0],ke=Le[1],Ne=Object(n.useState)([]),xe=Object(G.a)(Ne,2),Te=xe[0],Ae=xe[1],De=Object(n.useState)(!1),qe=Object(G.a)(De,2),He=qe[0],Ge=qe[1],Fe=Object(n.useState)(!1),Me=Object(G.a)(Fe,2),Be=Me[0],Qe=Me[1],ze=Object(n.useState)(""),We=Object(G.a)(ze,2),Ye=We[0],Ve=We[1],Je=Object(n.useState)([]),Xe=Object(G.a)(Je,2),$e=Xe[0],Ke=Xe[1],Ze=Object(n.useState)([]),et=Object(G.a)(Ze,2),tt=et[0],at=et[1],nt=Object(n.useState)(1),rt=Object(G.a)(nt,2),ct=rt[0],lt=rt[1],ot=Object(n.useState)(10),it=Object(G.a)(ot,2),st=it[0],ut=(it[1],Object(n.useState)(0)),mt=Object(G.a)(ut,2),dt=mt[0],ht=mt[1],Et=Object(n.useState)(""),ft=Object(G.a)(Et,2),pt=ft[0],vt=ft[1],bt=Object(n.useState)(null),gt=Object(G.a)(bt,2),yt=gt[0],St=gt[1],Ct=new Date;if(k){var wt=Date.parse(k);Ct=new Date(wt)}var Ot=new Date;if(D){var _t=Date.parse(D);Ot=new Date(_t)}var jt=function(){T.get("/user/getUserSource",{params:{page:ct,keyword:Ye,pageSize:st}}).then((function(e){Ke(e.result.list),ht(e.result.total)}))},Lt=function(){Ge(!1)},It=Re();return Object(n.useEffect)((function(){return function(){null!=z&&(z.destroy(),Y(null))}}),[z]),Object(n.useEffect)((function(){return function(){null!=ne&&(ne.destroy(),re(null))}}),[ne]),Object(n.useEffect)((function(){return function(){null!=ve&&(ve.destroy(),be(null))}}),[ve]),Object(n.useEffect)((function(){T.get("/public/getClassById?id=".concat(t)).then((function(e){var t=e.result;o(t.name),m(t.price),f(t.image),S(t.category),j(t.description),N(t.startDate),R(t.endDate),M(t.language),K(t.registerLink),ie(t.introduction),Ee(t.bulletin),t.source&&(Ae(t.source),at(t.source.map((function(e){return{id:e._id,name:e.name}})))),Qe(t.includeLibrary),vt(t.paymentInfo)})),jt()}),[]),r.a.createElement(b.a,null,r.a.createElement(v.Link,{to:"/teach/classlist",className:"btn btn-light my-3"},"Go Back"),r.a.createElement(q.a,{className:"justify-content-md-center"},r.a.createElement(P.a,{md:8},r.a.createElement("h2",null," Edit Class "),Ie&&r.a.createElement(Z,{variant:"danger"},Ie),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),Ce(!0),ke(""),T.post("/teacher/updateClassIntro",{_id:t,name:l,price:u,image:E,category:y,startDate:k,description:_,endDate:D,language:F,registerLink:$,introduction:oe,bulletin:he,source:tt.map((function(e){return e.id})),includeLibrary:Be,paymentInfo:pt}).then((function(e){Ce(!1);var t=e.result;o(t.name),m(t.price),f(t.image),S(t.category),j(t.description),N(t.startDate),R(t.endDate),M(t.language),K(t.registerLink),ie(t.introduction),Ee(t.bulletin),Qe(t.includeLibrary),vt(t.paymentInfo)})).catch((function(e){Ce(!1),ke(e.msg)}))}},r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter name",value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"price"},r.a.createElement(V.a.Label,null,"Price"),r.a.createElement(V.a.Control,{type:"number",placeholder:"Enter price",value:u,onChange:function(e){return m(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"language"},r.a.createElement(V.a.Label,null,"Language"),r.a.createElement(V.a.Control,{as:"select",value:F,onChange:function(e){return M(e.target.value)}},r.a.createElement("option",null,F),r.a.createElement("option",{value:"en"},"en"),r.a.createElement("option",{value:"zh"},"zh"))),r.a.createElement(V.a.Group,{controlId:"category"},r.a.createElement(V.a.Label,null,"Category"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter category",value:y,onChange:function(e){return S(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"Start Date: "},r.a.createElement(V.a.Label,null,"Start Date:"),r.a.createElement(Pe.a,{selected:Ct,onChange:function(e){N(e)},name:"Start Date: ",timeIntervals:20,timeCaption:"time",dateFormat:"MMMM d, yyyy ",className:"form-control"})),r.a.createElement(V.a.Group,{controlId:"End Date: "},r.a.createElement(V.a.Label,null,"End Date:"),r.a.createElement(Pe.a,{selected:Ot,onChange:function(e){R(e)},name:"End Date: ",timeIntervals:20,timeCaption:"time",dateFormat:"MMMM d, yyyy ",className:"form-control"})),r.a.createElement(V.a.Group,{controlId:"Register Link"},r.a.createElement(V.a.Label,null,"Register Link"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter Register Link",value:$,onChange:function(e){return K(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"includeLibrary"},r.a.createElement(V.a.Label,null,"Include Library"),r.a.createElement(V.a.Check,{type:"switch",checked:Be,onChange:function(e){return Qe(e.target.checked)}})),r.a.createElement(V.a.Group,{controlId:"source"},r.a.createElement(V.a.Label,null,"Source"),r.a.createElement("div",{className:"form-library-control",onClick:function(){Ge(!0)}},Te.map((function(e,t){return r.a.createElement("div",{key:t},e.name)})))),r.a.createElement(V.a.Group,{controlId:"introduction"},r.a.createElement(V.a.Label,null,"Introduction"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:ne,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:It,value:oe,onCreated:re,onChange:function(e){return ie(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"description"},r.a.createElement(V.a.Label,null,"Description"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:z,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:It,value:_,onCreated:Y,onChange:function(e){return j(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"bulletin"},r.a.createElement(V.a.Label,null,"Bulletin"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:ve,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:It,value:he,onCreated:be,onChange:function(e){return Ee(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"paymentInfo"},r.a.createElement(V.a.Label,null,"Payment Information"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:yt,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:It,value:pt,onCreated:St,onChange:function(e){return vt(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(w.a,{type:"submit",variant:"primary",disabled:Se},Se?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Update")))),r.a.createElement(de.a,{show:He,onHide:Lt,size:"xl"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Source")),r.a.createElement(de.a.Body,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,{lg:8},r.a.createElement(V.a.Group,{controlId:"search",style:{display:"flex"}},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"keyword",value:Ye,onChange:function(e){return Ve(e.target.value)},placeholder:"Search By NAME"}),r.a.createElement(w.a,{size:"sm",onClick:function(){1===ct?jt():lt(1)},variant:"outline-success"},"Search")))),r.a.createElement("div",{className:"mb-2"},"Selected: ",tt.map((function(e){return e.name})).join("\u3001")),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"source-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:80}),r.a.createElement("th",null,"name"))),r.a.createElement("tbody",null,$e.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement(_e.a,{checked:tt.map((function(e){return e.id})).includes(e._id),onClick:function(){return function(e){tt.map((function(e){return e.id})).includes(e._id)?at(tt.filter((function(t){return t.id!==e._id}))):at([].concat(Object(W.a)(tt),[{id:e._id,name:e.name}]))}(e)}})),r.a.createElement("td",null,e.name))})))),r.a.createElement(Oe.a,{count:Math.ceil(dt/st),page:ct,onChange:function(e,t){lt(t)}})),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:Lt},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){Ge(!1),Ae(Object(W.a)(tt))},disabled:0===tt.length},"Select"))))}),Ge=function(e){var t=e.history,a=e.match,c=a.params.id,l=Object(n.useState)(""),i=Object(G.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(G.a)(m,2),h=(d[0],d[1],Object(n.useState)([])),E=Object(G.a)(h,2),f=E[0],p=E[1],y=Object(o.b)(),S=Object(o.c)((function(e){return e.classDetails})),C=(S.loading,S.error,S.tClass),O=Object(o.c)((function(e){return e.userLogin})).userInfo,_="Teacher"===O.role,I=Object(o.c)((function(e){return e.findUserByEmail})),k=Object(o.c)((function(e){return e.registerCreate})),N=Object(o.c)((function(e){return e.studentListInClass})),x=Object(o.c)((function(e){return e.removeStudentFromClass})).success,D=Object(g.c)().enqueueSnackbar,R=N.loading,U=N.error,H=(N.success,N.students),F=k.success,M=k.loading,B=k.error,Q=(k.register,I.loading),z=I.error,W=I.studentInfo,Y={};W&&(Y.name=W.name,Y.email=W.email,Y.ID=W._id);var J={};C&&(J.name=C.name,J.teacher=C.user,J.image=C.image,J.price=C.price,J.classID=C._id);var X={};W&&J&&(X.student=Y,X.classInfo=J),Object(n.useEffect)((function(){var e;O&&_?C&&C._id===c?y((e=C._id,function(){var t=Object(L.a)(fe().mark((function t(a,n){var r,c;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"STUDENT_LIST_IN_CLASS_REQUEST"}),t.next=4,T.post("/teacher/studentList",{classID:e});case 4:r=t.sent,c=r.result,a({type:"STUDENT_LIST_IN_CLASS_SUCCESS",payload:c.list}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"STUDENT_LIST_IN_CLASS_FAIL",payload:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}())):y(Se(c)):t.push("/login")}),[y,t,I,C,F,x,O,_,c]);var $=function(e,t){var a,n;window.confirm("Are you sure")&&y((a=e,n=t,function(){var e=Object(L.a)(fe().mark((function e(t,r){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REMOVE_STUDENT_FROM_CLASS_REQUEST"}),e.next=4,T.post("/teacher/removeStudentFromClass",{studentID:a,classID:n});case 4:t({type:"REMOVE_STUDENT_FROM_CLASS_SUCCESS"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"REMOVE_STUDENT_FROM_CLASS_FAIL",payload:e.t0.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()))},K=function(){T.get("/teacher/getClassRegisterList?id=".concat(a.params.id)).then((function(e){p(e.result.list)}))};return Object(n.useEffect)((function(){K()}),[]),r.a.createElement(b.a,null,r.a.createElement(v.Link,{to:"/teach/classlist",className:"btn btn-light my-3"},"Go Back"),C?r.a.createElement("h2",null,"Add Students to: ".concat(C.name)):r.a.createElement("h2",null," Add Students "),r.a.createElement(q.a,{className:"justify-content-md-center"},r.a.createElement(P.a,{md:8},Q?r.a.createElement(te,null):z?r.a.createElement(Z,{variant:"danger"},z):r.a.createElement(b.a,null),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),y(function(e){return function(){var t=Object(L.a)(A().mark((function t(a,n){var r,c;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FIND_USER_EMAIL_REQUEST"}),t.next=4,T.post("/teacher/getUserByEmail",{email:e});case 4:r=t.sent,c=r.result,a({type:"FIND_USER_EMAIL_SUCCESS",payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"FIND_USER_EMAIL_FAIL",payload:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()}(s))},inline:!0},r.a.createElement(V.a.Group,{controlId:"search"},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"q",value:s,onChange:function(e){return u(e.target.value)},placeholder:"Student Email ..."}),r.a.createElement(w.a,{type:"submit",variant:"outline-success"},"Search"))),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),y(function(e){return function(){var t=Object(L.a)(fe().mark((function t(a,n){var r,c;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"REGISTER_CREATE_REQUEST"}),t.next=4,T.post("/teacher/addStudentToClass",e);case 4:r=t.sent,c=r.result,a({type:"REGISTER_CREATE_SUCCESS",payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"REGISTER_CREATE_FAIL",payload:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()}(X)),y({type:"REGISTER_CREATE_RESET"}),y({type:"FIND_USER_EMAIL_RESET"}),u("")},inline:!0},M&&r.a.createElement(te,null),B&&r.a.createElement(Z,{variant:"danger"},B),r.a.createElement(V.a.Group,{as:q.a,controlId:"found student"},r.a.createElement(V.a.Label,{column:!0,sm:2},"Found"),r.a.createElement(P.a,{sm:6},r.a.createElement(V.a.Control,{type:"text",value:W?W.name:""})),r.a.createElement(P.a,{sm:4},r.a.createElement(w.a,{type:"submit",variant:"outline-success"},"Add")))))),r.a.createElement(q.a,null,r.a.createElement("h2",null," Number of Student in Class")),r.a.createElement(q.a,null,r.a.createElement("h4",{className:"mt-4"},"Student list"),R?r.a.createElement(te,null):U?r.a.createElement(Z,{variant:"danger"},U):r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"parent name & phone"),r.a.createElement("th",null,"parent email"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,H.map((function(e){return r.a.createElement("tr",{key:e.student.ID},r.a.createElement("td",null,e.student.name),r.a.createElement("td",null,e.student.email),r.a.createElement("td",null,e.parent&&r.a.createElement("div",null,r.a.createElement("div",null,"name: ",e.parent.name),r.a.createElement("div",null,"phone: ",e.parent.phone))),r.a.createElement("td",null,e.parent&&e.parent.email),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/teacher/exercise/".concat(e.classInfo.classID,"/").concat(e.student.ID)},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},"Exercise"))),r.a.createElement("td",null,r.a.createElement(w.a,{variant:"danger",className:"btn-sm",onClick:function(){return $(e.student.ID,e.classInfo.classID)}},r.a.createElement("i",{className:"fas fa-trash"}))))}))))),r.a.createElement(q.a,null,r.a.createElement("h4",{className:"mt-4"},"Interest List"),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Duration"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Expired Time"),r.a.createElement("th",null))),r.a.createElement("tbody",null,f.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.student&&e.student.name),r.a.createElement("td",null,e.student&&e.student.email),r.a.createElement("td",null,function(e){switch(e){case 1:return"1 month";case 2:return"1 year";default:return""}}(e.durationType)),r.a.createElement("td",null,function(e){return e.registered?"Registered":e.paid?"Pending payment confirmation":"Interested"}(e)),r.a.createElement("td",null,function(e){return e.registered?new Date(e.expirationDate).toLocaleString():""}(e)),r.a.createElement("td",null,!e.registered&&r.a.createElement(w.a,{className:"btn-sm",onClick:function(){return t=e._id,void(window.confirm("Are you sure to add this student to class?")&&T.post("/teacher/registerClass",{interestId:t}).then((function(){K(),y(Se(c)),D("Add success",{variant:"success"})})));var t}},"Add"),r.a.createElement(w.a,{variant:"danger",className:"btn-sm ml-2",onClick:function(){return t=e._id,void(window.confirm("Are you sure to delete this interest?")&&T.post("/teacher/deleteRegisterClass",{interestId:t}).then((function(){K(),D("Delete success",{variant:"success"})})));var t}},r.a.createElement("i",{className:"fas fa-trash"}))))}))))))};function Fe(){Fe=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var Me=function(e){return function(){var t=Object(L.a)(Fe().mark((function t(a,n){var r,c,l,o;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"QUESTION_LIST_FOR_TEACHER_REQUEST"}),r=n(),c=r.userLogin.userInfo,t.next=5,T.post("/teacher/getQuestionsByTeacher",{id:c._id,name:e,language:window.localStorage.getItem("lang")||"en"});case 5:l=t.sent,o=l.result,a({type:"QUESTION_LIST_FOR_TEACHER_SUCCESS",payload:o.list}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"QUESTION_LIST_FOR_TEACHER_FAIL",payload:t.t0.msg});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()};function Be(){Be=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var Qe=function(e){var t=e.history,a=(e.match,Object(o.b)()),c=Object(o.c)((function(e){return e.userLogin})).userInfo,l="Teacher"===c.role,i=Object(o.c)((function(e){return e.questionCreate})),s=i.loading,u=i.error,m=i.success,d=(i.question,Object(o.c)((function(e){return e.questionListForTeacher}))),h=d.loading,E=d.error,f=d.questions,p=Object(o.c)((function(e){return e.questionDelete})),v=p.loading,g=p.error,y=p.success,S=Object(n.useState)(""),C=Object(G.a)(S,2),O=C[0],_=C[1];Object(n.useEffect)((function(){a({type:"QUESTION_CREATE_RESET"}),c&&l?a(Me()):t.push("/login")}),[a,t,c,m,y,l]);var I=function(e){window.confirm("Are you sure")&&a(function(e){return function(){var t=Object(L.a)(Fe().mark((function t(a,n){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"QUESTION_DELETE_REQUEST"}),t.next=4,T.post("/teacher/deleteQuestion",{id:e});case 4:a({type:"QUESTION_DELETE_SUCCESS"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"QUESTION_DELETE_FAIL",payload:t.t0.msg});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))},k=function(){var e=Object(L.a)(Be().mark((function e(t){var n,r,c,l;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===(n=t.target.files[0]).type){e.next=4;break}return alert("Please upload excel file!"),e.abrupt("return");case 4:return(r=new FormData).append("file",n),r.append("type",2),e.next=9,T.post("/file/upload",r,{headers:{"Content-Type":"multipart/form-data"}});case 9:return c=e.sent,l=c.result.path,e.next=13,T.post("/teacher/batchCreateQuestion",{filePath:l,language:window.localStorage.getItem("lang")||"en"});case 13:a(Me()),document.getElementById("question-upload-file").value="";case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(b.a,null,v&&r.a.createElement(te,null),g&&r.a.createElement(Z,{variant:"danger"},g),s&&r.a.createElement(te,null),u&&r.a.createElement(Z,{variant:"danger"},u),r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"My Questions ")),r.a.createElement(P.a,{className:"text-right"},r.a.createElement(w.a,{className:"my-3",size:"sm",onClick:function(){a(function(){var e=Object(L.a)(Fe().mark((function e(t,a){var n,r;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"QUESTION_CREATE_REQUEST"}),e.next=4,T.post("/teacher/createQuestion",{language:window.localStorage.getItem("lang")||"en"});case 4:n=e.sent,r=n.result,t({type:"QUESTION_CREATE_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"QUESTION_CREATE_FAIL",payload:e.t0.msg});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}())},style:{marginRight:"6px"}},r.a.createElement("i",{className:"fas fa-plus"})," Create"),r.a.createElement(w.a,{className:"my-3",size:"sm",style:{position:"relative",marginRight:"6px"}},r.a.createElement("i",{className:"fas fa-plus"})," Batch Create",r.a.createElement("input",{type:"file",id:"question-upload-file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",style:{opacity:0,position:"absolute",left:0,top:0,width:"100%",height:"100%"},onChange:k})),r.a.createElement(w.a,{variant:"primary",size:"sm",href:"/api/question_template.xlsx"},"Download Template"))),h?r.a.createElement(te,null):E?r.a.createElement(Z,{variant:"danger"},E):r.a.createElement(b.a,null,r.a.createElement(V.a,{inline:!0,style:{marginBottom:"10px"}},r.a.createElement(V.a.Group,{controlId:"search"},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"name",value:O,onChange:function(e){return _(e.target.value)},placeholder:"Search By NAME"}),r.a.createElement(w.a,{onClick:function(){a(Me(O))},variant:"outline-success"},"Search"))),f.length>0?r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"id"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Difficuty"),r.a.createElement("th",null))),r.a.createElement("tbody",null,f.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.difficuty),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/teach/question/".concat(e._id,"/edit")},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement(w.a,{variant:"light",className:"btn-sm",onClick:function(){return t=e._id,void T.post("/teacher/copyQuestion",{id:t}).then((function(e){a(Me())}));var t}},r.a.createElement("i",{className:"fas fa-copy"})),r.a.createElement(w.a,{variant:"danger",className:"btn-sm",onClick:function(){return I(e._id)}},r.a.createElement("i",{className:"fas fa-trash"}))))})))):r.a.createElement(Z,{variant:"info"},"No question found, change language or search again")))},ze=a(12),We=a(979),Ye=a(515),Ve=a.n(Ye),Je=a(516),Xe=a.n(Je),$e=a(19),Ke=a(514),Ze=a(966),et=a(313),tt=r.a.forwardRef((function(e,t){var a,n=e.classes,c=e.className,l=e.label,o=e.nodeId,i=e.icon,s=e.expansionIcon,u=e.displayIcon,m=Object(Ke.a)(o),d=m.disabled,h=m.expanded,E=m.selected,f=m.focused,p=m.handleExpansion,v=m.handleSelection,b=m.preventSelection,g=i||s||u;return r.a.createElement("div",{className:Object($e.a)(c,n.root,(a={},Object(ze.a)(a,n.expanded,h),Object(ze.a)(a,n.selected,E),Object(ze.a)(a,n.focused,f),Object(ze.a)(a,n.disabled,d),a)),onMouseDown:function(e){b(e)},ref:t},r.a.createElement("div",{onClick:function(e){p(e)},className:n.iconContainer},g),r.a.createElement(et.a,{onClick:function(e){v(e)},component:"div",className:n.label},l))})),at=Object(n.forwardRef)((function(e,t){var a=e.onChange,c=void 0===a?function(){}:a,l=e.multiSelect,o=void 0!==l&&l,i=e.defaultSelected,s=e.expandedAll,u=Object(n.useState)([]),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(e.selected||(o?[]:"")),f=Object(G.a)(E,2),p=f[0],v=f[1],b=Object(n.useCallback)((function(e){for(var t={},a={},n={},r=!1,c=0;c<d.length;c++){var l=d[c];if(t.id=l._id,t.name=l.name,l._id===e){r=!0;break}for(var o=0;o<l.chapter.length;o++){var i=l.chapter[o];if(a.id=i._id,a.name=i.name,i._id===e){r=!0;break}for(var s=0;s<i.section.length;s++){var u=i.section[s];if(n.id=u._id,n.name=u.name,u._id===e){r=!0;break}}if(r)break;n={}}if(r)break;a={}}return r||(t={}),{library:t,chapter:a,section:n}}),[d]),g=Object(n.useState)([]),y=Object(G.a)(g,2),S=y[0],C=y[1],w=function(e,t){if(v(t),o){for(var a=[],n=0;n<t.length;n++){var r=b(t[n]);a.push(r)}c(a)}else c(b(t))};return Object(n.useImperativeHandle)(t,(function(){return{getLibrarySelected:function(){if(o){for(var e=[],t=0;t<p.length;t++){var a=b(p[t]);e.push(a)}return e}return b(p)}}})),Object(n.useEffect)((function(){var e=[];if(s)for(var t=0;t<d.length;t++){var a=d[t];e.push(a._id);for(var n=0;n<a.chapter.length;n++){var r=a.chapter[n];e.push(r._id);for(var c=0;c<r.section.length;c++){var l=r.section[c];e.push(l._id)}}}else if(o)for(var i=0;i<p.length;i++){var u=b(p[i]);u.library.id&&e.push(u.library.id),u.chapter.id&&e.push(u.chapter.id)}else{var m=b(p);m.library.id&&e.push(m.library.id),m.chapter.id&&e.push(m.chapter.id)}C(e)}),[s,b,d,o,p]),Object(n.useEffect)((function(){T.get("/user/getLibrary").then((function(e){h(e.result.list),i&&w(0,e.result.list[0]._id)}))}),[]),r.a.createElement(We.a,{"aria-label":"file system navigator",defaultCollapseIcon:r.a.createElement(Ve.a,null),defaultExpandIcon:r.a.createElement(Xe.a,null),sx:{height:400,flexGrow:1,maxWidth:400,overflowY:"auto"},onNodeSelect:w,onNodeToggle:function(e,t){C(t)},expanded:S,multiSelect:o,selected:p},d.map((function(e,t){return r.a.createElement(Ze.a,{disabled:e.expired,ContentComponent:tt,nodeId:e._id,label:e.name,key:e._id},e.chapter.map((function(t,a){return r.a.createElement(Ze.a,{disabled:e.expired,ContentComponent:tt,nodeId:t._id,label:t.name,key:t._id},t.section.map((function(t,a){return r.a.createElement(Ze.a,{disabled:e.expired,ContentComponent:tt,nodeId:t._id,label:t.name,key:t._id})})))})))})))}));function nt(e){var t=e.show,a=e.handleClose,c=e.handleSave,l=Object(g.c)().enqueueSnackbar,o=Object(n.useState)(1),i=Object(G.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(10),d=Object(G.a)(m,2),h=d[0],E=(d[1],Object(n.useState)(0)),f=Object(G.a)(E,2),p=f[0],v=f[1],b=Object(n.useState)(""),y=Object(G.a)(b,2),S=y[0],C=y[1],O=Object(n.useState)(!1),_=Object(G.a)(O,2),j=_[0],L=_[1],I=Object(n.useState)(""),k=Object(G.a)(I,2),N=k[0],x=k[1],A=Object(n.useState)({}),D=Object(G.a)(A,2),R=D[0],U=D[1],H=Object(n.useState)([]),F=Object(G.a)(H,2),M=F[0],B=F[1],Q=Object(n.useState)({}),z=Object(G.a)(Q,2),W=z[0],Y=z[1],J=function(){T.get("/teacher/getSourceList",{params:{page:s,keyword:S,pageSize:h}}).then((function(e){B(e.result.list),v(e.result.total)}))},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(!0),U(e),x(e.name||"")};return Object(n.useEffect)((function(){J()}),[s,h]),r.a.createElement(de.a,{show:t,onHide:a,size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Source")),r.a.createElement(de.a.Body,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,{lg:8},r.a.createElement(V.a.Group,{controlId:"search",style:{display:"flex"}},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"keyword",value:S,onChange:function(e){return C(e.target.value)},placeholder:"Search By NAME"}),r.a.createElement(w.a,{size:"sm",onClick:function(){1===s?J():u(1)},variant:"outline-success"},"Search"))),r.a.createElement(P.a,{lg:4,className:"text-right"},r.a.createElement(w.a,{size:"sm",className:"my-3",onClick:X},r.a.createElement("i",{className:"fas fa-plus"})," Create Source"))),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"source-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:80}),r.a.createElement("th",null,"name"),r.a.createElement("th",{width:180}))),r.a.createElement("tbody",null,M.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement(_e.a,{checked:e._id===W.id,onClick:function(){return function(e){Y({id:e._id,name:e.name})}(e)}})),r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement(w.a,{size:"sm",variant:"primary",onClick:function(){return X({id:e._id,name:e.name})}},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement(w.a,{size:"sm",variant:"danger",className:"ml-2",onClick:function(){return t=e._id,void(window.confirm("Are you sure")&&T.post("/teacher/deleteSource",{id:t}).then((function(e){J()})).catch((function(e){l(e.msg,{variant:"error"})})));var t}},r.a.createElement("i",{className:"fas fa-trash"}))))})))),r.a.createElement(Oe.a,{count:Math.ceil(p/h),page:s,onChange:function(e,t){u(t)}})),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:a},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){return c(W)},disabled:!W.id},"Save")),r.a.createElement(de.a,{show:j,onHide:function(){return L(!1)}},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Create Source")),r.a.createElement(de.a.Body,null,r.a.createElement(V.a,null,r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"name"),r.a.createElement(V.a.Control,{type:"text",name:"name",placeholder:"Enter name",value:N,onChange:function(e){return x(e.target.value)}})))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:function(){return L(!1)}},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){R.id?T.post("/teacher/updateSource",{id:R.id,name:N}).then((function(e){L(!1),J()})):T.post("/teacher/createSource",{name:N}).then((function(e){L(!1),J()}))}},"Save"))))}var rt={0:"Single Select Multiple Choice Question",1:"Multiple Select Multiple Choice Question",2:"Free Response Question"},ct=function(e){var t=e.history,a=e.match.params.id,c=Object(n.useState)(""),l=Object(G.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(""),u=Object(G.a)(s,2),m=u[0],d=u[1],h=Object(n.useState)(""),E=Object(G.a)(h,2),f=E[0],p=E[1],g=Object(n.useState)(""),y=Object(G.a)(g,2),S=y[0],C=y[1],O=Object(n.useState)(!1),_=Object(G.a)(O,2),j=_[0],L=_[1],I=Object(n.useState)(""),k=Object(G.a)(I,2),N=k[0],x=k[1],A=Object(n.useState)("4"),D=Object(G.a)(A,2),R=D[0],U=D[1],H=Object(n.useState)(""),F=Object(G.a)(H,2),M=F[0],B=F[1],Q=Object(n.useState)(3),z=Object(G.a)(Q,2),W=z[0],Y=z[1],J=Object(n.useState)(""),X=Object(G.a)(J,2),$=X[0],K=X[1],te=Object(n.useState)(""),ae=Object(G.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),le=Object(G.a)(ce,2),oe=le[0],ie=le[1],se=Object(n.useState)(""),ue=Object(G.a)(se,2),me=ue[0],he=ue[1],Ee=Object(n.useState)(""),fe=Object(G.a)(Ee,2),pe=fe[0],ve=fe[1],be=Object(n.useState)(""),ge=Object(G.a)(be,2),ye=ge[0],Se=ge[1],Ce=Object(n.useState)(""),we=Object(G.a)(Ce,2),Oe=we[0],_e=we[1],Le=Object(n.useState)(""),Ie=Object(G.a)(Le,2),ke=Ie[0],Ne=Ie[1],xe=Object(n.useState)("en"),Te=Object(G.a)(xe,2),Ae=Te[0],De=Te[1],qe=Object(n.useState)(null),Pe=Object(G.a)(qe,2),He=Pe[0],Ge=Pe[1],Fe=Object(n.useState)(null),Me=Object(G.a)(Fe,2),Be=Me[0],Qe=Me[1],ze=Object(n.useState)(null),We=Object(G.a)(ze,2),Ye=We[0],Ve=We[1],Je=Object(n.useState)(null),Xe=Object(G.a)(Je,2),$e=Xe[0],Ke=Xe[1],Ze=Object(n.useState)(null),et=Object(G.a)(Ze,2),tt=et[0],ct=et[1],lt=Object(n.useState)(null),ot=Object(G.a)(lt,2),it=ot[0],st=ot[1],ut=Object(n.useState)(null),mt=Object(G.a)(ut,2),dt=mt[0],ht=mt[1],Et=Object(n.useState)(null),ft=Object(G.a)(Et,2),pt=ft[0],vt=ft[1],bt=Object(n.useState)(null),gt=Object(G.a)(bt,2),yt=gt[0],St=gt[1],Ct=Object(n.useState)(null),wt=Object(G.a)(Ct,2),Ot=wt[0],_t=wt[1],jt=Object(n.useState)(null),Lt=Object(G.a)(jt,2),It=Lt[0],kt=Lt[1],Nt=Object(n.useState)(""),xt=Object(G.a)(Nt,2),Tt=xt[0],At=xt[1],Dt=Object(n.useState)(""),Rt=Object(G.a)(Dt,2),Ut=Rt[0],qt=Rt[1],Pt=Object(n.useState)(""),Ht=Object(G.a)(Pt,2),Gt=Ht[0],Ft=Ht[1],Mt=Object(n.useState)(null),Bt=Object(G.a)(Mt,2),Qt=Bt[0],zt=Bt[1],Wt=Object(n.useState)(!1),Yt=Object(G.a)(Wt,2),Vt=Yt[0],Jt=Yt[1],Xt=Object(n.useState)(!1),$t=Object(G.a)(Xt,2),Kt=$t[0],Zt=$t[1],ea=Object(n.useState)(""),ta=Object(G.a)(ea,2),aa=ta[0],na=ta[1],ra=Object(n.useState)(!1),ca=Object(G.a)(ra,2),la=ca[0],oa=ca[1],ia=Object(n.useRef)(),sa=Object(n.useState)(!1),ua=Object(G.a)(sa,2),ma=ua[0],da=ua[1],ha=Object(n.useState)(""),Ea=Object(G.a)(ha,2),fa=Ea[0],pa=Ea[1],va=function(){T.post("/teacher/getQuestionById",{id:a}).then((function(e){var a=e.result;a.referenceId&&window.localStorage.getItem("lang")!==a.language?t.replace("/teach/question/".concat(a.referenceId,"/edit")):(i(a.name),d(a.category),p(a.qText),C(a.image),L(a.showImg),x(a.isChoice),U(a.numChoice),B(a.correctAnswer),Y(a.difficuty),K(a.description),a.source&&(pa(a.source.name),re(a.source._id)),ie(a.copyright),he(a.answerA),ve(a.answerB),Se(a.answerC),_e(a.answerD),Ne(a.answerE),De(a.language),vt(a.referenceId),St(a.libraryId?a.libraryId._id:null),_t(a.chapterId),kt(a.sectionId),function(e,t,a){if(e&&(At(e.name),t)){var n=e.chapter.find((function(e){return e._id===t}));if(n&&(qt(n.name),a)){var r=n.section.find((function(e){return e._id===a}));r&&Ft(r.name)}}}(a.libraryId,a.chapterId,a.sectionId))}))},ba=Re();Object(n.useEffect)((function(){return function(){null!=He&&(He.destroy(),Ge(null))}}),[He]),Object(n.useEffect)((function(){return function(){null!=Be&&(Be.destroy(),Qe(null))}}),[Be]),Object(n.useEffect)((function(){return function(){null!=Ye&&(Ye.destroy(),Ve(null))}}),[Ye]),Object(n.useEffect)((function(){return function(){null!=$e&&($e.destroy(),Ke(null))}}),[$e]),Object(n.useEffect)((function(){return function(){null!=tt&&(tt.destroy(),ct(null))}}),[tt]),Object(n.useEffect)((function(){return function(){null!=it&&(it.destroy(),st(null))}}),[it]),Object(n.useEffect)((function(){return function(){null!=dt&&(dt.destroy(),ht(null))}}),[dt]);var ga=function(){oa(!1)};Object(n.useEffect)((function(){va()}),[a]);return r.a.createElement(b.a,null,r.a.createElement(v.Link,{to:"/teach/questionlist",className:"btn btn-light my-3"},"Go Back"),r.a.createElement(q.a,{className:"justify-content-md-center"},r.a.createElement(P.a,{md:8},r.a.createElement("h2",null," Edit Question "),aa&&r.a.createElement(Z,{variant:"danger"},aa),r.a.createElement(V.a,{onSubmit:function(e){if(e.preventDefault(),!yt||Ot||It){var t={_id:a,name:o,category:m,qText:f,image:S,showImg:j,isChoice:N,numChoice:R,correctAnswer:M,difficuty:W,description:$,source:ne,copyright:oe,answerA:me,answerB:pe,answerC:ye,answerD:Oe,answerE:ke,language:Ae,referenceId:pt,libraryId:yt,chapterId:Ot,sectionId:It};Zt(!0),na(""),T.put("/teacher/updateQuestion",t).then((function(e){Zt(!1)})).catch((function(e){console.log(e),na(e.msg),Zt(!1)}))}else na("Please select chapter and section")}},r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter name",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"language"},r.a.createElement(V.a.Label,null,"Language"),r.a.createElement(V.a.Control,{as:"select",value:Ae,onChange:function(e){return De(e.target.value)}},r.a.createElement("option",null,Ae),r.a.createElement("option",{value:"en"},"en"),r.a.createElement("option",{value:"zh"},"zh"))),r.a.createElement(V.a.Group,{controlId:"category"},r.a.createElement(V.a.Label,null,"Category"),r.a.createElement(V.a.Control,{type:"category",placeholder:"Enter category",value:m,onChange:function(e){return d(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"qtext"},r.a.createElement(V.a.Label,null,"Question Content"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:He,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ba,value:f,onCreated:Ge,onChange:function(e){return p(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"isChoice"},r.a.createElement(V.a.Label,null,"Is Single, Multi Select Choice Question or Free Response Question?"),r.a.createElement(V.a.Control,{as:"select",defaultValue:N,onChange:function(e){return x(e.target.value)},custom:!0},r.a.createElement("option",null,rt[N]),r.a.createElement("option",{value:"0"},"Single Select Multiple Choice Question"),r.a.createElement("option",{value:"1"},"Multi select Multiple Choice Question"),r.a.createElement("option",{value:"2"},"Free Response Question"))),"0"===N||"1"===N?r.a.createElement(V.a.Group,{controlId:"numChoice"},r.a.createElement(V.a.Label,null,"Set number of Choices:"),r.a.createElement(V.a.Control,{as:"select",defaultValue:R,onChange:function(e){return U(e.target.value)},custom:!0},r.a.createElement("option",null,R),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"))):r.a.createElement("div",null),r.a.createElement(V.a.Group,{controlId:"answerA",style:{display:"0"===N||"1"===N?"block":"none"}},r.a.createElement(V.a.Label,null,"Answer A"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:Ye,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ba,value:me,onCreated:Ve,onChange:function(e){return he(e.getHtml())},mode:"default",style:{height:"200px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"answerB",style:{display:"0"===N||"1"===N?"block":"none"}},r.a.createElement(V.a.Label,null,"Answer B"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:$e,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ba,value:pe,onCreated:Ke,onChange:function(e){return ve(e.getHtml())},mode:"default",style:{height:"200px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"answerC",style:{display:"0"===N||"1"===N?"block":"none"}},r.a.createElement(V.a.Label,null,"Answer C"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:tt,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ba,value:ye,onCreated:ct,onChange:function(e){return Se(e.getHtml())},mode:"default",style:{height:"200px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"answerD",style:{display:"0"===N||"1"===N?"block":"none"}},r.a.createElement(V.a.Label,null,"Answer D"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:it,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ba,value:Oe,onCreated:st,onChange:function(e){return _e(e.getHtml())},mode:"default",style:{height:"200px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"answerE",style:{display:("0"===N||"1"===N)&&R>4?"block":"none"}},r.a.createElement(V.a.Label,null,"Answer E"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:dt,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ba,value:ke,onCreated:ht,onChange:function(e){return Ne(e.getHtml())},mode:"default",style:{height:"200px",overflowY:"hidden"}}))),"0"===N?r.a.createElement(V.a.Group,{controlId:"correctAnswer"},r.a.createElement(V.a.Label,null,"Set Correct Answer:"),r.a.createElement(V.a.Control,{as:"select",defaultValue:M,onChange:function(e){return B(e.target.value)},custom:!0},r.a.createElement("option",null,M),r.a.createElement("option",{value:"A"},"A"),r.a.createElement("option",{value:"B"},"B"),r.a.createElement("option",{value:"C"},"C"),r.a.createElement("option",{value:"D"},"D"),R>4&&r.a.createElement("option",{value:"E"},"E"))):r.a.createElement("div",null),"1"===N?r.a.createElement(V.a.Group,{controlId:"correctAnswer"},r.a.createElement(V.a.Label,null,"Set Correct Answer:"),r.a.createElement(V.a.Control,{type:"correctAnswer",placeholder:"Enter correctAnswer\uff0ce.g. A,B,C,D",value:M,onChange:function(e){return B(e.target.value)}})):r.a.createElement("div",null),"2"===N?r.a.createElement(V.a.Group,{controlId:"correctAnswerf"},r.a.createElement(V.a.Label,null,"Correct Answer"),r.a.createElement(V.a.Control,{type:"correctAnswer",placeholder:"Enter correctAnswer",value:M,onChange:function(e){return B(e.target.value)}})):r.a.createElement("div",null),r.a.createElement(V.a.Group,{controlId:"difficuty"},r.a.createElement(V.a.Label,null,"Set difficuty:"),r.a.createElement(V.a.Control,{as:"select",defaultValue:W,onChange:function(e){return Y(e.target.value)},custom:!0},r.a.createElement("option",null,W),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"))),r.a.createElement(V.a.Group,{controlId:"description"},r.a.createElement(V.a.Label,null,"Solution"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:Be,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ba,value:$,onCreated:Qe,onChange:function(e){return K(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"source"},r.a.createElement(V.a.Label,null,"Source"),r.a.createElement("div",{className:"form-library-control",onClick:function(){da(!0)}},r.a.createElement("div",null,fa))),r.a.createElement(V.a.Group,{controlId:"library",style:{position:"relative"}},r.a.createElement(V.a.Label,null,"Library"),r.a.createElement("div",{className:"form-library-control",onClick:function(){zt(It||(Ot||(yt||null))),oa(!0)}},r.a.createElement("div",null,"library: ",Tt),r.a.createElement("div",null,"chapter: ",Ut),r.a.createElement("div",null,"section: ",Gt))),r.a.createElement(V.a.Group,{controlId:"referenceId"},r.a.createElement(V.a.Label,null,"ReferenceId"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter ReferenceId",value:pt,onChange:function(e){return vt(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"copyright"},r.a.createElement(V.a.Check,{type:"checkbox",label:"Has copyright or not",checked:oe,onChange:function(e){return ie(e.target.checked)}})),r.a.createElement(w.a,{type:"submit",variant:"primary",style:{marginRight:"10px"},disabled:Kt},Kt?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Update"),r.a.createElement(w.a,{variant:"primary",onClick:function(){Jt(!0)}},"Preview")))),r.a.createElement(de.a,{show:Vt,onHide:function(){Jt(!1)},size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Preview")),r.a.createElement(de.a.Body,null,r.a.createElement("div",{className:"question",style:{paddingBottom:"30px"}},r.a.createElement("div",{className:"question-title"},o),r.a.createElement("div",{className:"question-level"},"level: ",W),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:f}}),("0"===N||"1"===N)&&r.a.createElement("div",{className:"question-options"},r.a.createElement(V.a.Check,{type:"0"===N?"radio":"checkbox"},r.a.createElement(V.a.Check.Input,{type:"0"===N?"radio":"checkbox",id:"answerA"}),r.a.createElement(V.a.Check.Label,{for:"answerA"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"A. "),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:me}})))),r.a.createElement(V.a.Check,{type:"0"===N?"radio":"checkbox"},r.a.createElement(V.a.Check.Input,{type:"0"===N?"radio":"checkbox",id:"answerB"}),r.a.createElement(V.a.Check.Label,{for:"answerB"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"A. "),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:pe}})))),r.a.createElement(V.a.Check,{type:"0"===N?"radio":"checkbox"},r.a.createElement(V.a.Check.Input,{type:"0"===N?"radio":"checkbox",id:"answerC"}),r.a.createElement(V.a.Check.Label,{for:"answerC"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"C. "),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:ye}})))),r.a.createElement(V.a.Check,{type:"0"===N?"radio":"checkbox"},r.a.createElement(V.a.Check.Input,{type:"0"===N?"radio":"checkbox",id:"answerD"}),r.a.createElement(V.a.Check.Label,{for:"answerD"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"D. "),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:Oe}})))),Number(R)>4&&r.a.createElement(V.a.Check,{type:"0"===N?"radio":"checkbox"},r.a.createElement(V.a.Check.Input,{type:"0"===N?"radio":"checkbox",id:"answerE"}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:ke}}))))),"2"===N&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",M)))),r.a.createElement(de.a,{show:la,onHide:ga,size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Library")),r.a.createElement(de.a.Body,null,r.a.createElement(at,{ref:ia,selected:Qt})),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:ga},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){var e=ia.current.getLibrarySelected(),t=e.library,a=e.chapter,n=e.section;St(t.id),_t(a.id),kt(n.id),At(t.name),qt(a.name),Ft(n.name),oa(!1)}},"Select"))),r.a.createElement(nt,{show:ma,handleClose:function(){da(!1)},handleSave:function(e){re(e.id),pa(e.name),da(!1)}}))};function lt(){lt=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var ot=function(e){return function(){var t=Object(L.a)(lt().mark((function t(a,n){var r,c,l,o;return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"HW_LIST_FOR_TEACHER_REQUEST"}),r=n(),c=r.userLogin.userInfo,t.next=5,T.post("/teacher/getHWByTeacher",{id:c._id,name:e,language:window.localStorage.getItem("lang")||"en"});case 5:l=t.sent,o=l.result,a({type:"HW_LIST_FOR_TEACHER_SUCCESS",payload:o.list}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"HW_LIST_FOR_TEACHER_FAIL",payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},it=function(e){return function(){var t=Object(L.a)(lt().mark((function t(a,n){var r,c;return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"HW_DETAILS_ADD_CLASS_REQUEST"}),t.next=4,T.post("/user/getHWById",{id:e});case 4:r=t.sent,c=r.result,a({type:"HW_DETAILS_ADD_CLASS_SUCCESS",payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"HW_DETAILS_ADD_CLASS_FAIL",payload:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()},st=function(e){var t=e.history,a=(e.match,Object(o.b)()),c=Object(o.c)((function(e){return e.userLogin})).userInfo,l="Teacher"===c.role,i=Object(o.c)((function(e){return e.hwCreate})),s=i.loading,u=i.error,m=i.success,d=(i.hw,Object(o.c)((function(e){return e.hwListForTeacher}))),h=d.loading,E=d.error,f=d.hws,p=Object(o.c)((function(e){return e.hwDelete})),v=p.loading,g=p.error,y=p.success,S=Object(n.useState)(""),C=Object(G.a)(S,2),O=C[0],_=C[1];Object(n.useEffect)((function(){a({type:"HW_CREATE_RESET"}),c&&l?a(ot()):t.push("/login")}),[a,t,c,m,y,l]);var I=function(e){window.confirm("Are you sure")&&a(function(e){return function(){var t=Object(L.a)(lt().mark((function t(a,n){return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"HW_DELETE_REQUEST"}),t.next=4,T.post("/teacher/deleteHW",{id:e});case 4:a({type:"HW_DELETE_SUCCESS"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"HW_DELETE_FAIL",payload:t.t0.msg});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return r.a.createElement(b.a,null,v&&r.a.createElement(te,null),g&&r.a.createElement(Z,{variant:"danger"},g),s&&r.a.createElement(te,null),u&&r.a.createElement(Z,{variant:"danger"},u),r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"My HomeWorks ")),r.a.createElement(P.a,{className:"text-right"},r.a.createElement(w.a,{className:"my-3",onClick:function(){a(function(){var e=Object(L.a)(lt().mark((function e(t,a){var n,r;return lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"HW_CREATE_REQUEST"}),e.next=4,T.post("/teacher/createHomeWork",{language:window.localStorage.getItem("lang")||"en"});case 4:n=e.sent,r=n.result,t({type:"HW_CREATE_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"HW_CREATE_FAIL",payload:e.t0.msg});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}())}},r.a.createElement("i",{className:"fas fa-plus"})," Create New Homeworks"))),h?r.a.createElement(te,null):E?r.a.createElement(Z,{variant:"danger"},E):r.a.createElement(b.a,null,r.a.createElement(V.a,{inline:!0,style:{marginBottom:"10px"}},r.a.createElement(V.a.Group,{controlId:"search"},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"name",value:O,onChange:function(e){return _(e.target.value)},placeholder:"Search By NAME"}),r.a.createElement(w.a,{onClick:function(){a(ot(O))},variant:"outline-success"},"Search"))),f.length>0?r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"id"),r.a.createElement("th",null,"description"),r.a.createElement("th",null,"classes"),r.a.createElement("th",null))),r.a.createElement("tbody",null,f.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.classes.map((function(e){return r.a.createElement("p",null,r.a.createElement("a",{href:"/teach/class/".concat(e._id,"/addContent")},e.name))}))),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/teach/hw/".concat(e._id,"/edit")},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement(w.a,{variant:"light",className:"btn-sm",onClick:function(){return t=e._id,void T.post("/teacher/copyHomeWork",{id:t}).then((function(e){a(ot())}));var t}},r.a.createElement("i",{className:"fas fa-copy"})),r.a.createElement(w.a,{variant:"danger",className:"btn-sm",onClick:function(){return I(e._id)}},r.a.createElement("i",{className:"fas fa-trash"}))))})))):r.a.createElement(Z,{variant:"info"},"No Homeworks found, change language or search again ")))},ut=function(e){var t,a=e.isCorrect,n=e.autoCorrect;return(t=void 0===a||null===a?n:a)?r.a.createElement(Z,{variant:"success"},"Congrats!"):!1===t?r.a.createElement(Z,{variant:"danger"},"Oops, the answer you submit is incorrect"):""},mt=function(e){var t=e.correctedAt,a=e.autoCorrectedAt,n=e.isCorrect,c=e.autoCorrect;return t?r.a.createElement("div",{className:"question-corrections"},r.a.createElement("div",{className:"question-sub-title"},"Corrections"),!0===n&&r.a.createElement("div",{className:"question-correct-right"}),!1===n&&r.a.createElement("div",{className:"question-correct-wrong"}),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:e.comments}})):a?r.a.createElement("div",{className:"question-corrections"},!0===c&&r.a.createElement("div",{className:"question-correct-right"}),!1===c&&r.a.createElement("div",{className:"question-correct-wrong"})):""},dt=function(e){return e.questionList.filter((function(e){return void 0===e.isCorrect||null===e.isCorrect?e.autoCorrect:e.isCorrect})).length},ht=["A","B","C","D"],Et=function(e){e.history;var t=e.match.params.id,a=Object(n.useState)(""),c=Object(G.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(""),u=Object(G.a)(s,2),m=u[0],d=u[1],h=Object(n.useState)(0),E=Object(G.a)(h,2),f=E[0],p=E[1],g=Object(n.useState)("en"),y=Object(G.a)(g,2),S=y[0],C=y[1],O=Object(n.useState)(null),_=Object(G.a)(O,2),j=_[0],L=_[1],I=Object(n.useState)(""),k=Object(G.a)(I,2),N=(k[0],k[1],Object(n.useState)(new Date)),x=Object(G.a)(N,2),A=x[0],D=x[1],R=Object(n.useState)(""),U=Object(G.a)(R,2),H=(U[0],U[1],Object(o.b)(),Object(o.c)((function(e){return e.userLogin})).userInfo.role,Object(n.useState)([])),F=Object(G.a)(H,2),M=F[0],B=F[1],Q=Object(n.useState)({}),z=Object(G.a)(Q,2),Y=(z[0],z[1]),J=Object(n.useState)(!1),X=Object(G.a)(J,2),$=X[0],K=X[1],Z=Object(n.useState)(""),te=Object(G.a)(Z,2),ae=(te[0],te[1]),ne=Object(n.useState)({}),re=Object(G.a)(ne,2),ce=(re[0],re[1],Object(n.useRef)([])),le=Object(n.useState)(!1),oe=Object(G.a)(le,2),ie=oe[0],se=oe[1],ue=Object(n.useState)(""),me=Object(G.a)(ue,2),he=me[0],Ee=me[1],fe=Object(n.useState)([]),pe=Object(G.a)(fe,2),ve=pe[0],be=pe[1],ge=Object(n.useState)(!1),ye=Object(G.a)(ge,2),Se=ye[0],Ce=ye[1],we=Object(n.useState)(!1),Oe=Object(G.a)(we,2),_e=Oe[0],Le=Oe[1],Ie=Re(),ke=function(e){T.post("/teacher/getQuestionsByTeacher",{language:window.localStorage.getItem("lang")||"en"}).then((function(t){var a=t.result.list;if(a.forEach((function(e){e.checked=!1})),e&&e.length>0)for(var n=e.map((function(e){return e._id})),r=0;r<a.length;r++)n.includes(a[r]._id)&&(a.splice(r,1),r--);var c=a;he&&(c=a.filter((function(e){return e.name.toLowerCase().includes(he)}))),B(Object(W.a)(c)),ce.current=Object(W.a)(a)}))},Ne=function(){T.post("/user/getHWById",{id:t}).then((function(e){var t=e.result;be(t.questionList),ke(t.questionList)}))};return Object(n.useEffect)((function(){if(he){var e=Object(W.a)(ce.current).filter((function(e){return e.name.toLowerCase().includes(he.toLowerCase())}));B(e)}else B(Object(W.a)(ce.current))}),[he]),Object(n.useEffect)((function(){return function(){null!=j&&(j.destroy(),L(null))}}),[j]),Object(n.useEffect)((function(){T.post("/user/getHWById",{id:t}).then((function(e){var t=e.result;Y(t),i(t.name),d(t.description),p(t.numQuestions),C(t.language),D(new Date(t.dueDate?t.dueDate:Date.now())),be(t.questionList),ke(t.questionList)}))}),[]),r.a.createElement(b.a,null,r.a.createElement(v.Link,{to:"/teach/hwlist",className:"btn btn-light my-3"},"Go Back"),r.a.createElement(q.a,{className:"justify-content-md-center"},r.a.createElement(P.a,{md:8},r.a.createElement("h2",null," Edit Home Work "),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault();var a={_id:t,name:l,description:m,numQuestions:f,language:S,dueDate:A};K(!0),T.post("/teacher/updateHW",a).then((function(e){K(!1)})).catch((function(e){K(!1),ae(e.msg)}))}},r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter name",value:l,onChange:function(e){return i(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"description"},r.a.createElement(V.a.Label,null,"Description"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:j,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:Ie,value:m,onCreated:L,onChange:function(e){return d(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(V.a.Group,{controlId:"Due Date: "},r.a.createElement(V.a.Label,null,"Due Date:"),r.a.createElement(Pe.a,{selected:A,onChange:function(e){D(e)},name:"Due Date: ",timeIntervals:20,timeCaption:"time",dateFormat:"MMMM d, yyyy ",className:"form-control"})),r.a.createElement(V.a.Group,{controlId:"language"},r.a.createElement(V.a.Label,null,"Language"),r.a.createElement(V.a.Control,{as:"select",value:S,onChange:function(e){return C(e.target.value)}},r.a.createElement("option",null,S),r.a.createElement("option",{value:"en"},"en"),r.a.createElement("option",{value:"zh"},"zh"))),r.a.createElement(w.a,{type:"submit",variant:"primary",style:{marginRight:"10px"},disabled:$},$?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Update"),r.a.createElement(w.a,{variant:"primary",onClick:function(){Le(!0)}},"Preview")))),r.a.createElement("h3",{style:{marginTop:"40px"}}," Add questions to homework "),r.a.createElement("h4",{style:{marginBottom:"30px"}},"Number of HomeWork in this class: ".concat(ve.length)),r.a.createElement("div",{className:"transfer-container"},r.a.createElement("div",{className:"transfer-content"},r.a.createElement("div",{className:"transfer-content-header"},r.a.createElement("input",{type:"checkbox",checked:ie,onClick:function(){var e=Object(W.a)(M);e.forEach((function(e){e.checked=!ie,ce.current.find((function(t){return t._id===e._id})).checked=e.checked})),B(e),se(!ie)}})),r.a.createElement("div",{className:"transfer-search"},r.a.createElement(V.a.Control,{type:"text",placeholder:"question name",value:he,onChange:function(e){return Ee(e.target.value)}})),r.a.createElement("div",{className:"transfer-list"},M.map((function(e,t){return r.a.createElement("div",{className:"transfer-list-item",key:e._id,onClick:function(){return function(e){var t=Object(W.a)(M),a=t.find((function(t){return t._id===e}));a.checked=!a.checked,ce.current.find((function(t){return t._id===e})).checked=a.checked,B(t)}(e._id)}},r.a.createElement("input",{type:"checkbox",checked:e.checked}),r.a.createElement("div",{className:"transfer-list-text"},e.name,"(",e._id,")"))})))),r.a.createElement("div",{className:"transfer-btns"},r.a.createElement(w.a,{type:"submit",variant:"primary",onClick:function(){var e=Object(W.a)(ve).filter((function(e){return e.checked})).map((function(e){return e._id}));0!==e.length&&T.post("/teacher/batchDeleteQFromHW",{id:t,QIds:e}).then((function(e){var t=e.result;be(t.questionList),ke(t.questionList)}))}},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement(w.a,{type:"submit",variant:"primary",onClick:function(){var e=Object(W.a)(ce.current).filter((function(e){return e.checked})).map((function(e){return e._id}));0!==e.length&&T.post("/teacher/batchAddQToHW",{id:t,QIds:e}).then((function(e){Ne()}))}},r.a.createElement("i",{className:"fas fa-arrow-right"}))),r.a.createElement("div",{className:"transfer-content"},r.a.createElement("div",{className:"transfer-content-header"},r.a.createElement("input",{type:"checkbox",checked:Se,onClick:function(){var e=Object(W.a)(ve);e.forEach((function(e){e.checked=!Se})),be(e),Ce(!Se)}})),r.a.createElement("div",{className:"transfer-list"},ve.map((function(e,a){return r.a.createElement("div",{className:"transfer-list-item",key:e._id,onClick:function(){return function(e){var t=Object(W.a)(ve),a=t.find((function(t){return t._id===e}));a.checked=!a.checked,be(t)}(e._id)}},r.a.createElement("input",{type:"checkbox",checked:e.checked}),r.a.createElement("div",{className:"transfer-list-text"},e.name,"(",e._id,")"),r.a.createElement("div",null,a>0&&r.a.createElement("i",{className:"fas fa-arrow-up mr-2",onClick:function(e){return function(e,a){e.stopPropagation();var n=Object(W.a)(ve);if(0!==a){var r=n[a];n[a]=n[a-1],n[a-1]=r,T.post("/teacher/setQFormHW",{id:t,questionList:n}).then((function(e){Ne()}))}}(e,a)}}),a!==ve.length-1&&r.a.createElement("i",{className:"fas fa-arrow-down",onClick:function(e){return function(e,a){e.stopPropagation();var n=Object(W.a)(ve);if(a!==n.length-1){var r=n[a];n[a]=n[a+1],n[a+1]=r,T.post("/teacher/setQFormHW",{id:t,questionList:n}).then((function(e){Ne()}))}}(e,a)}})))}))))),r.a.createElement(de.a,{show:_e,onHide:function(){Le(!1)},size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Preview")),r.a.createElement(de.a.Body,null,r.a.createElement("div",{className:"question"},r.a.createElement("div",{className:"question-title",style:{marginTop:"0"}},l),r.a.createElement("div",{className:"question-level"},"Due Date: ",A.toISOString()),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:m}})),r.a.createElement("h4",{style:{marginTop:"40px"}},"Questions"),r.a.createElement("div",null,ve.map((function(e,t){return r.a.createElement("div",{className:"question question-border",key:e._id},r.a.createElement("div",{className:"question-title",style:{fontSize:"16px"}},"Question ",t+1," ",r.a.createElement("i",{className:"fas fa-edit",style:{fontSize:"16px",cursor:"pointer",color:"#4d85ff"},onClick:function(){return t=e._id,void window.open("/teach/question/".concat(t,"/edit"),"_blank");var t}})),r.a.createElement("div",{className:"question-level"},"level: ",e.difficuty),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:e.qText}}),"0"===e.isChoice&&r.a.createElement("div",{className:"question-options"},ht.map((function(t,a){return r.a.createElement(V.a.Check,{key:t,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(t),checked:!1,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e["answer".concat(t)]}}))))})),Number(e.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",checked:!1,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e.answerE}}))))),"1"===e.isChoice&&r.a.createElement("div",{className:"question-options"},ht.map((function(t,a){return r.a.createElement(V.a.Check,{key:t,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(t),checked:!1,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e["answer".concat(t)]}}))))})),Number(e.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",checked:!1,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e.answerE}}))))),"2"===e.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,disabled:!0})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",e.correctAnswer))}))))))},ft=function(e){var t=e.history,a=e.match.params.id,c=Object(n.useState)(""),l=Object(G.a)(c,2),i=l[0],s=l[1],u=Object(o.b)(),d=Object(o.c)((function(e){return e.classDetails})),h=(d.loading,d.error,d.tClass),E=Object(o.c)((function(e){return e.hwDetailsAddClass})),f=E.loading,p=E.error,g=E.hw,y=Object(o.c)((function(e){return e.userLogin})).userInfo,S="Teacher"===y.role,C=Object(n.useState)(!1),O=Object(G.a)(C,2),_=O[0],I=O[1],k=Object(n.useState)([]),N=Object(G.a)(k,2),x=N[0],A=N[1],D=Object(n.useState)(!1),R=Object(G.a)(D,2),U=R[0],H=R[1],F=Object(n.useState)({}),M=Object(G.a)(F,2),B=M[0],z=M[1],Y=Object(n.useState)(""),J=Object(G.a)(Y,2),X=J[0],$=J[1],K={};h&&(K.name=h.name,K.teacher=h.user,K.image=h.image,K.price=h.price,K.classID=h._id);var ee=Object(o.c)((function(e){return e.classAddHW})),ae=(ee.loading,ee.error,ee.success);Object(n.useEffect)((function(){y&&S?h&&h._id===a||u(Se(a)):t.push("/login")}),[u,t,h,a,E,ae,y,S]);var ne=function(e){var t,n;window.confirm("Are you sure")&&u((t=h._id,n=e,function(){var e=Object(L.a)(ge().mark((function e(a,r){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"DELETE_HW_FROM_CLASS_REQUEST"}),e.next=4,T.post("/teacher/deleteHWFromClass",{hwID:n,id:t});case 4:a({type:"DELETE_HW_FROM_CLASS_SUCCESS"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"DELETE_HW_FROM_CLASS_FAIL",payload:e.t0.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())),u(Se(a))},re=Object(n.useCallback)((function(){var e=Object(W.a)(x).filter((function(e){return e.select&&!e.isPublished})).map((function(e){return e.student.ID}));0!==e.length&&T.post("/teacher/publishHomework",{classID:h?h._id:"",hwID:B.hwID,studentIDs:e}).then((function(){x.forEach((function(e){e.select=!1})),A(x),H(!1),I(!1),$("Publish homework successfully")}))}),[x,h,B.hwID]),ce=Object(n.useCallback)((function(e){h&&T.post("/teacher/getStudentListByExercise",{classID:h?h._id:"",hwID:e}).then((function(e){var t=e.result.list;t.forEach((function(e){t.select=!1})),A(t)}))}),[h]),le=function(e){if(window.confirm("Are you sure")){var t,a=Object(W.a)(x);if(void 0===e)t=a.filter((function(e){return e.select})).map((function(e){return e.exerciseId})),T.post("/teacher/unPublishHomework",{exerciseIds:t}).then((function(){x.forEach((function(e){e.select=!1})),A(x),H(!1),I(!1),$("Unpublish homework successfully")}));else{var n=a[e];t=[n.exerciseId],T.post("/teacher/unPublishHomework",{exerciseIds:t}).then((function(){n.isPublished=!1,n.exerciseId="",A(a)}))}}};return r.a.createElement(b.a,null,r.a.createElement(v.Link,{to:"/teach/classlist",className:"btn btn-light my-3"},"Go Back"),h?r.a.createElement("h3",null,"Add Homework to: ".concat(h.name)):r.a.createElement("h3",null," Add Homework "),f?r.a.createElement(te,null):p?r.a.createElement(Z,{variant:"danger"},p):r.a.createElement(b.a,null),X&&r.a.createElement(Z,{variant:"success"},X),r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),u(it(i))},inline:!0},r.a.createElement(V.a.Group,{controlId:"search"},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"q",value:i,onChange:function(e){return s(e.target.value)},placeholder:"HW ID ..."}),r.a.createElement(w.a,{type:"submit",variant:"outline-success"},"Search")))),r.a.createElement(q.a,{className:"align-items-center",style:{marginBottom:"10px"}},r.a.createElement(P.a,null,r.a.createElement(V.a,{onSubmit:function(e){if(e.preventDefault(),g){var t={hwID:g._id,name:g.name,isPub:g.isPublish,creator:g.creator};u((n=a,r=t,function(){var e=Object(L.a)(ge().mark((function e(t,a){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"ADD_HW_TO_CLASS_REQUEST"}),e.next=4,T.post("/teacher/addHWToClass",Object(m.a)({id:n},r));case 4:e.sent.result,t({type:"ADD_HW_TO_CLASS_SUCCESS"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"ADD_HW_TO_CLASS_FAIL",payload:e.t0.msg});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}())),s(""),u(it(i)),u(Se(a))}var n,r},inline:!0},r.a.createElement(V.a.Group,{as:q.a,controlId:"found hw"},r.a.createElement(V.a.Label,{column:!0,sm:2},"Found"),r.a.createElement(P.a,{sm:6},r.a.createElement(V.a.Control,{type:"text",value:g?g.name:""})),r.a.createElement(P.a,{sm:4},r.a.createElement(w.a,{type:"submit",variant:"outline-success"},"Add"))))),r.a.createElement(P.a,null,r.a.createElement(w.a,{variant:"danger",style:{float:"right"},onClick:function(){window.confirm("Are you sure")&&T.post("/teacher/deleteAllHomework",{id:h._id}).then((function(){u(Se(a))}))}},"REMOVE ALL HOMEWORK"))),h?r.a.createElement(q.a,null,r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"HomeWork"),r.a.createElement("th",null,"Due Date"),r.a.createElement("th",null))),r.a.createElement("tbody",null,h.homeworkList.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.hwID._id),r.a.createElement("td",null,e.hwID.dueDate?e.hwID.dueDate.split("T")[0]:""),r.a.createElement("td",null,r.a.createElement(w.a,{className:"btn-sm mr-2",onClick:function(){return function(e){z(e),I(!0),ce(e.hwID)}(e)}},r.a.createElement("i",{className:"fas fa-arrow-up"})),r.a.createElement(j.LinkContainer,{to:"/teacher/correctionExercise/".concat(a,"/").concat(e.hwID._id)},r.a.createElement(w.a,{variant:"light",className:"btn-sm mr-2"},r.a.createElement("i",{className:"fas fa-pen"}))),r.a.createElement(w.a,{variant:"danger",className:"btn-sm",onClick:function(){return ne(e)}},r.a.createElement("i",{className:"fas fa-trash"}))))}))))):r.a.createElement("h6",null,"No HomeWork added."),r.a.createElement(de.a,{show:_,onHide:function(){I(!1),A([])},size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"HOMEWORK")),r.a.createElement(de.a.Body,null,r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",checked:U,onChange:function(e){return function(e){var t=Object(W.a)(x);t.forEach((function(t){t.select=e})),A(t),H(e)}(e.currentTarget.checked)}})),r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"email"),r.a.createElement("th",null))),r.a.createElement("tbody",null,x.map((function(e,t){return r.a.createElement("tr",{key:e.student.ID},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:e.select,onChange:function(e){return function(e,t){var a=Object(W.a)(x);a[t].select=e,A(a)}(e.currentTarget.checked,t)}})),r.a.createElement("td",null,e.student.name),r.a.createElement("td",null,e.student.email),r.a.createElement("td",null,e.isPublished&&r.a.createElement(Q.a,{variant:"danger",style:{cursor:"pointer"},onClick:function(){return le(t)}},"unpublish")))}))))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"danger",onClick:function(){return le()}},"Unpublish"),r.a.createElement(w.a,{variant:"primary",onClick:re},"Publish"))))},pt=function(e){e.history,e.match;var t=Object(n.useState)([]),a=Object(G.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){T.get("/user/getStudentsByEmail").then((function(e){l(e.result.list)}))}),[]),r.a.createElement(b.a,null,c.map((function(e){return r.a.createElement("div",{key:e._id,style:{marginBottom:"50px"}},r.a.createElement(q.a,{className:"align-items-center",style:{marginBottom:"30px"}},r.a.createElement(P.a,null,r.a.createElement("h3",null,e.name," Class"))),r.a.createElement(b.a,null,r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"PRICE"),r.a.createElement("th",null,"CATEGORY"),r.a.createElement("th",null,"Start "),r.a.createElement("th",null,"End "),r.a.createElement("th",null))),r.a.createElement("tbody",null,e.classList.map((function(e){var t,a,n,c;return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.classInfo.name),r.a.createElement("td",null,e.classInfo.price),r.a.createElement("td",null,null===(t=e.classInfo.classID)||void 0===t?void 0:t.category),r.a.createElement("td",null,null===(a=e.classInfo.classID)||void 0===a?void 0:a.startDate.split("T")[0]),r.a.createElement("td",null,null===(n=e.classInfo.classID)||void 0===n?void 0:n.endDate.split("T")[0]),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/parent/student/exercise/".concat(e.student.ID,"/").concat(null===(c=e.classInfo.classID)||void 0===c?void 0:c._id)},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},"Exercise"))))}))))))})))},vt=a(953),bt=(a(631),a(517)),gt=function(){return r.a.createElement(b.a,null,r.a.createElement("div",null,"In Question View"),r.a.createElement("div",null,"in line ",r.a.createElement(bt.InlineMath,null,"\\int_0^\\infty x^2 dx")," is",Object(vt.a)(4).toString()))},yt=a(93),St=a(95),Ct=a(117),wt=a.n(Ct),Ot=function(e){Object(yt.a)(a,e);var t=Object(St.a)(a);function a(e){var n;return Object(Ie.a)(this,a),(n=t.call(this,e)).state={},n}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=wt.a.Engine,t=wt.a.Render,a=(wt.a.Runner,wt.a.World),n=wt.a.Bodies,r=wt.a.Mouse,c=(wt.a.Composite,wt.a.MouseConstraint),l=e.create({}),o=t.create({element:this.refs.scene,engine:l,options:{width:800,height:400,wireframes:!1}}),i=n.rectangle(400,50,720,20,{isStatic:!0}),s=n.rectangle(50,210,20,300,{isStatic:!0}),u=n.rectangle(750,210,20,300,{isStatic:!0}),m=n.rectangle(400,350,720,20,{isStatic:!0}),d=n.circle(90,280,20);a.add(l.world,[i,s,u,m,d]);var h=r.create(o.canvas),E=c.create(l,{mouse:h,constraint:{stiffness:.2,render:{visible:!1}}});a.add(l.world,E),wt.a.Events.on(E,"mousedown",(function(e){a.add(l.world,n.circle(150,50,30,{restitution:.7}))})),e.run(l),t.run(o)}},{key:"render",value:function(){return r.a.createElement("div",{ref:"scene"})}}]),a}(r.a.Component),_t=function(e){var t=e.draw,a=e.height,c=(e.width,Object(n.useRef)(null));Object(n.useEffect)((function(){var e=c.current.getContext("2d");t(e),l(e)}));var l=function(e){console.log("context",e);var t=new Image;console.log(t),t.src="/uploads/1ppd.png",t.onload=function(){console.log("img size",t.width),e.drawImage(t,0,0)}};return console.log("window size",a,window.innerHeight),r.a.createElement("canvas",{ref:c})};function jt(){jt=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(I){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,l=Object.create(c.prototype),o=new _(r||[]);return n(l,"_invoke",{value:S(e,a,o)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var m={};function d(){}function h(){}function E(){}var f={};i(f,c,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(j([])));v&&v!==t&&a.call(v,c)&&(f=v);var b=E.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;n(this,"_invoke",{value:function(n,c){function l(){return new t((function(r,l){!function n(r,c,l,o){var i=u(e[r],e,c);if("throw"!==i.type){var s=i.arg,m=s.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(m).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}(n,c,r,l)}))}return r=r?r.then(l,l):l()}})}function S(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return L()}for(a.method=r,a.arg=c;;){var l=a.delegate;if(l){var o=C(l,a);if(o){if(o===m)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=u(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=E,n(b,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:h,configurable:!0}),h.displayName=i(E,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(y.prototype),i(y.prototype,l,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var l=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),i(b,o,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(o&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},e}var Lt=function(e){var t=e.history,a=e.match,c=Object(o.b)(),l=a.params.id,i=Object(o.c)((function(e){return e.userLogin})).userInfo,s=Object(o.c)((function(e){return e.myClassList})),u=(s.loading,s.error,s.myClasses,Object(o.c)((function(e){return e.myHWListInClass}))),d=u.loading,h=u.error,E=u.classContent;return Object(n.useEffect)((function(){i?c(function(e,t){return function(){var a=Object(L.a)(jt().mark((function a(n,r){var c,l;return jt().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"MY_HW_IN_CLASS_REQUEST"}),a.next=4,T.post("/user/getClassesContent",Object(m.a)({id:e},t));case 4:c=a.sent,l=c.result,n({type:"MY_HW_IN_CLASS_SUCCESS",payload:l}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:"MY_HW_IN_CLASS_FAIL",payload:a.t0.msg});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(l,i)):t.push("/login")}),[c,t,i,l]),r.a.createElement(b.a,null,d?r.a.createElement(te,null):h?r.a.createElement(Z,{variant:"danger"},h):r.a.createElement(b.a,null),E?r.a.createElement(b.a,null,r.a.createElement("h2",null," ".concat(E.name," for ").concat(i.name))):r.a.createElement("h4",null," "),E?r.a.createElement(b.a,null,r.a.createElement(q.a,null,r.a.createElement(P.a,{sm:3},r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"HomeWorks"))),r.a.createElement("tbody",null,E.homeworkList.map((function(e){return e.isPublish||e.creator.toString()===i._id.toString()?r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement(w.a,{variant:"info",className:"btn-sm"},"".concat(e.name)))):r.a.createElement("tr",null)}))))),r.a.createElement(P.a,{sm:9},r.a.createElement(gt,null),r.a.createElement(Ot,null),r.a.createElement(_t,{draw:function(e){e.fillStyle="rgb(200, 0, 0)",e.fillRect(10,10,50,50)},height:100,width:100})))):r.a.createElement("h4",null,"No HomeWork added."))},It=a(287),kt=a.n(It),Nt=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(G.a)(a,2),l=c[0],i=c[1],s=!!Object(o.c)((function(e){return e.userLogin})).userInfo;return Object(n.useEffect)((function(){T.get("/public/getClassById?id=".concat(t.params.id)).then((function(e){i(e.result),document.title=e.result.name}))}),[t.params.id]),r.a.createElement(b.a,null,r.a.createElement(b.a,null,r.a.createElement(q.a,null,r.a.createElement(P.a,{sm:4},r.a.createElement(F.a,{className:"my-3 p-3 rounded"},r.a.createElement(z.a,{variant:"flush"},r.a.createElement(z.a.Item,null,kt()(l.startDate).format("YYYY-MM-DD")),r.a.createElement(z.a.Item,null,s?"Price: ".concat(l.price):"Sign in to check price"),r.a.createElement(z.a.Item,null,s?r.a.createElement(w.a,{href:"/classRegister/".concat(l._id),target:"_blank",variant:"info",className:" rounded"},"Register"):r.a.createElement(w.a,{href:"/register?redirect=/myclasses",target:"_blank",variant:"info",className:" rounded"},"Register"))))),r.a.createElement(P.a,{sm:8},r.a.createElement(F.a,{className:"my-3 p-3 rounded"},r.a.createElement("h1",{id:"ch"},r.a.createElement("strong",null,l.name)),r.a.createElement(F.a.Body,null,r.a.createElement("div",{className:"rich-text",dangerouslySetInnerHTML:{__html:l.description}})))))))},xt=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(G.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(""),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(60),f=Object(G.a)(E,2),p=f[0],v=f[1],b=Object(n.useState)(!1),g=Object(G.a)(b,2),y=g[0],S=g[1];return Object(n.useEffect)((function(){var e=null;return y&&p>0?e=setInterval((function(){v((function(e){return e-1}))}),1e3):0===p&&S(!1),function(){return clearInterval(e)}}),[y,p]),r.a.createElement(ie,null,r.a.createElement("h1",null,"Sign In"),a&&r.a.createElement(Z,{variant:"danger"},a),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),T.post("/public/verifyEmail",{email:i,code:Number(d)}).then((function(e){window.localStorage.removeItem("isVerify");var t=JSON.parse(window.localStorage.getItem("userInfo"));t.token=e.result,window.localStorage.setItem("userInfo",JSON.stringify(t)),document.location.href="/myclasses"})).catch((function(e){c(e.msg)}))}},r.a.createElement(V.a.Group,{controlId:"email"},r.a.createElement(V.a.Label,null,"Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter email",value:i,onChange:function(e){return s(e.target.value)},style:{width:"calc(100% - 82px)",display:"inline-block"}}),r.a.createElement(w.a,{variant:"primary",onClick:function(){c(""),S(!0),v(60),T.post("/login/sendEmail",{email:i}).catch((function(e){c(e.msg)}))},disabled:y,style:{height:"45px",width:"82px"}},y?"".concat(p,"s"):"Send")),r.a.createElement(V.a.Group,{controlId:"code"},r.a.createElement(V.a.Label,null,"Code"),r.a.createElement(V.a.Control,{placeholder:"Enter code",value:d,onChange:function(e){return h(e.target.value)}})),r.a.createElement(w.a,{type:"submit",variant:"primary"},"Verify")))},Tt=function(e){e.history,e.match;var t=Object(n.useState)([]),a=Object(G.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){T.get("/user/getExerciseList").then((function(e){l(e.result.list)}))}),[]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"My Exercise "))),r.a.createElement(b.a,null,r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Class"),r.a.createElement("th",null,"HomeWork"),r.a.createElement("th",null,"Due Date"),r.a.createElement("th",null,"Progress Tracker"),r.a.createElement("th",null,"Accuracy Tracker"),r.a.createElement("td",null))),r.a.createElement("tbody",null,c.map((function(e){var t;return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,null===(t=e.classId)||void 0===t?void 0:t.name),r.a.createElement("td",null,e.homeworkId.name),r.a.createElement("td",null,e.homeworkId.dueDate?e.homeworkId.dueDate.split("T")[0]:"","\xa0",new Date(e.homeworkId.dueDate)<new Date&&e.questionList.some((function(e){return!e.answeredAt}))&&r.a.createElement(Q.a,{variant:"danger"},"overdue")),r.a.createElement("td",null,e.questionList.filter((function(e){return e.answeredAt})).length," / ",e.questionList.length),r.a.createElement("td",null,dt(e)," / ",e.questionList.length),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/student/exerciseEdit/".concat(e._id)},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},r.a.createElement("i",{className:"fas fa-pen"})))))}))))))},At=a(951),Dt=["A","B","C","D"],Rt=function(e){var t=e.history,a=e.match,c=Object(n.useState)([]),l=Object(G.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)({question:{}}),u=Object(G.a)(s,2),m=u[0],d=u[1],h=m.question,E=Object(n.useState)(0),f=Object(G.a)(E,2),p=f[0],v=f[1],g=Object(n.useState)(""),y=Object(G.a)(g,2),S=y[0],C=y[1],O=Object(n.useState)(null),_=Object(G.a)(O,2),j=_[0],L=_[1],I=Object(n.useState)(""),k=Object(G.a)(I,2),N=k[0],x=k[1],A=Object(n.useState)(!1),D=Object(G.a)(A,2),R=D[0],U=D[1],H=Object(n.useState)({}),F=Object(G.a)(H,2),M=F[0],B=F[1],Q=Object(n.useState)(""),z=Object(G.a)(Q,2),Y=z[0],J=z[1],X=Object(n.useState)(!1),$=Object(G.a)(X,2),K=$[0],te=$[1],ae=Re(),ne=function(){return T.post("/user/saveExercise",{id:a.params.id,questionId:h._id,answer:S,content:N})},re=function(e){var t=S.split(",");t.includes(e)?t.splice(t.indexOf(e),1):(t.push(e),t.sort()),C(t.filter((function(e){return e})).join(","))};return Object(n.useEffect)((function(){T.get("/user/getExerciseById?id=".concat(a.params.id)).then((function(e){var t=e.result.questionList;i(t),B(e.result.homeworkId)}))}),[]),Object(n.useEffect)((function(){if(0!==p&&o.length>0){var e=o[p-1];d(e),C(e.answer),x(e.content||""),J("")}}),[p,o,j]),Object(n.useEffect)((function(){return function(){null!=j&&(j.destroy(),L(null))}}),[j]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Exercise"))),R?r.a.createElement(b.a,null,r.a.createElement(At.a,{animated:!0,striped:!0,variant:"success",now:o.length?p/o.length*100:0,label:"".concat(p,"/").concat(o.length),style:{marginTop:"20px"}}),r.a.createElement("div",{className:"question"},r.a.createElement("div",{className:"question-title"},"Question ",p),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:h.qText}}),"0"===h.isChoice&&r.a.createElement("div",{className:"question-options"},Dt.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(e),name:h._id,checked:S===e,disabled:!!h.correctAnswer,onChange:function(){return C(e)}}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:h["answer".concat(e)]}}))))})),Number(h.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",name:h._id,checked:"E"===S,disabled:!!h.correctAnswer,onChange:function(){return C("E")}}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:h.answerE}}))))),"1"===h.isChoice&&r.a.createElement("div",{className:"question-options"},Dt.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(e),name:h._id,checked:S.split(",").includes(e),disabled:!!h.correctAnswer,onChange:function(){return re(e)}}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:h["answer".concat(e)]}}))))})),Number(h.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",name:h._id,checked:S.split(",").includes("E"),disabled:!!h.correctAnswer,onChange:function(){return re("E")}}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:h.answerE}}))))),"2"===h.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,value:S,disabled:!!h.correctAnswer,onChange:function(e){return C(e.target.value)}})),r.a.createElement("div",{style:{marginTop:"10px"}},Y&&r.a.createElement(Z,{variant:"danger"},Y)),r.a.createElement("div",{style:{marginTop:"10px"}},ut(m)),r.a.createElement("div",{className:"question-sub-title"},"Answer content"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100,marginTop:"20px"}},r.a.createElement(je.b,{editor:j,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ae,value:N,onCreated:L,onChange:function(e){return x(e.getHtml())},mode:"default",style:{height:"300px",overflowY:"hidden"}})),h.correctAnswer&&r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",h.correctAnswer),mt(m),m.showSolution&&r.a.createElement("div",{className:"question-solution"},r.a.createElement("div",{className:"question-sub-title"},"Solution"),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:h.description}})),r.a.createElement("div",{className:"question-btns"},!h.correctAnswer&&r.a.createElement(w.a,{className:"question-btn",onClick:function(){if(!S)return"0"!==h.isChoice&&"1"!==h.isChoice||J("Please select your answer"),void("2"===h.isChoice&&J("Please input your answer"));T.post("/user/submitExercise",{id:a.params.id,questionId:h._id,answer:S,content:N}).then((function(e){var t=e.result,a=t.correctAnswer,n=t.autoCorrect,r=t.description,c=Object(W.a)(o),l=c[p-1];l.question.correctAnswer=a,l.question.description=r,l.answer=S,l.content=N,l.autoCorrect=n,i(c)})).catch((function(e){}))}},"Submit"),h.correctAnswer&&r.a.createElement(w.a,{className:"question-btn",onClick:function(){N&&"<p><br></p>"!==N&&(K||(te(!0),T.post("/user/updateExerciseContent",{id:a.params.id,questionId:h._id,content:N}).then((function(e){var t=Object(W.a)(o);t[p-1].content=N,i(t),te(!1)})).catch((function(e){te(!1)}))))}},K?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Update Content"),p>1&&r.a.createElement(w.a,{variant:"info",className:"question-btn",onClick:function(){p>1&&v(p-1)}},"Prev"),p<o.length&&r.a.createElement(w.a,{variant:"info",className:"question-btn",onClick:function(){if(p<o.length){var e=Object(W.a)(o),t=e[p-1];t.answer===S&&t.content===N?v(p+1):ne().then((function(){t.answer=S,t.content=N,i(e),v(p+1)}))}}},"Next"),p===o.length&&r.a.createElement(w.a,{variant:"success",className:"question-btn",onClick:function(){Object(W.a)(o)[p-1].answer!==S?ne().then((function(){t.go(-1)})):t.go(-1)}},"Finish"),r.a.createElement(w.a,{disabled:!h.correctAnswer,variant:"success",className:"question-btn",onClick:function(){var e=Object(W.a)(o),t=e[p-1];t.showSolution=!t.showSolution,i(e)}},m.showSolution?"hide":"show"," solution")))):r.a.createElement(b.a,null,r.a.createElement("div",{className:"question"},r.a.createElement("div",{className:"question-title"},M.name),r.a.createElement("div",{className:"question-level"},"Due Date: ",M.dueDate?M.dueDate.split("T")[0]:""),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:M.description}})),r.a.createElement("div",{className:"question-btns"},o.length>0&&r.a.createElement(w.a,{variant:"success",className:"question-btn",onClick:function(){U(!0),v(1)}},"Start"))))},Ut=function(e){e.history;var t=e.match,a=Object(n.useState)([]),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(G.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),h=Object(G.a)(d,2),E=h[0],f=h[1],p=Object(n.useState)(1),v=Object(G.a)(p,2),g=v[0],y=v[1],S=Object(n.useState)(10),C=Object(G.a)(S,2),O=C[0],_=(C[1],Object(n.useState)(0)),L=Object(G.a)(_,2),I=L[0],k=L[1],N=Object(n.useState)(0),x=Object(G.a)(N,2),A=x[0],D=x[1],R=Object(n.useState)(0),U=Object(G.a)(R,2),H=U[0],F=U[1],M=t.params,B=M.id,z=M.classId;return Object(n.useEffect)((function(){T.get("/teacher/getExerciseByClass",{params:{classID:z,studentID:B}}).then((function(e){o(e.result.list)})),T.get("/public/getClassById?id="+z).then((function(e){m(e.result.bulletin)}))}),[]),Object(n.useEffect)((function(){T.get("/teacher/getStudentExerciseByClass",{params:{classId:z,studentId:B,page:g,pageSize:O}}).then((function(e){var t=e.result,a=t.total,n=t.list,r=t.correct,c=t.wrong;f(n),k(a),D(r),F(c)}))}),[g,O]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Exercise "))),r.a.createElement(b.a,null,u&&r.a.createElement("div",{className:"class-bulletin rich-text",dangerouslySetInnerHTML:{__html:u}}),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Class"),r.a.createElement("th",null,"Homework"),r.a.createElement("th",null,"Due Date"),r.a.createElement("th",null,"Progress Tracker"),r.a.createElement("th",null,"Accuracy Tracker"),r.a.createElement("th",null))),r.a.createElement("tbody",null,l.map((function(e){var t;return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.student.name),r.a.createElement("td",null,null===(t=e.classId)||void 0===t?void 0:t.name),r.a.createElement("td",null,e.homeworkId.name),r.a.createElement("td",null,e.homeworkId.dueDate?e.homeworkId.dueDate.split("T")[0]:"","\xa0",new Date(e.homeworkId.dueDate)<new Date&&e.questionList.some((function(e){return!e.answeredAt}))&&r.a.createElement(Q.a,{variant:"danger"},"overdue")),r.a.createElement("td",null,e.questionList.filter((function(e){return e.answeredAt})).length," / ",e.questionList.length),r.a.createElement("td",null,dt(e)," / ",e.questionList.length),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/student/exercise/".concat(e._id)},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},"Detail"))))}))))),r.a.createElement(q.a,{className:"align-items-center",style:{marginTop:"30px"}},r.a.createElement(P.a,null,r.a.createElement("h2",null,"Resource Records"),r.a.createElement("p",null,"Progress Tracker: ",A+H," / ",I,"\xa0\xa0\xa0\xa0Accuracy Tracker: ",A," / ",I),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Question"),r.a.createElement("th",null,"Answer"),r.a.createElement("th",null,"Correct Answer"),r.a.createElement("th",null,"Corrections"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,E.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.question.name),r.a.createElement("td",null,e.answer),r.a.createElement("td",null,e.question.correctAnswer),r.a.createElement("td",null,e.isCorrect?r.a.createElement("div",{className:"question-correct-right",style:{marginTop:0}}):r.a.createElement("div",{className:"question-correct-wrong",style:{marginTop:0}})),r.a.createElement("td",null,e.createdAt.substring(0,10)))})))),r.a.createElement(Oe.a,{class:"profile-pagination",count:Math.ceil(I/O),page:g,onChange:function(e,t){y(t)}}))))},qt=["A","B","C","D"],Pt=function(e){e.history;var t=e.match,a=Object(n.useState)([]),c=Object(G.a)(a,2),l=c[0],i=c[1],s=Object(o.c)((function(e){return e.userLogin})).userInfo;return Object(n.useEffect)((function(){T.get("/user/getStudentExerciseDetail?id=".concat(t.params.id)).then((function(e){var t=e.result.questionList;i(t)}))}),[]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Exercise Detail"))),r.a.createElement(b.a,null,r.a.createElement("div",null,l.map((function(e,t){var a=e.question;return r.a.createElement("div",{className:"question question-border",key:a._id},r.a.createElement("div",{className:"question-title"},"Question ",t+1),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:a.qText}}),"0"===a.isChoice&&r.a.createElement("div",{className:"question-options"},qt.map((function(t,n){return r.a.createElement(V.a.Check,{key:t,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(t),name:e._id,checked:e.answer===t,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a["answer".concat(t)]}}))))})),Number(a.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",name:e._id,checked:"E"===e.answer,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a.answerE}}))))),"1"===a.isChoice&&r.a.createElement("div",{className:"question-options"},qt.map((function(t,n){return r.a.createElement(V.a.Check,{key:t,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(t),name:e._id,checked:e.answer.split(",").includes(t),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a["answer".concat(t)]}}))))})),Number(a.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",name:e._id,checked:e.answer.split(",").includes("E"),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a.answerE}}))))),"2"===a.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,value:e.answer,disabled:!0})),e.content&&"<p><br></p>"!==e.content&&r.a.createElement("div",null,r.a.createElement("div",{className:"question-sub-title"},"Answer content"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",a.correctAnswer),mt(e),"Student"===s.role&&r.a.createElement("div",{className:"question-solution"},r.a.createElement("div",{className:"question-sub-title"},"Solution"),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:a.description}})))})))))},Ht=function(e){e.history;var t=e.match,a=Object(n.useState)([]),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(G.a)(i,2),u=s[0],m=s[1],d=t.params,h=d.studentId,E=d.classId;return Object(n.useEffect)((function(){T.get("/user/getStudentExerciseList",{params:{studentId:h,classId:E}}).then((function(e){o(e.result.list)})),T.get("/public/getClassById?id="+E).then((function(e){m(e.result.bulletin)}))}),[]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"My Students Exercise "))),r.a.createElement(b.a,null,u&&r.a.createElement("div",{className:"class-bulletin rich-text",dangerouslySetInnerHTML:{__html:u}}),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Class"),r.a.createElement("th",null,"HomeWork"),r.a.createElement("th",null,"Due Date"),r.a.createElement("th",null,"Progress Tracker"),r.a.createElement("th",null,"Accuracy Tracker"))),r.a.createElement("tbody",null,l.map((function(e){var t;return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.student.name),r.a.createElement("td",null,null===(t=e.classId)||void 0===t?void 0:t.name),r.a.createElement("td",null,e.homeworkId.name),r.a.createElement("td",null,e.homeworkId.dueDate?e.homeworkId.dueDate.split("T")[0]:"","\xa0",new Date(e.homeworkId.dueDate)<new Date&&e.questionList.some((function(e){return!e.answeredAt}))&&r.a.createElement(Q.a,{variant:"danger"},"overdue")),r.a.createElement("td",null,e.questionList.filter((function(e){return e.answeredAt})).length," / ",e.questionList.length),r.a.createElement("td",null,dt(e)," / ",e.questionList.length),r.a.createElement("td",null,r.a.createElement(j.LinkContainer,{to:"/student/exercise/".concat(e._id)},r.a.createElement(w.a,{variant:"light",className:"btn-sm"},"Detail"))))}))))))},Gt=function(e){e.location;var t=e.history,a=Object(n.useState)(""),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(G.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),h=Object(G.a)(d,2),E=h[0],f=h[1],p=Object(n.useState)(""),v=Object(G.a)(p,2),b=v[0],g=v[1],y=Object(n.useState)(""),S=Object(G.a)(y,2),C=S[0],O=S[1],_=Object(n.useState)(!1),j=Object(G.a)(_,2),L=j[0],I=(j[1],Object(n.useState)(60)),k=Object(G.a)(I,2),N=k[0],x=k[1],A=Object(n.useState)(!1),D=Object(G.a)(A,2),R=D[0],U=D[1];return Object(n.useEffect)((function(){var e=null;return R&&N>0?e=setInterval((function(){x((function(e){return e-1}))}),1e3):0===N&&U(!1),function(){return clearInterval(e)}}),[R,N]),r.a.createElement(ie,null,r.a.createElement("h1",null,"Reset Password"),C&&r.a.createElement(Z,{variant:"danger"},C),L&&r.a.createElement(te,null),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),l?u?E===b?T.post("/login/resetPassword",{email:l,code:Number(u),password:E}).then((function(){t.push("/login")})).catch((function(e){O(e.msg)})):O("Passwords do not match"):O("Please enter code"):O("Please enter email")}},r.a.createElement(V.a.Group,{controlId:"email"},r.a.createElement(V.a.Label,null,"Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter email",value:l,onChange:function(e){return o(e.target.value)},style:{width:"calc(100% - 82px)",display:"inline-block"}}),r.a.createElement(w.a,{variant:"primary",onClick:function(){U(!0),x(60),T.post("/login/sendEmail",{email:l}).catch((function(e){O(e.msg)}))},disabled:R,style:{height:"45px",width:"82px"}},R?"".concat(N,"s"):"Send")),r.a.createElement(V.a.Group,{controlId:"code"},r.a.createElement(V.a.Label,null,"Code"),r.a.createElement(V.a.Control,{placeholder:"Enter code",value:u,onChange:function(e){return m(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"password"},r.a.createElement(V.a.Label,null,"Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter new password",value:E,onChange:function(e){return f(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"password"},r.a.createElement(V.a.Label,null,"Confirm Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Confirm password",value:b,onChange:function(e){return g(e.target.value)}})),r.a.createElement(w.a,{type:"submit",variant:"primary"},"Reset")))},Ft=function(e){e.history,e.match;var t=Object(n.useState)([]),a=Object(G.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(G.a)(m,2),h=d[0],E=d[1],f=Object(n.useState)({}),p=Object(G.a)(f,2),v=p[0],g=p[1],y=Object(n.useState)(0),S=Object(G.a)(y,2),C=S[0],O=S[1],_=Object(n.useState)(!1),j=Object(G.a)(_,2),L=j[0],I=j[1],k=Object(n.useState)(null),N=Object(G.a)(k,2),x=N[0],A=N[1],D=Object(n.useState)(""),R=Object(G.a)(D,2),U=R[0],H=R[1],F=Object(n.useState)(!1),M=Object(G.a)(F,2),B=M[0],Q=M[1],z=Re(),W=function(){u(!0),T.get("/admin/getAuditClasses",{params:{language:window.localStorage.getItem("lang")||"en"}}).then((function(e){l(e.result.list),u(!1)})).catch((function(e){E(e.msg),u(!1)}))},Y=function(){I(!0)},J=function(){I(!1)},X=function(){T.get("/public/getHomeDetail").then((function(e){H(e.result.introduction)}))};return Object(n.useEffect)((function(){W(),X()}),[]),Object(n.useEffect)((function(){return function(){null!=x&&(x.destroy(),A(null))}}),[x]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Audit Classes "))),s?r.a.createElement(te,null):h?r.a.createElement(Z,{variant:"danger"},h):r.a.createElement(b.a,null,c.length>0?r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"ORDER INDEX"),r.a.createElement("th",null,"TEACHER NAME"),r.a.createElement("th",null,"CATEGORY"),r.a.createElement("th",null,"Start "),r.a.createElement("th",null,"End "),r.a.createElement("th",null,"Audit"))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.orderIndex),r.a.createElement("td",null,e.user.name),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.startDate.split("T")[0]),r.a.createElement("td",null,e.endDate.split("T")[0]),r.a.createElement("td",null,r.a.createElement(w.a,{variant:"light",className:"btn-sm",onClick:function(){return function(e){var t=e._id,a=e.isPublish;T.post("/admin/auditClass",{id:t,isPublish:2===a?1:2}).then((function(e){W()}))}(e)}},r.a.createElement("i",{className:"fas fa-fire",style:{color:2===e.isPublish?"red":"#FFE7A0"}})),r.a.createElement(w.a,{variant:"light",className:"btn-sm",onClick:function(){return function(e){var t=e.orderIndex;g(e),O(t),Y()}(e)}},r.a.createElement("i",{className:"fas fa-sort"})),r.a.createElement(w.a,{variant:"danger",className:"btn-sm",onClick:function(){return function(e){if(window.confirm("Are you sure")){var t=e._id;T.post("/admin/auditClass",{id:t,isPublish:0}).then((function(e){W()}))}}(e)}},r.a.createElement("i",{className:"fas fa-trash"}))))})))):r.a.createElement(Z,{variant:"info"},"No class found, change language or search again")),r.a.createElement(de.a,{show:L,onHide:J},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Set Order Index")),r.a.createElement(de.a.Body,null,r.a.createElement(V.a.Group,{controlId:"index"},r.a.createElement(V.a.Label,null,"Index"),r.a.createElement(V.a.Control,{type:"number",placeholder:"Enter index",value:C,onChange:function(e){return O(e.target.value)}}))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:J},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){var e=v._id,t=v.isPublish;T.post("/admin/auditClass",{id:e,isPublish:t,orderIndex:C}).then((function(e){W(),J()}))}},"Audit"))),r.a.createElement(q.a,{className:"align-items-center",style:{marginTop:"30px"}},r.a.createElement(P.a,null,r.a.createElement("h2",null,"Home introduction "))),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100,margin:"20px 0"}},r.a.createElement(je.b,{editor:x,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:z,value:U,onCreated:A,onChange:function(e){return H(e.getHtml())},mode:"default",style:{height:"300px",overflowY:"hidden"}})),r.a.createElement(w.a,{variant:"primary",onClick:function(){Q(!0),T.post("/admin/setHomeDetail",{introduction:U}).then((function(e){X(),Q(!1)})).catch((function(e){Q(!1)}))}},B?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"SAVE"))},Mt=a(518),Bt=a.n(Mt),Qt={0:"Pending",1:"Sent",2:"Failed",3:"Partially successful"},zt=function(e){var t=e.history,a=(e.match,Object(n.useState)([])),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(1),s=Object(G.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(10),h=Object(G.a)(d,2),E=h[0],f=(h[1],Object(n.useState)(0)),p=Object(G.a)(f,2),v=p[0],g=p[1],y=Object(n.useState)(!1),S=Object(G.a)(y,2),C=S[0],O=S[1],_=Object(n.useCallback)((function(){T.get("/admin/getEmails",{params:{page:u,pageSize:E}}).then((function(e){var t=e.result,a=t.list,n=t.total;a.forEach((function(e){e.selected=!1})),O(!1),o(a),g(n)}))}),[u,E]);return Object(n.useEffect)((function(){_()}),[_]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Email ")),r.a.createElement(P.a,{className:"text-right"},r.a.createElement(w.a,{className:"mr-3",onClick:function(){t.push("/admin/sendEmail")}},"Send Email"),r.a.createElement(w.a,{variant:"danger",className:"my-3",onClick:function(){var e=l.filter((function(e){return e.selected})).map((function(e){return e._id}));0!==e.length&&window.confirm("Are you sure")&&T.post("/admin/deleteEmail",{ids:e}).then((function(e){_()}))}},"Delete Email"))),r.a.createElement(b.a,null,r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{checked:C,type:"checkbox",onClick:function(){var e=Object(W.a)(l);e.forEach((function(e){e.selected=!C})),o(e),O(!C)}})),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"recipient"),r.a.createElement("th",null,"Group"),r.a.createElement("th",null,"Create"),r.a.createElement("th",null,"Status"),r.a.createElement("td",null))),r.a.createElement("tbody",null,l.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:e.selected,onClick:function(){return function(e){var t=Object(W.a)(l);t[e].selected=!t[e].selected,o(t)}(t)}})),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.recipient.join(", ")),r.a.createElement("td",null,e.emailGroup.map((function(e){return e.name})).join(", ")),r.a.createElement("td",null,new Date(e.createdAt).toLocaleString()),r.a.createElement("td",null,Qt[e.status]),r.a.createElement("td",null,r.a.createElement(w.a,{variant:"light",className:"btn-sm",onClick:function(){return t=e._id,void(window.confirm("Are you sure")&&T.post("/admin/deleteEmail",{ids:[t]}).then((function(e){_()})));var t}},r.a.createElement("i",{className:"fas fa-trash"}))))})))),r.a.createElement(Bt.a,{className:"react-paginate",breakLabel:"...",nextLabel:"next >",onPageChange:function(e){var t=e.selected;m(t+1)},pageRangeDisplayed:5,pageCount:Math.ceil(v/E),previousLabel:"< previous",renderOnZeroPageCount:null})))},Wt=function(e){e.location,e.history;var t=Object(n.useState)(""),a=Object(G.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),i=Object(G.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(G.a)(m,2),h=d[0],E=d[1],f=Object(n.useState)([]),p=Object(G.a)(f,2),v=p[0],b=p[1],g=Object(n.useRef)([]),y=Object(n.useState)(!1),S=Object(G.a)(y,2),C=S[0],O=S[1],_=Object(n.useState)([]),j=Object(G.a)(_,2),L=j[0],I=j[1],k=Object(n.useState)(""),N=Object(G.a)(k,2),x=N[0],A=N[1],D=Object(n.useState)([]),R=Object(G.a)(D,2),U=R[0],q=R[1],P=Object(n.useState)([]),H=Object(G.a)(P,2),F=H[0],M=H[1],B=Object(n.useRef)([]),Q=Object(n.useState)(""),z=Object(G.a)(Q,2),Y=z[0],J=z[1],X=Object(n.useState)(!1),$=Object(G.a)(X,2),K=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(G.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useState)(!1),oe=Object(G.a)(le,2),ie=oe[0],se=oe[1],ue=Object(n.useState)([]),he=Object(G.a)(ue,2),Ee=he[0],fe=he[1],pe=Object(n.useState)(!1),ve=Object(G.a)(pe,2),be=ve[0],ge=ve[1],ye=Object(n.useState)(""),Se=Object(G.a)(ye,2),Ce=Se[0],we=Se[1],Oe=Object(n.useState)(""),_e=Object(G.a)(Oe,2),Le=_e[0],Ie=_e[1],ke=Object(n.useState)({}),Ne=Object(G.a)(ke,2),xe=Ne[0],Te=Ne[1],Ae=Object(n.useState)(!1),De=Object(G.a)(Ae,2),qe=De[0],Pe=De[1],He=Object(n.useState)(!1),Ge=Object(G.a)(He,2),Fe=Ge[0],Me=Ge[1],Be=Object(n.useState)(""),Qe=Object(G.a)(Be,2),ze=Qe[0],We=Qe[1],Ye=Object(n.useState)(""),Ve=Object(G.a)(Ye,2),Je=Ve[0],Xe=Ve[1],$e=Re(),Ke=function(){T.get("/admin/getGroupEmails").then((function(e){var t=e.result.list;t.forEach((function(e){e.checked=!1})),q(Object(W.a)(t)),B.current=Object(W.a)(t)}))},Ze=function(){var e=Object(W.a)(g.current);e.forEach((function(e){e.checked=!1})),I(Object(W.a)(e)),A(""),Ie(""),fe([]),se(!1),ge(!1),we("")},et=function(){O(!1),Ze()},tt=function(e){var t=L.findIndex((function(t){return t._id===e})),a=Object(W.a)(L);a[t].checked=!a[t].checked,I(a);var n=g.current.findIndex((function(t){return t._id===e}));g.current[n].checked=a[t].checked},at=function(){te(!1)},nt=function(){Ze(),ce(!1)};return Object(n.useEffect)((function(){T.get("/admin/getUsers").then((function(e){var t=e.result.list;t.forEach((function(e){e.checked=!1})),I(Object(W.a)(t)),g.current=Object(W.a)(t)})),Ke()}),[]),Object(n.useEffect)((function(){if(x){var e=Object(W.a)(g.current).filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())||e.email.toLowerCase().includes(x.toLowerCase())}));I(e)}else I(Object(W.a)(g.current))}),[x]),Object(n.useEffect)((function(){if(Ce){var e=Object(W.a)(g.current).filter((function(e){return e.name.toLowerCase().includes(Ce.toLowerCase())||e.email.toLowerCase().includes(Ce.toLowerCase())}));e=e.filter((function(e){return!Ee.find((function(t){return t._id===e._id}))})),I(e)}else{var t=Object(W.a)(g.current).filter((function(e){return!Ee.find((function(t){return t._id===e._id}))}));I(t)}}),[Ee,Ce]),Object(n.useEffect)((function(){if(Y){var e=Object(W.a)(B.current).filter((function(e){return e.name.toLowerCase().includes(Y.toLowerCase())}));q(e)}else q(Object(W.a)(B.current))}),[Y]),Object(n.useEffect)((function(){return function(){null!=s&&(s.destroy(),u(null))}}),[s]),r.a.createElement("div",null,ze&&r.a.createElement(Z,{variant:"danger"},ze),Je&&r.a.createElement(Z,{variant:"success"},Je),r.a.createElement("h1",null,"Email"),r.a.createElement(V.a,{onSubmit:function(e){if(e.preventDefault(),c)if(h)if(v.length||F.length){var t={title:c,content:h,recipient:v,emailGroup:F.map((function(e){return e._id}))};Me(!0),We(""),Xe(""),T.post("/admin/sendEmail",t).then((function(e){Me(!1);var t=e.result;"2"===t.status?We("Email sent failed"):"3"===t.status?We("".concat(t.failEmails.join(", ")," sent failed")):"1"===t.status&&Xe("Email sent successfully"),l(""),E(""),b([]),M([]),s.clear()}))}else alert("Please select recipients");else alert("Please input content");else alert("Please input title")}},r.a.createElement(V.a.Group,{controlId:"title"},r.a.createElement(V.a.Label,null,"Title"),r.a.createElement(V.a.Control,{placeholder:"Enter title",value:c,onChange:function(e){return l(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"recipient"},r.a.createElement(V.a.Label,null,"Recipient"),r.a.createElement("div",{onClick:function(){O(!0),g.current.forEach((function(e){e.checked=v.includes(e.email)}))}},r.a.createElement(V.a.Control,{placeholder:"Select Recipient",value:v.join(", "),disabled:!0}))),r.a.createElement(V.a.Group,{controlId:"group"},r.a.createElement(V.a.Label,null,"Group"),r.a.createElement("div",{onClick:function(){te(!0)}},r.a.createElement(V.a.Control,{placeholder:"Select Group",value:F.map((function(e){return e.name})).join(", "),disabled:!0}))),r.a.createElement(V.a.Group,{controlId:"content"},r.a.createElement(V.a.Label,null,"Content"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:s,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:$e,value:h,onCreated:u,onChange:function(e){return E(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}}))),r.a.createElement(w.a,{type:"submit",variant:"primary",disabled:Fe},Fe?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Send")),r.a.createElement(de.a,{show:C,onHide:et,size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"User")),r.a.createElement(de.a.Body,null,r.a.createElement("div",{className:"transfer-search"},r.a.createElement(V.a.Control,{type:"text",placeholder:"user name or email",value:x,onChange:function(e){return A(e.target.value)}})),r.a.createElement("div",{style:{height:"600px",overflowY:"auto"}},r.a.createElement(me.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Role"))),r.a.createElement("tbody",null,L.map((function(e){return r.a.createElement("tr",{key:e._id,onClick:function(){return tt(e._id)}},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:e.checked})),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.role))})))))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:et},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){var e=Object(W.a)(g.current).filter((function(e){return e.checked})).map((function(e){return e.email}));b(e),et()}},"Select"))),r.a.createElement(de.a,{show:K,onHide:at,size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Group")),r.a.createElement(de.a.Body,null,r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(w.a,{size:"sm",variant:"primary",onClick:function(){ce(!0),Te({})}}," ",r.a.createElement("i",{className:"fas fa-plus"}),"Add Group")),r.a.createElement("div",{className:"transfer-search"},r.a.createElement(V.a.Control,{type:"text",placeholder:"group name",value:Y,onChange:function(e){return J(e.target.value)}})),r.a.createElement("div",{style:{height:"600px",overflowY:"auto"}},r.a.createElement(me.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",checked:qe,onClick:function(){var e=Object(W.a)(U);e.forEach((function(e){e.checked=!qe})),q(e),Pe(!qe)}})),r.a.createElement("th",{width:"350"},"Name"),r.a.createElement("th",null))),r.a.createElement("tbody",null,U.map((function(e){return r.a.createElement("tr",{key:e._id,onClick:function(){return function(e){var t=U.findIndex((function(t){return t._id===e})),a=Object(W.a)(U);a[t].checked=!a[t].checked,q(a);var n=B.current.findIndex((function(t){return t._id===e}));B.current[n].checked=a[t].checked}(e._id)}},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:e.checked})),r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement(w.a,{size:"sm",variant:"primary",style:{marginRight:"10px"},onClick:function(t){return function(e,t){e.stopPropagation();var a=U.find((function(e){return e._id===t})),n=a.recipient,r=Object(W.a)(g.current).filter((function(e){return n.includes(e._id)}));fe(Object(W.a)(r)),Ie(a.name),ce(!0),Te(a)}(t,e._id)}},"Edit"),r.a.createElement(w.a,{size:"sm",variant:"danger",onClick:function(t){return function(e,t){e.stopPropagation(),window.confirm("Are you sure to delete this group?")&&T.post("/admin/deleteGroupEmail",{id:t}).then((function(e){Ke()}))}(t,e._id)}},"Delete")))})))))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:at},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){var e=Object(W.a)(B.current).filter((function(e){return e.checked}));M(Object(W.a)(e)),at()}},"Select"))),r.a.createElement(de.a,{show:re,onHide:nt,size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Group")),r.a.createElement(de.a.Body,null,r.a.createElement(V.a.Group,{controlId:"groupName"},r.a.createElement(V.a.Label,null,"Group Name"),r.a.createElement(V.a.Control,{placeholder:"Enter group name",value:Le,onChange:function(e){return Ie(e.target.value)}})),r.a.createElement("div",{className:"transfer-container"},r.a.createElement("div",{className:"transfer-content"},r.a.createElement("div",{className:"transfer-content-header"},r.a.createElement("input",{type:"checkbox",checked:ie,onClick:function(){var e=Object(W.a)(L);e.forEach((function(e){e.checked=!ie,g.current.find((function(t){return t._id===e._id})).checked=e.checked})),I(e),se(!ie)}})),r.a.createElement("div",{className:"transfer-search"},r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter name or email",value:Ce,onChange:function(e){return we(e.target.value)}})),r.a.createElement("div",{className:"transfer-list"},L.map((function(e,t){return r.a.createElement("div",{className:"transfer-list-item",key:e._id,onClick:function(){return tt(e._id)}},r.a.createElement("input",{type:"checkbox",checked:e.checked}),r.a.createElement("div",{className:"transfer-list-text"},e.name,"(",e.email,")"))})))),r.a.createElement("div",{className:"transfer-btns"},r.a.createElement(w.a,{type:"submit",variant:"primary",onClick:function(){var e=Object(W.a)(Ee).filter((function(e){return!e.checked||(e.checked=!1,!1)}));fe(Object(W.a)(e))}},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement(w.a,{type:"submit",variant:"primary",onClick:function(){var e=Object(W.a)(g.current).filter((function(e){return!!e.checked&&(e.checked=!1,!0)}));fe([].concat(Object(W.a)(Ee),Object(W.a)(e)))}},r.a.createElement("i",{className:"fas fa-arrow-right"}))),r.a.createElement("div",{className:"transfer-content"},r.a.createElement("div",{className:"transfer-content-header"},r.a.createElement("input",{type:"checkbox",checked:be,onClick:function(){var e=Object(W.a)(Ee);e.forEach((function(e){e.checked=!be})),fe(e),ge(!be)}})),r.a.createElement("div",{className:"transfer-list"},Ee.map((function(e,t){return r.a.createElement("div",{className:"transfer-list-item",key:e._id,onClick:function(){return function(e){var t=Ee.findIndex((function(t){return t._id===e})),a=Object(W.a)(Ee);a[t].checked=!a[t].checked,fe(a)}(e._id)}},r.a.createElement("input",{type:"checkbox",checked:e.checked}),r.a.createElement("div",{className:"transfer-list-text"},e.name,"(",e.email,")"))})))))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:nt},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){Le?Ee.length?xe._id?T.post("/admin/editGroupEmail",{id:xe._id,name:Le,users:Ee.map((function(e){return e._id}))}).then((function(e){nt(),Ke()})):T.post("/admin/addGroupEmail",{name:Le,users:Ee.map((function(e){return e._id}))}).then((function(e){nt(),Ke()})):alert("Please select users"):alert("Please input group name")}},xe._id?"Edit":"Add"))))},Yt=function(e){e.history;var t=e.match.params.id,a=Object(n.useState)([]),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(G.a)(i,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){T.get("/user/getExerciseByClassId?id=".concat(t)).then((function(e){o(e.result.list)})),T.get("/public/getClassById?id="+t).then((function(e){m(e.result.bulletin)}))}),[]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Homework "))),r.a.createElement(b.a,null,u&&r.a.createElement("div",{className:"class-bulletin rich-text",dangerouslySetInnerHTML:{__html:u}}),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Due Date"),r.a.createElement("th",null,"Progress Tracker"),r.a.createElement("th",null,"Accuracy Tracker"),r.a.createElement("th",null))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.homeworkId.name),r.a.createElement("td",null,e.homeworkId.dueDate?e.homeworkId.dueDate.split("T")[0]:"","\xa0",new Date(e.homeworkId.dueDate)<new Date&&e.questionList.some((function(e){return!e.answeredAt}))&&r.a.createElement(Q.a,{variant:"danger"},"overdue")),r.a.createElement("td",null,e.questionList.filter((function(e){return e.answeredAt})).length," / ",e.questionList.length),r.a.createElement("td",null,dt(e)," / ",e.questionList.length),r.a.createElement("td",null,e.questionList.filter((function(e){return e.answeredAt})).length===e.questionList.length?r.a.createElement(j.LinkContainer,{to:"/student/exercise/".concat(e._id)},r.a.createElement(w.a,{variant:"info",className:"btn-sm"},"View details")):r.a.createElement(j.LinkContainer,{to:"/student/exerciseEdit/".concat(e._id)},r.a.createElement(w.a,{variant:"info",className:"btn-sm"},"start learning"))))}))))))},Vt=["A","B","C","D"],Jt=function(e){var t=e.match,a=Object(n.useState)([]),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(-1),s=Object(G.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),h=Object(G.a)(d,2),E=h[0],f=h[1],p=Object(n.useState)(0),v=Object(G.a)(p,2),g=v[0],y=v[1],S=Object(n.useState)(!1),C=Object(G.a)(S,2),O=C[0],_=C[1],j=Object(n.useState)(!1),L=Object(G.a)(j,2),I=L[0],k=L[1],N=Object(n.useRef)([]),x=t.params,A=x.homeworkId,D=x.classId,R=Object(n.useRef)(null),U=Object(n.useState)([]),q=Object(G.a)(U,2),P=q[0],H=q[1],F=Object(n.useState)(!1),M=Object(G.a)(F,2),B=M[0],Q=M[1],z=Object(n.useState)(!1),Y=Object(G.a)(z,2),J=Y[0],X=Y[1],$=Object(n.useState)(null),K=Object(G.a)($,2),Z=K[0],ae=K[1],ne=Object(n.useState)(""),re=Object(G.a)(ne,2),ce=re[0],le=re[1],oe=Object(n.useState)(""),ie=Object(G.a)(oe,2),se=ie[0],ue=ie[1],me=Object(n.useState)({}),he=Object(G.a)(me,2),Ee=he[0],fe=he[1],pe=Object(n.useState)(!1),ve=Object(G.a)(pe,2),be=ve[0],ge=ve[1],ye=Re(),Se=function(e){if(R.current=e,l.length>0){var t=l.findIndex((function(t){return t._id===e}));m(t)}_(!0),N.current.forEach((function(e,t){e&&(e.destroy(),N.current[t]=null)})),function(e){T.get("/user/getStudentExerciseDetail?id=".concat(e)).then((function(e){var t=e.result,a=t.questionList,n=t.correctionStatus,r=t.student;_(!1),f(a),y(n),fe(r)}))}(e)},Ce=function(e,t){var a=Object(W.a)(E),n=a[t];T.post("/teacher/correctExercise",{questionId:n._id,exerciseId:R.current,comments:N.current[t].getHtml(),isCorrect:e}).then((function(n){a[t].isCorrect=e,f(a)}))},we=function(){X(!1)};return Object(n.useEffect)((function(){_(!0),T.get("/teacher/getExerciseByClassAndHomework",{params:{classID:D,hwID:A}}).then((function(e){o(e.result.list),e.result.list.length>0&&(m(0),Se(e.result.list[0]._id))}))}),[]),Object(n.useEffect)((function(){return function(){null!=Z&&(J||(Z.destroy(),ae(null)))}}),[Z,J]),r.a.createElement("div",null,r.a.createElement("h1",null,"Correct Exercise"),r.a.createElement("div",{className:"correction-exercise-list"},!B&&l.length>0&&r.a.createElement("div",{className:"correction-exercise-list-scroll"},r.a.createElement("div",{className:"correction-exercise-list-con"},l.map((function(e,t){return r.a.createElement("div",{key:e._id,className:"correction-exercise-list-item ".concat(u===t?"active":""),onClick:function(){return Se(e._id)}},r.a.createElement("div",null,e.student.name,"(",e.questionList.filter((function(e){return e.answeredAt})).length,"/",e.questionList.length,") (",dt(e),"/",e.questionList.length,")","1"===e.correctionStatus&&r.a.createElement("span",{style:{color:"red"}},"(\u5b8c)")))})))),r.a.createElement("div",{className:"correction-exercise-list-bot",onClick:function(){Q(!B)}},B?r.a.createElement("div",{className:"icon up"}):r.a.createElement("div",{className:"icon down"}))),O?r.a.createElement(te,null):r.a.createElement(b.a,null,r.a.createElement("div",null,E.map((function(e,t){var a=e.question;return r.a.createElement("div",{className:"question question-border",key:a._id},r.a.createElement("div",{className:"question-title"},"Question ",t+1),r.a.createElement("div",{className:"question-level"},"level: ",a.difficuty),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:a.qText}}),"0"===a.isChoice&&r.a.createElement("div",{className:"question-options"},Vt.map((function(t,n){return r.a.createElement(V.a.Check,{key:t,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(t),name:e._id,checked:e.answer===t,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a["answer".concat(t)]}}))))})),Number(a.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",name:e._id,checked:"E"===e.answer,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a.answerE}}))))),"1"===a.isChoice&&r.a.createElement("div",{className:"question-options"},Vt.map((function(t,n){return r.a.createElement(V.a.Check,{key:t,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(t),name:e._id,checked:e.answer.split(",").includes(t),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a["answer".concat(t)]}}))))})),Number(a.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",name:e._id,checked:e.answer.split(",").includes("E"),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:a.answerE}}))))),"2"===a.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,value:e.answer,disabled:!0})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",a.correctAnswer),r.a.createElement("div",{className:"question-sub-title"},"Corrections"),function(e){var t,a=e.isCorrect,n=e.autoCorrect;return(t=void 0===a||null===a?n:a)?r.a.createElement("div",{className:"question-correct-right"}):!1===t?r.a.createElement("div",{className:"question-correct-wrong"}):""}(e),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100,marginTop:"20px"}},N.current[t]&&r.a.createElement(je.b,{key:P[t],editor:N.current[t],defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ye,value:e.comments,onCreated:function(e){return function(e,t){N.current[t]=e;var a=Object(W.a)(P);a[t]=e.id,H(a)}(e,t)},mode:"default",style:{height:"300px",overflowY:"hidden"}})),r.a.createElement("div",{className:"question-correct-btn"},r.a.createElement(w.a,{disabled:e.loading||!e.answeredAt,onClick:function(){return function(e){var t=Object(W.a)(E),a=t[e];a.loading=!0,f(t),T.post("/teacher/correctExercise",{questionId:a._id,exerciseId:R.current,comments:N.current[e].getHtml(),isCorrect:a.isCorrect}).then((function(t){var a=Object(W.a)(E);a[e].loading=!1,a[e].comments=N.current[e].getHtml(),f(a)})).catch((function(t){var a=Object(W.a)(E);a[e].loading=!1,f(a)}))}(t)}},e.loading?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"SUBMIT COMMENTS")),r.a.createElement("div",{className:"question-sub-title"},"Right/Wrong"),r.a.createElement("div",{className:"question-correct-btn"},r.a.createElement(w.a,{disabled:!e.answeredAt,variant:"success",style:{marginRight:"10px"},onClick:function(){return Ce(!0,t)}},"Right"),r.a.createElement(w.a,{disabled:!e.answeredAt,variant:"danger",onClick:function(){return Ce(!1,t)}},"Wrong")),e.content&&"<p><br></p>"!==e.content&&r.a.createElement("div",null,r.a.createElement("div",{className:"question-sub-title"},"Answer content"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})),r.a.createElement("div",{className:"question-solution"},r.a.createElement("div",{className:"question-sub-title"},"Solution"),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:a.description}})))})),r.a.createElement("div",{className:"question-finish-btn"},r.a.createElement(w.a,{variant:"0"===g?"primary":"success",className:"mr-2",disabled:I||"1"===g,onClick:function(){k(!0),T.post("/teacher/finishCorrection",{exerciseId:R.current}).then((function(e){k(!1),y("1");var t=Object(W.a)(l);t.find((function(e){return e._id===R.current})).correctionStatus="1",o(t)})).catch((function(e){k(!1)}))}},"0"===g?I?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"FINISH":"DONE"),"1"===g&&r.a.createElement(w.a,{onClick:function(){X(!0),le("\u4f5c\u4e1a\u6279\u6539\u5b8c\u6210\u901a\u77e5"),ue("".concat(Ee.name,"\uff0c\u4f60\u7684\u4f5c\u4e1a\u5df2\u7ecf\u6279\u6539\u5b8c\u6210\uff0c\u8bf7\u5c3d\u5feb\u67e5\u9605\u3002"))}},"SEND EMAIL")))),r.a.createElement(de.a,{size:"lg",show:J,onHide:we},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Send Email")),r.a.createElement(de.a.Body,null,r.a.createElement(V.a.Group,{controlId:"title"},r.a.createElement(V.a.Label,null,"Title"),r.a.createElement(V.a.Control,{placeholder:"Enter title",value:ce,onChange:function(e){return le(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"content"},r.a.createElement(V.a.Label,null,"Content"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100}},r.a.createElement(je.b,{editor:Z,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:ye,value:se,onCreated:ae,onChange:function(e){return ue(e.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}})))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:we},"Close"),r.a.createElement(w.a,{disabled:be,variant:"primary",onClick:function(){ge(!0),T.post("/teacher/sendCorrectionEmail",{email:Ee.email,title:ce,content:se}).then((function(e){we(),ge(!1)})).catch((function(e){ge(!1)}))}},be?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Send"))))},Xt=a(976),$t=a(978),Kt=a(973),Zt=a(975),ea=a(977),ta=a(972),aa=a(971),na=a(974),ra=a(370),ca=a.n(ra),la=a(369),oa=a.n(la);function ia(e){var t=e.row,a=e.libraryId,n=e.chapterId,c=e.openSectionModal,l=e.deleteSection,o=e.canUp,i=e.canDown,s=e.changeSectionOrder;return r.a.createElement(ta.a,{key:t._id},r.a.createElement(Kt.a,null),r.a.createElement(Kt.a,{component:"th",scope:"row"},t.name),r.a.createElement(Kt.a,null,r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return c(a,n,t._id,t.name)}},r.a.createElement("i",{className:"fas fa-edit"})),o&&r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return s(a,n,t._id,"up")}},r.a.createElement("i",{className:"fas fa-arrow-up"})),i&&r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return s(a,n,t._id,"down")}},r.a.createElement("i",{className:"fas fa-arrow-down"})),r.a.createElement(w.a,{size:"sm",className:"mr-3",variant:"danger",onClick:function(){return l(a,n,t._id)}},r.a.createElement("i",{className:"fas fa-trash"}))))}function sa(e){var t=e.row,a=e.libraryId,c=e.openChatperModal,l=e.deleteChapter,o=e.openSectionModal,i=e.deleteSection,s=e.canUp,u=e.canDown,m=e.changeChapterOrder,d=e.changeSectionOrder,h=Object(n.useState)(!1),E=Object(G.a)(h,2),f=E[0],p=E[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ta.a,{key:t._id},r.a.createElement(Kt.a,null,r.a.createElement(na.a,{"aria-label":"expand row",size:"small",onClick:function(){return p(!f)}},f?r.a.createElement(oa.a,null):r.a.createElement(ca.a,null))),r.a.createElement(Kt.a,{component:"th",scope:"row"},t.name),r.a.createElement(Kt.a,null,r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return o(a,t._id)}},r.a.createElement("i",{className:"fas fa-plus"})," Section"),r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return c(a,t._id,t.name)}},r.a.createElement("i",{className:"fas fa-edit"})),s&&r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return m(a,t._id,"up")}},r.a.createElement("i",{className:"fas fa-arrow-up"})),u&&r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return m(a,t._id,"down")}},r.a.createElement("i",{className:"fas fa-arrow-down"})),r.a.createElement(w.a,{size:"sm",className:"mr-3",variant:"danger",onClick:function(){return l(a,t._id)}},r.a.createElement("i",{className:"fas fa-trash"})))),r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{style:{paddingBottom:0,paddingTop:0},colSpan:4},r.a.createElement(aa.a,{in:f,timeout:"auto",unmountOnExit:!0},r.a.createElement(Zt.a,null,r.a.createElement(Xt.a,{"aria-label":"collapsible table"},r.a.createElement(ea.a,null,r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{width:100}),r.a.createElement(Kt.a,null,"Section Name"),r.a.createElement(Kt.a,{width:500}))),r.a.createElement($t.a,null,t.section.length>0?t.section.map((function(e,n){return r.a.createElement(ia,{libraryId:a,chapterId:t._id,key:e._id,row:e,canUp:n>0,canDown:t.section.length-1!==n,openSectionModal:o,deleteSection:i,changeSectionOrder:d})})):r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{colSpan:3},r.a.createElement(Z,{variant:"info"},"No section found"))))))))))}function ua(e){var t=e.row,a=e.canUp,c=e.canDown,l=e.openLibraryModal,o=e.deleteLibrary,i=e.openChatperModal,s=e.deleteChapter,u=e.openSectionModal,m=e.deleteSection,d=e.openTeacherModal,h=e.changeLibraryOrder,E=e.changeChapterOrder,f=e.changeSectionOrder,p=Object(n.useState)(!1),v=Object(G.a)(p,2),b=v[0],g=v[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ta.a,{key:t._id},r.a.createElement(Kt.a,null,r.a.createElement(na.a,{"aria-label":"expand row",size:"small",onClick:function(){return g(!b)}},b?r.a.createElement(oa.a,null):r.a.createElement(ca.a,null))),r.a.createElement(Kt.a,{component:"th",scope:"row"},t.name),r.a.createElement(Kt.a,{component:"th",scope:"row"},t.teacher?t.teacher.name:""),r.a.createElement(Kt.a,null,r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return i(t._id)}},r.a.createElement("i",{className:"fas fa-plus"})," Chapter"),r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return d(t._id)}},r.a.createElement("i",{className:"fas fa-plus"})," Teacher"),r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return l(t._id,t.name)}},r.a.createElement("i",{className:"fas fa-edit"})),a&&r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return h(t._id,"up")}},r.a.createElement("i",{className:"fas fa-arrow-up"})),c&&r.a.createElement(w.a,{size:"sm",className:"mr-3",onClick:function(){return h(t._id,"down")}},r.a.createElement("i",{className:"fas fa-arrow-down"})),r.a.createElement(w.a,{size:"sm",className:"mr-3",variant:"danger",onClick:function(){return o(t._id)}},r.a.createElement("i",{className:"fas fa-trash"})))),r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{style:{paddingBottom:0,paddingTop:0},colSpan:4},r.a.createElement(aa.a,{in:b,timeout:"auto",unmountOnExit:!0},r.a.createElement(Zt.a,null,r.a.createElement(Xt.a,{"aria-label":"collapsible table"},r.a.createElement(ea.a,null,r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{width:100}),r.a.createElement(Kt.a,null,"Chapter Name"),r.a.createElement(Kt.a,{width:500}))),r.a.createElement($t.a,null,t.chapter.length>0?t.chapter.map((function(e,a){return r.a.createElement(sa,{libraryId:t._id,key:e._id,row:e,canUp:a>0,canDown:t.chapter.length-1!==a,openChatperModal:i,deleteChapter:s,openSectionModal:u,deleteSection:m,changeChapterOrder:E,changeSectionOrder:f})})):r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{colSpan:4},r.a.createElement(Z,{variant:"info"},"No chapter found"))))))))))}function ma(){var e=Object(g.c)().enqueueSnackbar,t=Object(n.useState)(!1),a=Object(G.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),i=Object(G.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(G.a)(m,2),h=d[0],E=d[1],f=Object(n.useState)([]),p=Object(G.a)(f,2),v=p[0],y=p[1],S=Object(n.useState)(!1),C=Object(G.a)(S,2),O=C[0],_=C[1],j=Object(n.useState)(null),L=Object(G.a)(j,2),I=L[0],k=L[1],N=Object(n.useState)(""),x=Object(G.a)(N,2),A=x[0],D=x[1],R=Object(n.useState)(!1),U=Object(G.a)(R,2),H=U[0],F=U[1],M=Object(n.useState)(null),B=Object(G.a)(M,2),Q=B[0],z=B[1],W=Object(n.useState)(""),Y=Object(G.a)(W,2),J=Y[0],X=Y[1],$=Object(n.useState)([]),K=Object(G.a)($,2),ee=K[0],te=K[1],ae=Object(n.useState)(!1),ne=Object(G.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useState)({}),oe=Object(G.a)(le,2),ie=oe[0],se=oe[1],ue=Object(n.useState)(null),me=Object(G.a)(ue,2),he=me[0],Ee=me[1],fe=Re(),pe=Object(n.useState)(""),ve=Object(G.a)(pe,2),be=ve[0],ge=ve[1],ye=Object(n.useState)(0),Se=Object(G.a)(ye,2),Ce=Se[0],we=Se[1],Oe=function(){T.get("/user/getLibrary").then((function(e){y(e.result.list)}))},_e=function(){l(!1)},Le=function(e,t){u(e),l(!0),E(t)},Ie=function(t){window.confirm("Are you sure to delete this library?")&&T.post("/admin/deleteLibrary",{id:t}).then((function(e){_e(),Oe()})).catch((function(t){e(t.msg,{variant:"error"})}))},ke=function(){_(!1)},Ne=function(e,t,a){k(t),_(!0),D(a),u(e)},xe=function(t,a){window.confirm("Are you sure to delete this chapter?")&&T.post("/admin/deleteChapter",{chapterId:a,libraryId:t}).then((function(e){ke(),Oe()})).catch((function(t){e(t.msg,{variant:"error"})}))},Te=function(e,t,a,n){z(a),F(!0),X(n),k(t),u(e)},Ae=function(){F(!1)},De=function(t,a,n){window.confirm("Are you sure to delete this section?")&&T.post("/admin/deleteSection",{sectionId:n,chapterId:a,libraryId:t}).then((function(e){Ae(),Oe()})).catch((function(t){e(t.msg,{variant:"error"})}))},qe=function(e){ce(!0),u(e);var t=v.find((function(t){return t._id===e}));t&&se(t.teacher)},Pe=function(){ce(!1)},He=function(e,t){T.post("/admin/changeLibraryOrder",{libraryId:e,type:t}).then((function(){Oe()}))},Ge=function(e,t,a){console.log(e,t,a),T.post("/admin/changeChapterOrder",{libraryId:e,chapterId:t,type:a}).then((function(){Oe()}))},Fe=function(e,t,a,n){console.log(e,t,a,n),T.post("/admin/changeSectionOrder",{libraryId:e,chapterId:t,sectionId:a,type:n}).then((function(){Oe()}))};return Object(n.useEffect)((function(){Oe(),T.get("/admin/getTeachers").then((function(e){te(e.result.list)})),T.get("/public/getResourceBase").then((function(e){var t=e.result,a=t.helpContent,n=t.maxQuestions;ge(a),we(n)}))}),[]),Object(n.useEffect)((function(){return function(){null!=he&&(he.destroy(),Ee(null))}}),[he]),r.a.createElement(b.a,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,null,r.a.createElement("h1",null,"Library ")),r.a.createElement(P.a,{className:"text-right"},r.a.createElement(w.a,{className:"my-3",onClick:function(){return Le()}},r.a.createElement("i",{className:"fas fa-plus"})," Create New Library"))),r.a.createElement(b.a,null,r.a.createElement(Zt.a,null,r.a.createElement(Xt.a,{"aria-label":"collapsible table"},r.a.createElement(ea.a,null,r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{width:100}),r.a.createElement(Kt.a,null,"Library Name"),r.a.createElement(Kt.a,null,"Teacher"),r.a.createElement(Kt.a,{width:500}))),r.a.createElement($t.a,null,v.length>0?v.map((function(e,t){return r.a.createElement(ua,{key:e._id,row:e,canUp:t>0,canDown:v.length-1!==t,openLibraryModal:Le,deleteLibrary:Ie,openChatperModal:Ne,deleteChapter:xe,openSectionModal:Te,deleteSection:De,openTeacherModal:qe,changeLibraryOrder:He,changeChapterOrder:Ge,changeSectionOrder:Fe})})):r.a.createElement(ta.a,null,r.a.createElement(Kt.a,{colSpan:4},r.a.createElement(Z,{variant:"info"},"No library found")))))),r.a.createElement("div",{style:{marginTop:"60px"}},r.a.createElement("h2",null,"Resources Setting"),r.a.createElement("h4",{style:{marginTop:"40px"}},"Help"),r.a.createElement("div",{style:{border:"1px solid #ccc",zIndex:100,marginTop:"20px",marginBottom:"20px"}},r.a.createElement(je.b,{editor:he,defaultConfig:Ue,mode:"default",style:{borderBottom:"1px solid #ccc"}}),r.a.createElement(je.a,{defaultConfig:fe,value:be,onCreated:Ee,onChange:function(e){return ge(e.getHtml())},mode:"default",style:{height:"300px",overflowY:"hidden"}})),r.a.createElement(w.a,{onClick:function(){T.post("/admin/editResourceBase",{helpContent:be}).then((function(t){e("Successfully saved",{variant:"success"})}))}},"Save"),r.a.createElement("h4",{style:{marginTop:"40px"}},"Max Resources"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(V.a.Control,{style:{width:"200px",marginRight:"4px"},type:"input",value:Ce,onChange:function(e){return we(e.target.value)}}),r.a.createElement(w.a,{onClick:function(){/^[0-9]*$/.test(Ce)?T.post("/admin/editResourceBase",{maxQuestions:Ce}).then((function(t){e("Successfully saved",{variant:"success"})})):e("Please enter a number",{variant:"error"})}},"Save")))),r.a.createElement(de.a,{show:c,onHide:_e},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,s?"Eidt":"Create"," Library")),r.a.createElement(de.a.Body,null,r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Library Name"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter library name",value:h,onChange:function(e){return E(e.target.value)}}))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:_e},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){s?T.post("/admin/updateLibrary",{id:s,name:h}).then((function(e){_e(),Oe()})):T.post("/admin/createLibrary",{name:h}).then((function(e){_e(),Oe()}))}},"Save"))),r.a.createElement(de.a,{show:O,onHide:ke},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,I?"Eidt":"Create"," Chatper")),r.a.createElement(de.a.Body,null,r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Chatper Name"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter chapter name",value:A,onChange:function(e){return D(e.target.value)}}))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:ke},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){I?T.post("/admin/updateChapter",{chapterId:I,libraryId:s,name:A}).then((function(e){ke(),Oe()})):T.post("/admin/createChapter",{name:A,libraryId:s}).then((function(e){ke(),Oe()}))}},"Save"))),r.a.createElement(de.a,{show:H,onHide:Ae},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,Q?"Eidt":"Create"," Section")),r.a.createElement(de.a.Body,null,r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Section Name"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter section name",value:J,onChange:function(e){return X(e.target.value)}}))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:Ae},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){Q?T.post("/admin/updateSection",{sectionId:Q,chapterId:I,libraryId:s,name:J}).then((function(e){Ae(),Oe()})):T.post("/admin/createSection",{name:J,chapterId:I,libraryId:s}).then((function(e){Ae(),Oe()}))}},"Save"))),r.a.createElement(de.a,{show:re,onHide:Pe},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Teacher")),r.a.createElement(de.a.Body,null,r.a.createElement(Xt.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"ID"),r.a.createElement("th",null))),r.a.createElement("tbody",null,ee.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e._id),r.a.createElement("td",null,ie&&ie._id===e._id?r.a.createElement(w.a,{variant:"primary",onClick:function(){return t=e._id,void T.post("/admin/unbindTeacherToLibrary",{teacherId:t,libraryId:s}).then((function(){se({}),Oe()}));var t}},"Unbind"):r.a.createElement(w.a,{variant:"primary",onClick:function(){return t=e._id,void T.post("/admin/bindTeacherToLibrary",{teacherId:t,libraryId:s}).then((function(){Oe(),Pe()}));var t}},"Bind")))})))))))}var da=["A","B","C","D"];function ha(e){e.history;var t=Object(n.useState)([]),a=Object(G.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(G.a)(m,2),h=(d[0],d[1],Object(n.useState)([])),E=Object(G.a)(h,2),f=E[0],p=E[1],v=Object(n.useState)(""),b=Object(G.a)(v,2),g=b[0],y=b[1],S=Object(n.useRef)(""),C=Object(n.useRef)(""),O=Object(n.useRef)("");return Object(n.useEffect)((function(){T.get("/teacher/getSourceList").then((function(e){p(e.result.list)}))}),[]),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"library-left-content"},r.a.createElement("div",{className:"library-left-tree"},r.a.createElement(at,{defaultSelected:!0,expandedAll:!0,onChange:function(e){var t=e.library,a=e.chapter,n=e.section;u(!0),S.current=t,C.current=a,O.current=n,T.get("/teacher/getQuestionByLibrary",{params:{libraryId:t.id,chapterId:a.id,sectionId:n.id}}).then((function(e){l(e.result.list)})).finally((function(){u(!1)}))}}))),r.a.createElement("div",{style:{flex:1,marginLeft:"10px"}},r.a.createElement("div",null,r.a.createElement(V.a,{inline:!0,style:{marginBottom:"10px"}},r.a.createElement(V.a.Group,{controlId:"search"},r.a.createElement(V.a.Control,{as:"select",style:{width:"250px"},className:"mr-sm-3 ml-sm-6",defaultValue:g,onChange:function(e){return y(e.target.value)},custom:!0},f.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)}))),r.a.createElement(w.a,{onClick:function(){u(!0),T.get("/teacher/getQuestionByLibrary",{params:{libraryId:S.current.id,chapterId:C.current.id,sectionId:O.current.id,sourceId:g}}).then((function(e){l(e.result.list)})).finally((function(){u(!1)}))},variant:"outline-success"},"Search")))),s?r.a.createElement(te,null):r.a.createElement("div",null,c.length>0?c.map((function(e,t){return r.a.createElement("div",{className:"question question-border",key:e._id},r.a.createElement("div",{className:"question-title"},"Question ",t+1),r.a.createElement("div",{className:"question-sub-title"},e.name,r.a.createElement("i",{className:"question-edit fas fa-edit",onClick:function(){return t=e._id,void window.open("/teach/question/".concat(t,"/edit"),"_blank");var t}})),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:e.qText}}),"0"===e.isChoice&&r.a.createElement("div",{className:"question-options"},da.map((function(t,a){return r.a.createElement(V.a.Check,{key:t,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(t),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e["answer".concat(t)]}}))))})),Number(e.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e.answerE}}))))),"1"===e.isChoice&&r.a.createElement("div",{className:"question-options"},da.map((function(t,a){return r.a.createElement(V.a.Check,{key:t,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(t),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e["answer".concat(t)]}}))))})),Number(e.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e.answerE}}))))),"2"===e.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,disabled:!0})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",e.correctAnswer))})):r.a.createElement(Z,{variant:"info"},"No Question"))))}var Ea=a(963),fa=a(964),pa=a(952),va=a(960),ba=a(968),ga=a(981),ya=a(967),Sa=a(980),Ca=["A","B","C","D"];function wa(){var e=Object(g.c)().enqueueSnackbar,t=Object(n.useRef)([]),a=Object(n.useState)({}),c=Object(G.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(0),s=Object(G.a)(i,2),u=s[0],d=s[1],h=Object(n.useState)(0),E=Object(G.a)(h,2),f=E[0],p=E[1],v=Object(n.useState)(!1),b=Object(G.a)(v,2),y=b[0],S=b[1],C=Object(n.useState)(!1),O=Object(G.a)(C,2),_=O[0],j=O[1],L=Object(n.useState)(!1),I=Object(G.a)(L,2),k=I[0],N=I[1],x=Object(n.useState)(""),A=Object(G.a)(x,2),D=A[0],R=A[1],U=Object(n.useState)(null),q=Object(G.a)(U,2),P=q[0],H=q[1],F=Object(n.useState)(!1),M=Object(G.a)(F,2),B=M[0],Q=M[1],z=Object(n.useState)("3"),W=Object(G.a)(z,2),Y=W[0],J=W[1],X=Object(n.useState)(""),$=Object(G.a)(X,2),K=$[0],ae=$[1],ne=Object(n.useState)(!1),re=Object(G.a)(ne,2),ce=re[0],le=re[1],oe=Object(n.useRef)(null),ie=function(){N(!1),H(null),R("")},se=function(){S(!0),ie(),T.get("/user/getResourceQuestion").then((function(e){var a=e.result,n=a.questions,r=a.done,c=a.total;o(n.shift()),t.current=n,d(r===c?r:r+1),p(c)})).finally((function(){return S(!1)}))},ue=function(e){var t=D.split(",");t.includes(e)?t.splice(t.indexOf(e),1):(t.push(e),t.sort()),R(t.filter((function(e){return e})).join(","))},me=function(){t.current.length?(o(t.current.shift()),d(u+1),ie()):se()},he=function(){Q(!1)};return Object(n.useEffect)((function(){se()}),[]),r.a.createElement("div",{className:"resources-play"},r.a.createElement(At.a,{animated:!0,striped:!0,variant:"success",now:f?u/f*100:0,label:"".concat(u,"/").concat(f),style:{marginBottom:"20px"}}),y?r.a.createElement(te,null):l?r.a.createElement("div",null,r.a.createElement("div",{className:"question"},r.a.createElement("div",{className:"question-title"},"Question"),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:l.qText}}),"0"===l.isChoice&&r.a.createElement("div",{className:"question-options"},Ca.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(e),name:l._id,checked:D===e,disabled:!!l.correctAnswer,onChange:function(){return R(e)}}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:l["answer".concat(e)]}}))))})),Number(l.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",name:l._id,checked:"E"===D,disabled:!!l.correctAnswer,onChange:function(){return R("E")}}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:l.answerE}}))))),"1"===l.isChoice&&r.a.createElement("div",{className:"question-options"},Ca.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(e),name:l._id,checked:D.split(",").includes(e),disabled:!!l.correctAnswer,onChange:function(){return ue(e)}}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:l["answer".concat(e)]}}))))})),Number(l.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",name:l._id,checked:D.split(",").includes("E"),disabled:!!l.correctAnswer,onChange:function(){return ue("E")}}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:l.answerE}}))))),"2"===l.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,value:D,disabled:!!l.correctAnswer,onChange:function(e){return R(e.target.value)}})),r.a.createElement("div",{className:"resources-play-report",onClick:function(){J("1"),ae(""),Q(!0)}},"report bug"),r.a.createElement("div",{style:{marginTop:"10px"}},ut({isCorrect:P})),l.correctAnswer&&r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",l.correctAnswer),k&&r.a.createElement("div",{className:"question-solution"},r.a.createElement("div",{className:"question-sub-title"},"Solution"),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:l.description}})),r.a.createElement("div",{className:"question-btns"},!l.correctAnswer&&r.a.createElement(w.a,{className:"question-btn",onClick:function(){if(!D)return"0"!==l.isChoice&&"1"!==l.isChoice||e("Please select your answer",{variant:"error"}),void("2"===l.isChoice&&e("Please input your answer",{variant:"error"}));_||(j(!0),T.post("/user/submitResourceQuestion",{questionId:l._id,answer:D}).then((function(e){var t=e.result,a=t.isCorrect,n=t.correctAnswer,r=t.description;H(a);var c=Object(m.a)(Object(m.a)({},l),{},{correctAnswer:n,isCorrect:a,description:r});o(c)})).finally((function(){return j(!1)})))}},_?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Submit"),l.correctAnswer&&r.a.createElement(w.a,{variant:"info",className:"question-btn",onClick:me},"Next"),!l.correctAnswer&&r.a.createElement(w.a,{variant:"danger",className:"question-btn",onClick:function(){window.confirm("Are you sure to give up this question?")&&T.post("/user/giveUpResourceQuestion").then((function(e){me()}))}},"Give Up"),l.correctAnswer&&r.a.createElement(w.a,{variant:"success",className:"question-btn",onClick:function(){N(!k)}},k?"hide":"show"," solution")))):r.a.createElement("div",null,r.a.createElement(Z,{variant:"success"},"All questions are done!")),r.a.createElement(de.a,{show:B,onHide:he,size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Report Bug")),r.a.createElement(de.a.Body,null,r.a.createElement(ya.a,null,r.a.createElement(Sa.a,{id:"error-type"},"Type"),r.a.createElement(ba.a,{row:!0,name:"errorType",value:Y,onChange:function(e){return J(e.target.value)}},[{value:"1",label:"Incorrect Question"},{value:"2",label:"Incorrect Answer"},{value:"3",label:"Other"}].map((function(e,t){return r.a.createElement(ga.a,{key:e.value,value:e.value,control:r.a.createElement(va.a,null),label:e.label})})))),"3"===Y&&r.a.createElement(V.a.Control,{as:"textarea",rows:3,value:K,onChange:function(e){return ae(e.target.value)}})),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"primary",onClick:function(){"3"!==Y||K?ce||(le(!0),oe.current=e("Submitting report...",{variant:"info",persist:!0}),T.post("/user/reportResourceQuestion",{questionId:l._id,errorType:Y,otherContent:K}).then((function(t){e("Report submitted successfully",{variant:"success"}),Object(g.b)(oe.current)})).finally((function(){return le(!1)})),he()):e("Please input your report content",{variant:"error"})}},"Submit"))))}var Oa=navigator.platform.toUpperCase().indexOf("MAC")>=0?"Command":"Ctrl";function _a(){var e=Object(g.c)().enqueueSnackbar,t=Object(n.useState)(!1),a=Object(G.a)(t,2),c=a[0],l=a[1],o=Object(n.useRef)(null),i=Object(n.useState)([]),s=Object(G.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),h=Object(G.a)(d,2),E=h[0],f=h[1],p=Object(n.useState)([]),v=Object(G.a)(p,2),b=v[0],y=v[1],S=Object(n.useState)(!1),C=Object(G.a)(S,2),O=C[0],_=C[1],j=Object(n.useState)(!1),L=Object(G.a)(j,2),I=L[0],k=L[1],N=Object(n.useState)(1),x=Object(G.a)(N,2),A=x[0],D=x[1],R=Object(n.useState)(10),U=Object(G.a)(R,2),H=U[0],F=(U[1],Object(n.useState)(0)),M=Object(G.a)(F,2),B=M[0],Q=M[1],z=Object(n.useState)(""),Y=Object(G.a)(z,2),J=Y[0],X=Y[1],$=Object(n.useState)([]),K=Object(G.a)($,2),Z=K[0],te=K[1],ae=Object(n.useState)([]),ne=Object(G.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useState)(""),oe=Object(G.a)(le,2),ie=oe[0],se=oe[1],ue=Object(n.useState)(!1),he=Object(G.a)(ue,2),Ee=he[0],fe=he[1],pe=function(){T.get("/user/getUserSource",{params:{page:A,keyword:J,pageSize:H}}).then((function(e){te(e.result.list),Q(e.result.total)}))},ve=function(){l(!1)},be=function(){_(!1)};return Object(n.useEffect)((function(){T.get("user/getUserSetting").then((function(e){var t=e.result,a=t.libraries,n=t.sources,r=t.difficulty,c=t.isClassroomStudent;if(a.length>0){var l=a.map((function(e){var t=e.libraryId,a={};if(t&&(a.library={id:t._id,name:t.name},e.chapterId)){var n=t.chapter.find((function(t){return t._id===e.chapterId}));if(a.chapter={id:n._id,name:n.name},e.sectionId){var r=n.section.find((function(t){return t._id===e.sectionId}));a.section={id:r._id,name:r.name}}}return a}));f(l)}if(n.length>0){var o=n.map((function(e){return{id:e._id,name:e.name}}));y(o)}se(r),k(c)}))}),[]),Object(n.useEffect)((function(){pe()}),[A,H]),r.a.createElement("div",{className:"resources-setting"},r.a.createElement(V.a,null,r.a.createElement(V.a.Group,{controlId:"library"},r.a.createElement(V.a.Label,null,"Library"),r.a.createElement("div",{className:"form-library-control",onClick:function(){var e=[];E.forEach((function(t){var a=t.library,n=t.chapter,r=t.section;r&&r.id?e.push(r.id):n&&n.id?e.push(n.id):a&&a.id&&e.push(a.id)})),m(e),l(!0)}},E.map((function(e,t){return r.a.createElement("div",{key:t},function(e){var t=e.library,a=e.chapter,n=e.section,r=[];return t&&t.id&&r.push(t.name),a&&a.id&&r.push(a.name),n&&n.id&&r.push(n.name),r.join(" / ")}(e))})))),r.a.createElement(V.a.Group,{controlId:"source"},r.a.createElement(V.a.Label,null,"Source"),r.a.createElement("div",{className:"form-library-control",onClick:function(){_(!0),ce(Object(W.a)(b))}},b.map((function(e,t){return r.a.createElement("div",{key:t},e.name)})))),r.a.createElement(V.a.Group,{controlId:"difficulty"},r.a.createElement(V.a.Label,null,"Difficulty"),r.a.createElement(V.a.Control,{as:"select",value:ie,onChange:function(e){return se(e.target.value)}},r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"difficult"},"Difficult"),r.a.createElement("option",{value:"veryDifficult"},"Very difficult"),r.a.createElement("option",{value:"all"},"All"))),r.a.createElement(V.a.Check,{disabled:!0,type:"checkbox",label:"Classroom Student",id:"classroomStudent",checked:I}),r.a.createElement(w.a,{variant:"primary",onClick:function(){if(0!==E.length)if(0!==b.length){fe(!0);var t={libraries:E.map((function(e){var t={};return e.library&&e.library.id&&(t.libraryId=e.library.id),e.chapter&&e.chapter.id&&(t.chapterId=e.chapter.id),e.section&&e.section.id&&(t.sectionId=e.section.id),t})),sources:b.map((function(e){return e.id})),difficulty:ie};T.post("/user/updateUserSetting",t).then((function(t){var a=t.result;e("Save success, There are a total of ".concat(a>10?"10+":a," questions in this setting"),{variant:"success"})})).finally((function(){fe(!1)}))}else e("Please select source",{variant:"error"});else e("Please select library",{variant:"error"})},style:{marginTop:"20px"}},Ee?r.a.createElement(ee.a,{animation:"border",size:"sm"}):"Save")),r.a.createElement(de.a,{show:c,onHide:ve,size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Library")),r.a.createElement(de.a.Body,null,r.a.createElement("div",{style:{marginBottom:"20px"}},"*Press ",Oa," key to multi-select"),r.a.createElement(at,{multiSelect:!0,ref:o,selected:u})),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:ve},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){var t=o.current.getLibrarySelected();0!==t.length?(f(t),l(!1)):e("Please select library",{variant:"error"})}},"Select"))),r.a.createElement(de.a,{show:O,onHide:be,size:"xl"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Source")),r.a.createElement(de.a.Body,null,r.a.createElement(q.a,{className:"align-items-center"},r.a.createElement(P.a,{lg:8},r.a.createElement(V.a.Group,{controlId:"search",style:{display:"flex"}},r.a.createElement(V.a.Control,{className:"mr-sm-3 ml-sm-6",type:"text",name:"keyword",value:J,onChange:function(e){return X(e.target.value)},placeholder:"Search By NAME"}),r.a.createElement(w.a,{size:"sm",onClick:function(){1===A?pe():D(1)},variant:"outline-success"},"Search")))),r.a.createElement("div",{className:"mb-2"},"Selected: ",re.map((function(e){return e.name})).join("\u3001")),r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"source-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:80}),r.a.createElement("th",null,"name"))),r.a.createElement("tbody",null,Z.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement(_e.a,{disabled:e.expired,checked:re.map((function(e){return e.id})).includes(e._id),onClick:function(){return function(e){re.map((function(e){return e.id})).includes(e._id)?ce(re.filter((function(t){return t.id!==e._id}))):ce([].concat(Object(W.a)(re),[{id:e._id,name:e.name}]))}(e)}})),r.a.createElement("td",null,e.name))})))),r.a.createElement(Oe.a,{count:Math.ceil(B/H),page:A,onChange:function(e,t){D(t)}})),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:be},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:function(){_(!1),y(Object(W.a)(re))},disabled:0===re.length},"Select"))))}var ja=a(982),La=a(965),Ia=a(530),ka=a(295),Na=a(231),xa=a(225),Ta=["A","B","C","D"],Aa=["#0088FE","#00C49F","#FFBB28","#FF8042"];var Da=Math.PI/180,Ra=function(e){var t=e.cx,a=e.cy,n=e.midAngle,c=e.innerRadius,l=e.outerRadius,o=e.percent,i=(e.index,e.name,c+.5*(l-c)),s=t+i*Math.cos(-n*Da),u=a+i*Math.sin(-n*Da);return r.a.createElement("text",{x:s,y:u,fill:"white",textAnchor:s>t?"start":"end",dominantBaseline:"central","font-size":"12"},"".concat((100*o).toFixed(0),"%"))};function Ua(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(G.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(""),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(0),f=Object(G.a)(E,2),p=f[0],v=f[1],b=Object(n.useState)([]),g=Object(G.a)(b,2),y=g[0],S=g[1],C=Object(n.useState)(0),w=Object(G.a)(C,2),O=w[0],_=w[1],j=Object(n.useState)(0),L=Object(G.a)(j,2),I=L[0],k=L[1],N=Object(n.useState)(!1),x=Object(G.a)(N,2),A=x[0],D=x[1],R=Object(n.useState)({question:{}}),U=Object(G.a)(R,2),q=U[0],P=U[1],H=Object(n.useState)([]),F=Object(G.a)(H,2),M=F[0],B=F[1];return Object(n.useEffect)((function(){B([{name:"Correct",value:O},{name:"Incorrect",value:I},{name:"Gave up",value:p}])}),[O,I,p]),Object(n.useEffect)((function(){T.get("user/getUserSetting").then((function(e){var t=e.result,a=t.libraries,n=t.sources,r=t.difficulty,l=t.skip;if(a.length>0){var o=a.map((function(e){var t=e.libraryId,a={};if(t&&(a.library={id:t._id,name:t.name},e.chapterId)){var n=t.chapter.find((function(t){return t._id===e.chapterId}));if(a.chapter={id:n._id,name:n.name},e.sectionId){var r=n.section.find((function(t){return t._id===e.sectionId}));a.section={id:r._id,name:r.name}}}return a}));c(o)}if(n.length>0){var i=n.map((function(e){return{id:e._id,name:e.name}}));s(i)}h(r),v(l)})),T.get("user/getResourceRecord").then((function(e){var t=e.result.list;S(t);var a=t.filter((function(e){return e.isCorrect})).length;_(a),k(t.length-a)}))}),[]),r.a.createElement("div",{className:"resources-report"},r.a.createElement("div",{className:"resources-report-setting"},r.a.createElement("div",{className:"resources-report-setting-title"},"Libraries:"),r.a.createElement("div",{className:"resources-report-setting-content"},a.map((function(e,t){return r.a.createElement("div",{key:t},function(e){var t=e.library,a=e.chapter,n=e.section,r=[];return t&&t.id&&r.push(t.name),a&&a.id&&r.push(a.name),n&&n.id&&r.push(n.name),r.join(" / ")}(e))}))),r.a.createElement("div",{className:"resources-report-setting-title"},"Sources:"),r.a.createElement("div",{className:"resources-report-setting-content"},i.map((function(e,t){return r.a.createElement("div",{key:t},e.name)}))),r.a.createElement("div",{className:"resources-report-setting-row"},r.a.createElement("span",null,"Difficulty: "),d),r.a.createElement("div",{className:"resources-report-setting-row"},r.a.createElement("span",null,"Problems: "),y.length),r.a.createElement("div",{className:"resources-report-setting-row"},r.a.createElement("span",null,"Correct: "),O),r.a.createElement("div",{className:"resources-report-setting-row"},r.a.createElement("span",null,"Incorrect: "),I),r.a.createElement("div",{className:"resources-report-setting-row"},r.a.createElement("span",null,"Gave Up: "),p),r.a.createElement(ja.a,{width:"100%",height:300},r.a.createElement(La.a,{width:300,height:300},r.a.createElement(Ia.a,{dataKey:"value",data:M,cx:"50%",cy:"50%",outerRadius:120,fill:"#8884d8",label:Ra,labelLine:!1},M.map((function(e,t){return r.a.createElement(ka.a,{key:"cell-".concat(t),fill:Aa[t%Aa.length]})}))),r.a.createElement(Na.a,null),r.a.createElement(xa.a,{verticalAlign:"top",height:36})))),r.a.createElement("div",{className:"resources-report-content"},y.map((function(e,t){return r.a.createElement("div",{key:t,className:"resources-report-item",onClick:function(){return function(e){e.question._id&&(P(e),D(!0))}(e)}},r.a.createElement("div",{className:"resources-report-top"},e.isCorrect?r.a.createElement("div",{className:"question-correct-right icon"}):r.a.createElement("div",{className:"question-correct-wrong icon"}),r.a.createElement("div",{className:"resources-report-time"},kt()(e.createdAt).format("YYYY-MM-DD HH:mm:ss"))),r.a.createElement("div",{className:"resources-report-item-content"},e.question?(a=e.question.qText)?a.replace(/<[^>]+>/g,""):"":e.question));var a}))),r.a.createElement(de.a,{show:A,onHide:function(){return D(!1)},size:"xl"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Question Detail")),r.a.createElement(de.a.Body,null,r.a.createElement("div",{className:"question",style:{marginTop:"0",padding:"0 16px"},key:q._id},r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:q.question.qText}}),"0"===q.question.isChoice&&r.a.createElement("div",{className:"question-options"},Ta.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",checked:q.answer===e,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:q["answer".concat(e)]}}))))})),Number(q.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",checked:"E"===q.answer,disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:q.answerE}}))))),"1"===q.question.isChoice&&r.a.createElement("div",{className:"question-options"},Ta.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(e),checked:q.answer.split(",").includes(e),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:q["answer".concat(e)]}}))))})),Number(q.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",checked:q.answer.split(",").includes("E"),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:q.answerE}}))))),"2"===q.question.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,value:q.answer,disabled:!0})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",q.question.correctAnswer),r.a.createElement("div",{className:"question-corrections"},!0===q.isCorrect&&r.a.createElement("div",{className:"question-correct-right"}),!1===q.isCorrect&&r.a.createElement("div",{className:"question-correct-wrong"})),r.a.createElement("div",{className:"question-solution"},r.a.createElement("div",{className:"question-sub-title"},"Solution"),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:q.question.description}}))))))}var qa=["A","B","C","D"];function Pa(){var e=Object(n.useState)(!1),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(1),o=Object(G.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(10),m=Object(G.a)(u,2),d=m[0],h=(m[1],Object(n.useState)(0)),E=Object(G.a)(h,2),f=E[0],p=E[1],v=Object(n.useState)([]),b=Object(G.a)(v,2),g=b[0],y=b[1],S=Object(n.useState)(!1),C=Object(G.a)(S,2),w=C[0],O=C[1],_=Object(n.useState)({}),j=Object(G.a)(_,2),L=j[0],I=j[1];return Object(n.useEffect)((function(){c(!0),T.get("/user/getStudentQuestionRecord",{params:{page:i,pageSize:d}}).then((function(e){var t=e.result,a=t.total,n=t.list;p(a),y(n)})).finally((function(){c(!1)}))}),[i,d]),r.a.createElement("div",{className:"resources-profile"},r.a.createElement("div",null,a?r.a.createElement(te,null):r.a.createElement("div",null,g.length>0?g.map((function(e,t){var a=e.question;return a?r.a.createElement("div",{className:"question profile-question",key:a._id,onClick:function(){return function(e){O(!0),I(g[e].question)}(t)}},!0===e.isCorrect&&r.a.createElement("div",{className:"question-correct-right"}),!1===e.isCorrect&&r.a.createElement("div",{className:"question-correct-wrong"}),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:a.qText}})):null})):r.a.createElement(Z,{variant:"info"},"No Question"))),r.a.createElement(Oe.a,{class:"profile-pagination",count:Math.ceil(f/d),page:i,onChange:function(e,t){s(t)}}),r.a.createElement(de.a,{show:w,onHide:function(){O(!1)},size:"lg"},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Question")),r.a.createElement(de.a.Body,null,r.a.createElement("div",{className:"question",key:L._id},r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:L.qText}}),"0"===L.isChoice&&r.a.createElement("div",{className:"question-options"},qa.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(e),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:L["answer".concat(e)]}}))))})),Number(L.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:L.answerE}}))))),"1"===L.isChoice&&r.a.createElement("div",{className:"question-options"},qa.map((function(e,t){return r.a.createElement(V.a.Check,{key:e,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(e),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(e)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(e,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:L["answer".concat(e)]}}))))})),Number(L.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:L.answerE}}))))),"2"===L.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,disabled:!0})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",L.correctAnswer)))))}a(499);var Ha=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(G.a)(l,2),i=o[0],s=o[1];return Object(n.useEffect)((function(){s(!0),T.get("/public/getResourceBase").then((function(e){c(e.result.helpContent)})).finally((function(){s(!1)}))}),[]),r.a.createElement("div",{className:"help"},i?r.a.createElement(te,null):r.a.createElement("div",{className:"rich-text",dangerouslySetInnerHTML:{__html:a}}))};function Ga(){var e=Object(n.useState)(0),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(["PLAY","HISTORY","REPORT","HELP","SETTINGS"]),o=Object(G.a)(l,2),i=o[0];o[1];return r.a.createElement("div",{className:"resources-container"},r.a.createElement("div",{className:"resources-menu-container"},r.a.createElement(Ea.a,{dense:!0,variant:"menu",className:"resources-menu"},i.map((function(e,t){return r.a.createElement(fa.a,{key:e,onClick:function(){return c(t)},selected:a===t},r.a.createElement(pa.a,{inset:!0},e))})))),r.a.createElement("div",{className:"resources-content"},0===a&&r.a.createElement(wa,null),1===a&&r.a.createElement(Pa,null),2===a&&r.a.createElement(Ua,null),3===a&&r.a.createElement(Ha,null),4===a&&r.a.createElement(_a,null)))}var Fa=["A","B","C","D"];function Ma(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(G.a)(l,2),i=o[0],s=o[1];return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"library-left-content"},r.a.createElement("div",{className:"library-left-tree"},r.a.createElement(at,{defaultSelected:!0,expandedAll:!0,onChange:function(e){var t=e.library,a=e.chapter,n=e.section;s(!0),T.get("/admin/getQuestionByLibrary",{params:{libraryId:t.id,chapterId:a.id,sectionId:n.id}}).then((function(e){c(e.result.list)})).finally((function(){s(!1)}))}}))),r.a.createElement("div",{style:{flex:1,marginLeft:"10px"}},i?r.a.createElement(te,null):r.a.createElement("div",null,a.length>0?a.map((function(e,t){return r.a.createElement("div",{className:"question question-border",key:e._id},r.a.createElement("div",{className:"question-title"},"Question ",t+1),r.a.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:e.qText}}),"0"===e.isChoice&&r.a.createElement("div",{className:"question-options"},Fa.map((function(t,a){return r.a.createElement(V.a.Check,{key:t,type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answer".concat(t),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e["answer".concat(t)]}}))))})),Number(e.numChoice)>4&&r.a.createElement(V.a.Check,{type:"radio"},r.a.createElement(V.a.Check.Input,{type:"radio",id:"answerE",disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e.answerE}}))))),"1"===e.isChoice&&r.a.createElement("div",{className:"question-options"},Fa.map((function(t,a){return r.a.createElement(V.a.Check,{key:t,type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answer".concat(t),disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answer".concat(t)},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"".concat(t,".")),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e["answer".concat(t)]}}))))})),Number(e.numChoice)>4&&r.a.createElement(V.a.Check,{type:"checkbox"},r.a.createElement(V.a.Check.Input,{type:"checkbox",id:"answerE",disabled:!0}),r.a.createElement(V.a.Check.Label,{for:"answerE"},r.a.createElement("div",{className:"question-option"},r.a.createElement("div",{className:"label"},"E."),r.a.createElement("div",{className:"value",dangerouslySetInnerHTML:{__html:e.answerE}}))))),"2"===e.isChoice&&r.a.createElement("div",{className:"question-textarea"},r.a.createElement(V.a.Control,{as:"textarea",rows:3,disabled:!0})),r.a.createElement("div",{className:"question-correct"},"Correct Answer: ",e.correctAnswer))})):r.a.createElement(Z,{variant:"info"},"No Question"))))}var Ba=a(956),Qa=function(e){var t=e.match,a=Object(o.c)((function(e){return e.userLogin})).userInfo,c=Object(n.useState)({}),l=Object(G.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)({}),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)({}),f=Object(G.a)(E,2),p=f[0],v=f[1],b=Object(n.useState)([]),y=Object(G.a)(b,2),S=y[0],C=y[1],O=Object(n.useState)(!1),_=Object(G.a)(O,2),j=_[0],L=_[1],I=Object(n.useState)(1),k=Object(G.a)(I,2),N=k[0],x=k[1],A=Object(n.useRef)(""),D=Object(n.useState)(!1),R=Object(G.a)(D,2),U=R[0],q=R[1],P=Object(n.useState)(!1),H=Object(G.a)(P,2),F=H[0],M=H[1],B=Object(n.useState)(!1),Q=Object(G.a)(B,2),z=Q[0],W=Q[1],Y=Object(n.useState)(!1),J=Object(G.a)(Y,2),X=J[0],$=J[1],K=Object(g.c)().enqueueSnackbar,Z=function(){$(!0),T.get("/user/getClassRegister?id=".concat(t.params.id)).then((function(e){var t=e.result,a=t.parentInfo,n=t.students,r=t.classInfo,c=t.interested,l=t.paid,o=t.registered,i=t.studentInfo;s(a||{}),C(n||[]),v(r||{}),q(c),M(l),W(o),h(i||{})})).finally((function(){$(!1)}))},ee=function(){T.post("/user/registerClass",{classId:t.params.id,userId:A.current,durationType:N}).then((function(e){Z(),ne(),K("Interest success",{variant:"success"})}))},ae=function(e){A.current=e,p.includeLibrary?L(!0):ee()},ne=function(){L(!1),x(1)},re=function(e){window.confirm("Please confirm you have paid through the payment information below")&&T.post("/user/payClass",{classId:t.params.id,userId:e}).then((function(e){Z(),K("We have sent a mail to this teacher, please wait",{variant:"success"})}))},ce=function(e){return e.registered?"Registered":e.interested?e.paid?"Pending payment confirmation":"Interested":""};return Object(n.useEffect)((function(){Z()}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Class Register"),X?r.a.createElement(te,null):r.a.createElement("div",null,r.a.createElement("h4",{className:"mt-4"},"Parent Information"),r.a.createElement("p",null,"name: ",i.name),r.a.createElement("p",null,"email: ",i.email),r.a.createElement("p",null,"phone: ",i.phone),"Student"===a.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"mt-4"},"Student Information"),r.a.createElement("p",null,"name: ",d.name),r.a.createElement("p",null,"email: ",d.email)),"Parent"===a.role?r.a.createElement("div",null,r.a.createElement("h4",{className:"mt-4"},"student list"),r.a.createElement(me.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,S.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,ce(e)),r.a.createElement("td",null,!e.interested&&r.a.createElement(Ba.a,{title:"If you interest in the class, please click 'Interest' to add to mail list."},r.a.createElement(w.a,{onClick:function(){return ae(e._id)}},"Register")),e.interested&&!e.paid&&r.a.createElement(w.a,{className:"ml-2",onClick:function(){return re(e._id)}},"MAKE PAYMENT"),e.registered&&r.a.createElement(w.a,{className:"ml-2",disabled:!0},"Enrolled")))}))))):r.a.createElement("div",null,r.a.createElement("p",null,"status: ",ce({interested:U,paid:F,registered:z})),!U&&r.a.createElement(Ba.a,{title:"If you interest in the class, please click 'Interest' to add to mail list."},r.a.createElement(w.a,{onClick:function(){return ae(a._id)}},"Register")),U&&!F&&r.a.createElement(w.a,{className:"ml-2",onClick:function(){return re(a._id)}},"MAKE PAYMENT"),z&&r.a.createElement(w.a,{className:"ml-2",disabled:!0},"Enrolled")),r.a.createElement("div",null,r.a.createElement("h4",{className:"mt-4"},"Payment Information"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:p.paymentInfo}}),r.a.createElement("p",null,"After you paid, please click Paid button to inform the teacher."))),r.a.createElement(de.a,{show:j,onHide:ne},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,"Duration")),r.a.createElement(de.a.Body,null,r.a.createElement("div",null,[{value:1,label:"1 month"},{value:2,label:"1 year"}].map((function(e){return r.a.createElement(V.a.Check,{type:"radio",id:"role-".concat(e.value),label:e.label,checked:e.value===N,onChange:function(){return x(e.value)}})})))),r.a.createElement(de.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:ne},"Close"),r.a.createElement(w.a,{variant:"primary",onClick:ee},"Submit"))))},za=function(e){var t=e.location,a=e.history,c=Object(n.useState)(""),l=Object(G.a)(c,2),i=(l[0],l[1],Object(n.useState)("")),s=Object(G.a)(i,2),u=(s[0],s[1],Object(n.useState)("")),m=Object(G.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(""),f=Object(G.a)(E,2),p=(f[0],f[1],Object(n.useState)("")),b=Object(G.a)(p,2),y=(b[0],b[1],Object(n.useState)(60)),S=Object(G.a)(y,2),C=S[0],O=S[1],_=Object(n.useState)(!1),j=Object(G.a)(_,2),L=j[0],I=j[1],k=Object(n.useState)("Student"),N=Object(G.a)(k,2),x=(N[0],N[1],Object(n.useState)(["Student","Parent"])),A=(Object(G.a)(x,1)[0],Object(n.useState)("")),D=Object(G.a)(A,2),R=(D[0],D[1],Object(n.useState)("")),U=Object(G.a)(R,2),H=U[0],F=U[1],M=Object(n.useState)(""),B=Object(G.a)(M,2),Q=B[0],z=B[1],W=Object(n.useState)(""),Y=Object(G.a)(W,2),J=Y[0],X=Y[1],$=Object(n.useState)(""),K=Object(G.a)($,2),ee=K[0],ae=K[1],ne=Object(n.useState)(""),re=Object(G.a)(ne,2),ce=re[0],le=re[1],oe=Object(n.useState)(""),se=Object(G.a)(oe,2),ue=se[0],me=se[1],de=Object(n.useState)(""),he=Object(G.a)(de,2),Ee=he[0],fe=he[1],pe=Object(n.useState)(["1","2","3","4","5","6","7","8","9","10","11","12"]),ve=Object(G.a)(pe,1)[0],be=Object(n.useState)("1"),ge=Object(G.a)(be,2),ye=ge[0],Se=ge[1],Ce=Object(n.useState)(""),we=Object(G.a)(Ce,2),Oe=we[0],_e=we[1],je=Object(n.useState)(""),Le=Object(G.a)(je,2),Ie=Le[0],ke=Le[1],Ne=Object(n.useState)(""),xe=Object(G.a)(Ne,2),Te=xe[0],Ae=xe[1],De=Object(n.useState)(""),Re=Object(G.a)(De,2),Ue=Re[0],qe=Re[1],Pe=Object(n.useState)(!1),He=Object(G.a)(Pe,2),Ge=He[0],Fe=He[1],Me=Object(n.useState)(""),Be=Object(G.a)(Me,2),Qe=Be[0],ze=Be[1],We=Object(n.useState)(""),Ye=Object(G.a)(We,2),Ve=Ye[0],Je=Ye[1],Xe=Object(n.useState)(""),$e=Object(G.a)(Xe,2),Ke=$e[0],Ze=$e[1],et=Object(n.useState)(""),tt=Object(G.a)(et,2),at=tt[0],nt=tt[1],rt=Object(o.b)(),ct=Object(g.c)().enqueueSnackbar,lt=Object(o.c)((function(e){return e.userRegister})),ot=lt.loading,it=lt.error,st=lt.userInfo,ut=t.search?t.search.split("=")[1]:"/";Object(n.useEffect)((function(){st&&a.push(ut)}),[a,st,ut]);return Object(n.useEffect)((function(){var e=null;return L&&C>0?e=setInterval((function(){O((function(e){return e-1}))}),1e3):0===C&&I(!1),function(){return clearInterval(e)}}),[L,C]),r.a.createElement(ie,null,r.a.createElement("h1",null,"Sign Up"),it&&r.a.createElement(Z,{variant:"danger"},it),ot&&r.a.createElement(te,null),r.a.createElement(V.a,{onSubmit:function(e){if(e.preventDefault(),d)if(Oe)if(H)if(Ge||Te)if(Ge||Te===Ue)if(Qe)if(Ve)if(/\S+@\S+\.\S+/.test(Ve))if(Ie!==Ve)if(Ee)if(ye)if(Ke)if(Ke===at){var t={name:Oe,email:Ie,password:Te,phone:H,address:Q,city:J,state:ee,country:ce,zip:ue},n={name:Qe,email:Ve,password:Ke,school:Ee,gradeInSchoolYear:ye};T.post("/login/registerFamily",{parent:t,student:n,code:Number(d)}).then((function(){ct("Register successfully",{variant:"success"}),setTimeout((function(){a.push("/login")}),2e3)})).catch((function(e){ct(e.msg,{variant:"error"})}))}else ct("Student's passwords do not match",{variant:"error"});else ct("Student Password is required",{variant:"error"});else ct("Grade is required",{variant:"error"});else ct("School is required",{variant:"error"});else ct("Parent and Student email should be different",{variant:"error"});else ct("Invalid email",{variant:"error"});else ct("Student Email is required",{variant:"error"});else ct("Student Name is required",{variant:"error"});else ct("Parents's passwords do not match",{variant:"error"});else ct("Parent Password is required",{variant:"error"});else ct("Phone is required",{variant:"error"});else ct("Parent Name is required",{variant:"error"});else ct("Code is required",{variant:"error"})},style:{marginTop:"50px"}},r.a.createElement("h2",{className:"mt-2"},"Parent"),r.a.createElement(V.a.Group,{controlId:"parentEmail"},r.a.createElement(V.a.Label,{style:{width:"100%"}},"Parent Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter Parent email",value:Ie,onChange:function(e){return ke(e.target.value.toLocaleLowerCase())},style:{width:"calc(100% - 180px)",display:"inline-block"}}),r.a.createElement(w.a,{variant:"primary",onClick:function(){I(!0),O(60),T.post("/login/sendEmail",{email:Ie}).catch((function(e){rt({type:"USER_REGISTER_FAIL",payload:e.msg})}))},disabled:L,style:{height:"45px",width:"180px",padding:"0"}},L?"".concat(C,"s"):"Send verification code")),r.a.createElement(V.a.Group,{controlId:"code"},r.a.createElement(V.a.Label,null,"Enter Verification Code from Your Email"),r.a.createElement(V.a.Control,{placeholder:"Enter verification code",value:d,onChange:function(e){return h(e.target.value)},style:{width:"calc(100% - 100px)",display:"inline-block"}}),r.a.createElement(w.a,{variant:"primary",onClick:function(){d?T.post("/login/validateEmailByCode",{email:Ie,code:Number(d)}).then((function(e){e.result?(F(e.result.phone),z(e.result.address),X(e.result.city),ae(e.result.state),le(e.result.country),me(e.result.zip),_e(e.result.name),Fe(!0)):Fe(!1),ct("Email is validated",{variant:"success"})})):ct("Code is required",{variant:"error"})},style:{height:"45px",width:"100px",padding:"0"}},"Validate")),r.a.createElement(V.a.Group,{controlId:"parentName"},r.a.createElement(V.a.Label,null,"Parent Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter Parent name",value:Oe,disabled:Ge,onChange:function(e){return _e(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"phone"},r.a.createElement(V.a.Label,null,"Phone Number"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter phone number, e.g. 617-111-1111",value:H,disabled:Ge,maxLength:12,onChange:function(e){return function(e){var t=e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3");F(t)}(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"address"},r.a.createElement(V.a.Label,null,"Street Address(Optional)"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter address",value:Q,disabled:Ge,onChange:function(e){return z(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"city"},r.a.createElement(V.a.Label,null,"City"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter city",value:J,disabled:Ge,onChange:function(e){return X(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"state"},r.a.createElement(V.a.Label,null,"State / Province"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter state / province",value:ee,disabled:Ge,onChange:function(e){return ae(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"country"},r.a.createElement(V.a.Label,null,"Country"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter country",value:ce,disabled:Ge,onChange:function(e){return le(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"zip"},r.a.createElement(V.a.Label,null,"Zip"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter zip",value:ue,disabled:Ge,onChange:function(e){return me(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"parentPassword"},r.a.createElement(V.a.Label,null,"Create Parent Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter Parent password",value:Te,disabled:Ge,onChange:function(e){return Ae(e.target.value)}}),Ge&&r.a.createElement("span",{style:{fontSize:"12px"}},"\uff08If already registered, there is no need to fill in the form\uff09")),r.a.createElement(V.a.Group,{controlId:"confirmParentPassword"},r.a.createElement(V.a.Label,null,"Confirm Parent Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Confirm Parent password",value:Ue,disabled:Ge,onChange:function(e){return qe(e.target.value)}}),Ge&&r.a.createElement("span",{style:{fontSize:"12px"}},"\uff08If already registered, there is no need to fill in the form\uff09")),r.a.createElement("h2",{className:"mt-2"},"Student"),r.a.createElement(V.a.Group,{controlId:"studentName"},r.a.createElement(V.a.Label,null,"Stuent Name"),r.a.createElement(V.a.Control,{type:"name",placeholder:"Enter Stuent name",value:Qe,onChange:function(e){return ze(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"studentEmail"},r.a.createElement(V.a.Label,{style:{width:"100%"}},"Student Email Address"),r.a.createElement(V.a.Control,{type:"email",placeholder:"Enter Student email",value:Ve,onChange:function(e){return Je(e.target.value.toLocaleLowerCase())}})),r.a.createElement(V.a.Group,{controlId:"school"},r.a.createElement(V.a.Label,null,"School Name"),r.a.createElement(V.a.Control,{type:"text",placeholder:"Enter school",value:Ee,onChange:function(e){return fe(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"gradeInSchoolYear"},r.a.createElement(V.a.Label,null,"Grade in school year"),r.a.createElement(V.a.Control,{as:"select",defaultValue:ye,onChange:function(e){return Se(e.target.value)},custom:!0},ve.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement(V.a.Group,{controlId:"studentPassword"},r.a.createElement(V.a.Label,null,"Create Student Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Enter Student password",value:Ke,onChange:function(e){return Ze(e.target.value)}})),r.a.createElement(V.a.Group,{controlId:"confirmStudentPassword"},r.a.createElement(V.a.Label,null,"Confirm Student Password"),r.a.createElement(V.a.Control,{type:"password",placeholder:"Confirm Student password",value:at,onChange:function(e){return nt(e.target.value)}})),r.a.createElement(w.a,{type:"submit",variant:"primary"},"Register")),r.a.createElement(q.a,{className:"py-3"},r.a.createElement(P.a,null,"Have an Account?"," ",r.a.createElement(v.Link,{to:ut?"/login?redirect=".concat(ut):"/login"},"Login"))))};var Wa=function(e){var t,a,c=e.children,l=Object(p.l)();return a=l.pathname,t={}[a]||"onphysics",Object(n.useEffect)((function(){document.title=t}),[t]),r.a.createElement(r.a.Fragment,null,c)},Ya=function(){var e=Object(o.b)();return Object(n.useEffect)((function(){!function(){var t=localStorage.getItem("userInfo");if(t){var a=JSON.parse(t).token;k.a.get("/user/getUserInfo",{baseURL:"/api/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(t){var n=t.data.result,r=Object(m.a)(Object(m.a)({},n),{},{token:a});e({type:"USER_LOGIN_SUCCESS",payload:r}),window.localStorage.setItem("userInfo",JSON.stringify(r))})).catch((function(e){console.log(e)}))}}()}),[]),r.a.createElement(g.a,null,r.a.createElement(v.BrowserRouter,null,r.a.createElement(Wa,null,r.a.createElement(U,null),r.a.createElement("main",{className:"py-3"},r.a.createElement(b.a,null,r.a.createElement(p.d,{path:"/",component:B,exact:!0}),r.a.createElement(p.d,{path:"/login",component:se}),r.a.createElement(p.d,{path:"/register",component:za}),r.a.createElement(p.d,{path:"/profile",component:ue}),r.a.createElement(p.d,{path:"/myclasses",component:pe}),r.a.createElement(p.d,{path:"/class/:id",component:Nt}),r.a.createElement(p.d,{path:"/product/:id",component:oe}),r.a.createElement(p.d,{path:"/admin/userlist",component:he}),r.a.createElement(p.d,{path:"/admin/user/:id/edit",component:Ee}),r.a.createElement(p.d,{path:"/admin/product/:id/edit",component:be}),r.a.createElement(p.d,{path:"/teach/classlist",component:we}),r.a.createElement(p.d,{path:"/teach/class/:id/edit",component:He}),r.a.createElement(p.d,{path:"/teach/class/:id/addStudent",component:Ge}),r.a.createElement(p.d,{path:"/teach/class/:id/addContent",component:ft}),r.a.createElement(p.d,{path:"/teach/questionlist",component:Qe}),r.a.createElement(p.d,{path:"/teach/question/:id/edit",component:ct}),r.a.createElement(p.d,{path:"/teach/hwlist",component:st}),r.a.createElement(p.d,{path:"/teach/hw/:id/edit",component:Et}),r.a.createElement(p.d,{path:"/parent/studentlist",component:pt}),r.a.createElement(p.d,{path:"/classroom/:id",component:Lt}),r.a.createElement(p.d,{path:"/simview",component:Ot}),r.a.createElement(p.d,{path:"/verify",component:xt}),r.a.createElement(p.d,{path:"/student/exerciseList",component:Tt}),r.a.createElement(p.d,{path:"/student/exerciseEdit/:id",component:Rt}),r.a.createElement(p.d,{path:"/teacher/exercise/:classId/:id",component:Ut}),r.a.createElement(p.d,{path:"/student/exercise/:id",component:Pt}),r.a.createElement(p.d,{path:"/parent/student/exercise/:studentId/:classId",component:Ht}),r.a.createElement(p.d,{path:"/resetPassword",component:Gt}),r.a.createElement(p.d,{path:"/admin/auditClass",component:Ft}),r.a.createElement(p.d,{path:"/admin/emailList",component:zt}),r.a.createElement(p.d,{path:"/admin/sendEmail",component:Wt}),r.a.createElement(p.d,{path:"/myHomework/:id",component:Yt}),r.a.createElement(p.d,{path:"/teacher/correctionExercise/:classId/:homeworkId",component:Jt}),r.a.createElement(p.d,{path:"/admin/library",component:ma}),r.a.createElement(p.d,{path:"/admin/libraryQuestion",component:Ma}),r.a.createElement(p.d,{path:"/teacher/library",component:ha}),r.a.createElement(p.d,{path:"/classRegister/:id",component:Qa})),r.a.createElement(p.d,{path:"/student/resources",component:Ga})),r.a.createElement(H,null))))};l.a.render(r.a.createElement(o.a,{store:f},r.a.createElement(Ya,null)),document.getElementById("root"))}},[[546,1,2]]]);
//# sourceMappingURL=main.d5494ae5.chunk.js.map